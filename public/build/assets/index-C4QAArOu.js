import{ad as fn,ae as dn,j as Vt,i as St,a6 as vn,F as hn,_ as V,al as jr,d as oe,e as Bt,J as pn,s as W,B as qe,am as bn,a8 as yr,z as T,E as he,an as Bn,ao as Kr,y as Qe,ap as fi,aq as Gn,ar as di,k as p,af as I,b as Gt,c as ke,as as zt,at as lt,au as Ke,aa as wn,q as Fr,h as Et,x as Kn,v as vi,av as hi,aw as Jr,ax as Qr}from"./asyncToGenerator-BcfSbg8Z.js";import{r as d,Z as gi}from"./page-DqzE0-nr.js";import{t as Jn,i as mi}from"./compact-item-BAW5xiWx.js";import{r as yi}from"./index-DYM8TcfK.js";var Zr=d.createContext(null);function pi(n){var t=n.children,e=n.onBatchResize,i=d.useRef(0),r=d.useRef([]),a=d.useContext(Zr),o=d.useCallback(function(s,l,c){i.current+=1;var u=i.current;r.current.push({size:s,element:l,data:c}),Promise.resolve().then(function(){u===i.current&&(e==null||e(r.current),r.current=[])}),a==null||a(s,l,c)},[e,a]);return d.createElement(Zr.Provider,{value:o},t)}var Qn=function(){if(typeof Map<"u")return Map;function n(t,e){var i=-1;return t.some(function(r,a){return r[0]===e?(i=a,!0):!1}),i}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(e){var i=n(this.__entries__,e),r=this.__entries__[i];return r&&r[1]},t.prototype.set=function(e,i){var r=n(this.__entries__,e);~r?this.__entries__[r][1]=i:this.__entries__.push([e,i])},t.prototype.delete=function(e){var i=this.__entries__,r=n(i,e);~r&&i.splice(r,1)},t.prototype.has=function(e){return!!~n(this.__entries__,e)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,i){i===void 0&&(i=null);for(var r=0,a=this.__entries__;r<a.length;r++){var o=a[r];e.call(i,o[1],o[0])}},t}()}(),Yr=typeof window<"u"&&typeof document<"u"&&window.document===document,pr=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),bi=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(pr):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),wi=2;function Fi(n,t){var e=!1,i=!1,r=0;function a(){e&&(e=!1,n()),i&&s()}function o(){bi(a)}function s(){var l=Date.now();if(e){if(l-r<wi)return;i=!0}else e=!0,i=!1,setTimeout(o,t);r=l}return s}var Ci=20,Ei=["top","right","bottom","left","width","height","size","weight"],Pi=typeof MutationObserver<"u",Mi=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Fi(this.refresh.bind(this),Ci)}return n.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},n.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},n.prototype.updateObservers_=function(){var t=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return t.forEach(function(e){return e.broadcastActive()}),t.length>0},n.prototype.connect_=function(){!Yr||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Pi?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!Yr||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=e===void 0?"":e,r=Ei.some(function(a){return!!~i.indexOf(a)});r&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),Zn=function(n,t){for(var e=0,i=Object.keys(t);e<i.length;e++){var r=i[e];Object.defineProperty(n,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return n},Mt=function(n){var t=n&&n.ownerDocument&&n.ownerDocument.defaultView;return t||pr},Yn=Cr(0,0,0,0);function br(n){return parseFloat(n)||0}function Fn(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.reduce(function(i,r){var a=n["border-"+r+"-width"];return i+br(a)},0)}function Ri(n){for(var t=["top","right","bottom","left"],e={},i=0,r=t;i<r.length;i++){var a=r[i],o=n["padding-"+a];e[a]=br(o)}return e}function Vi(n){var t=n.getBBox();return Cr(0,0,t.width,t.height)}function Si(n){var t=n.clientWidth,e=n.clientHeight;if(!t&&!e)return Yn;var i=Mt(n).getComputedStyle(n),r=Ri(i),a=r.left+r.right,o=r.top+r.bottom,s=br(i.width),l=br(i.height);if(i.boxSizing==="border-box"&&(Math.round(s+a)!==t&&(s-=Fn(i,"left","right")+a),Math.round(l+o)!==e&&(l-=Fn(i,"top","bottom")+o)),!xi(n)){var c=Math.round(s+a)-t,u=Math.round(l+o)-e;Math.abs(c)!==1&&(s-=c),Math.abs(u)!==1&&(l-=u)}return Cr(r.left,r.top,s,l)}var ki=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof Mt(n).SVGGraphicsElement}:function(n){return n instanceof Mt(n).SVGElement&&typeof n.getBBox=="function"}}();function xi(n){return n===Mt(n).document.documentElement}function $i(n){return Yr?ki(n)?Vi(n):Si(n):Yn}function _i(n){var t=n.x,e=n.y,i=n.width,r=n.height,a=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(a.prototype);return Zn(o,{x:t,y:e,width:i,height:r,top:e,right:t+i,bottom:r+e,left:t}),o}function Cr(n,t,e,i){return{x:n,y:t,width:e,height:i}}var Ni=function(){function n(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Cr(0,0,0,0),this.target=t}return n.prototype.isActive=function(){var t=$i(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},n}(),Ti=function(){function n(t,e){var i=_i(e);Zn(this,{target:t,contentRect:i})}return n}(),Ai=function(){function n(t,e,i){if(this.activeObservations_=[],this.observations_=new Qn,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return n.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Mt(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Ni(t)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Mt(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(i){return new Ti(i.target,i.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),Xn=typeof WeakMap<"u"?new WeakMap:new Qn,ei=function(){function n(t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=Mi.getInstance(),i=new Ai(t,e,this);Xn.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){ei.prototype[n]=function(){var t;return(t=Xn.get(this))[n].apply(t,arguments)}});var Oi=function(){return typeof pr.ResizeObserver<"u"?pr.ResizeObserver:ei}(),Je=new Map;function Li(n){n.forEach(function(t){var e,i=t.target;(e=Je.get(i))===null||e===void 0||e.forEach(function(r){return r(i)})})}var ti=new Oi(Li);function Di(n,t){Je.has(n)||(Je.set(n,new Set),ti.observe(n)),Je.get(n).add(t)}function qi(n,t){Je.has(n)&&(Je.get(n).delete(t),Je.get(n).size||(ti.unobserve(n),Je.delete(n)))}var Ii=function(n){fn(e,n);var t=dn(e);function e(){return Vt(this,e),t.apply(this,arguments)}return St(e,[{key:"render",value:function(){return this.props.children}}]),e}(d.Component);function Wi(n,t){var e=n.children,i=n.disabled,r=d.useRef(null),a=d.useRef(null),o=d.useContext(Zr),s=typeof e=="function",l=s?e(r):e,c=d.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),u=!s&&d.isValidElement(l)&&vn(l),v=u?l.ref:null,y=hn(v,r),w=function(){var F;return jr(r.current)||(r.current&&oe(r.current)==="object"?jr((F=r.current)===null||F===void 0?void 0:F.nativeElement):null)||jr(a.current)};d.useImperativeHandle(t,function(){return w()});var h=d.useRef(n);h.current=n;var m=d.useCallback(function(f){var F=h.current,g=F.onResize,C=F.data,b=f.getBoundingClientRect(),E=b.width,x=b.height,S=f.offsetWidth,k=f.offsetHeight,P=Math.floor(E),R=Math.floor(x);if(c.current.width!==P||c.current.height!==R||c.current.offsetWidth!==S||c.current.offsetHeight!==k){var $={width:P,height:R,offsetWidth:S,offsetHeight:k};c.current=$;var L=S===Math.round(E)?E:S,A=k===Math.round(x)?x:k,N=V(V({},$),{},{offsetWidth:L,offsetHeight:A});o==null||o(N,f,C),g&&Promise.resolve().then(function(){g(N,f)})}},[]);return d.useEffect(function(){var f=w();return f&&!i&&Di(f,m),function(){return qi(f,m)}},[r.current,i]),d.createElement(Ii,{ref:a},u?d.cloneElement(l,{ref:y}):l)}var zi=d.forwardRef(Wi),ji="rc-observer-key";function Hi(n,t){var e=n.children,i=typeof e=="function"?[e]:Jn(e);return i.map(function(r,a){var o=(r==null?void 0:r.key)||"".concat(ji,"-").concat(a);return d.createElement(zi,Bt({},n,{key:o,ref:a===0?t:void 0}),r)})}var gn=d.forwardRef(Hi);gn.Collection=pi;function Hr(n){return n!==void 0}function go(n,t){var e=t||{},i=e.defaultValue,r=e.value,a=e.onChange,o=e.postState,s=pn(function(){return Hr(r)?r:Hr(i)?typeof i=="function"?i():i:typeof n=="function"?n():n}),l=W(s,2),c=l[0],u=l[1],v=r!==void 0?r:c,y=o?o(v):v,w=qe(a),h=pn([v]),m=W(h,2),f=m[0],F=m[1];bn(function(){var C=f[0];c!==C&&w(c,C)},[f]),bn(function(){Hr(r)||u(r)},[r]);var g=qe(function(C,b){u(C,b),F([v],b)});return[y,g]}var ri=d.createContext(null),Cn=[];function Ui(n,t){var e=d.useState(function(){if(!yr())return null;var h=document.createElement("div");return h}),i=W(e,1),r=i[0],a=d.useRef(!1),o=d.useContext(ri),s=d.useState(Cn),l=W(s,2),c=l[0],u=l[1],v=o||(a.current?void 0:function(h){u(function(m){var f=[h].concat(T(m));return f})});function y(){r.parentElement||document.body.appendChild(r),a.current=!0}function w(){var h;(h=r.parentElement)===null||h===void 0||h.removeChild(r),a.current=!1}return he(function(){return n?o?o(y):y():w(),w},[n]),he(function(){c.length&&(c.forEach(function(h){return h()}),u(Cn))},[c]),[r,v]}var Ur;function ni(n){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),e=document.createElement("div");e.id=t;var i=e.style;i.position="absolute",i.left="0",i.top="0",i.width="100px",i.height="100px",i.overflow="scroll";var r,a;if(n){var o=getComputedStyle(n);i.scrollbarColor=o.scrollbarColor,i.scrollbarWidth=o.scrollbarWidth;var s=getComputedStyle(n,"::-webkit-scrollbar"),l=parseInt(s.width,10),c=parseInt(s.height,10);try{var u=l?"width: ".concat(s.width,";"):"",v=c?"height: ".concat(s.height,";"):"";Bn(`
#`.concat(t,`::-webkit-scrollbar {
`).concat(u,`
`).concat(v,`
}`),t)}catch(h){console.error(h),r=l,a=c}}document.body.appendChild(e);var y=n&&r&&!isNaN(r)?r:e.offsetWidth-e.clientWidth,w=n&&a&&!isNaN(a)?a:e.offsetHeight-e.clientHeight;return document.body.removeChild(e),Kr(t),{width:y,height:w}}function mo(n){return typeof document>"u"?0:(Ur===void 0&&(Ur=ni()),Ur.width)}function Bi(n){return typeof document>"u"||!n||!(n instanceof Element)?{width:0,height:0}:ni(n)}function Gi(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Ki="rc-util-locker-".concat(Date.now()),En=0;function Ji(n){var t=!!n,e=d.useState(function(){return En+=1,"".concat(Ki,"_").concat(En)}),i=W(e,1),r=i[0];he(function(){if(t){var a=Bi(document.body).width,o=Gi();Bn(`
html body {
  overflow-y: hidden;
  `.concat(o?"width: calc(100% - ".concat(a,"px);"):"",`
}`),r)}else Kr(r);return function(){Kr(r)}},[t,r])}var Qi=!1;function Zi(n){return Qi}var Pn=function(t){return t===!1?!1:!yr()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},ii=d.forwardRef(function(n,t){var e=n.open,i=n.autoLock,r=n.getContainer;n.debug;var a=n.autoDestroy,o=a===void 0?!0:a,s=n.children,l=d.useState(e),c=W(l,2),u=c[0],v=c[1],y=u||e;d.useEffect(function(){(o||e)&&v(e)},[e,o]);var w=d.useState(function(){return Pn(r)}),h=W(w,2),m=h[0],f=h[1];d.useEffect(function(){var $=Pn(r);f($??null)});var F=Ui(y&&!m),g=W(F,2),C=g[0],b=g[1],E=m??C;Ji(i&&e&&yr()&&(E===C||E===document.body));var x=null;if(s&&vn(s)&&t){var S=s;x=S.ref}var k=hn(x,t);if(!y||!yr()||m===void 0)return null;var P=E===!1||Zi(),R=s;return t&&(R=d.cloneElement(s,{ref:k})),d.createElement(ri.Provider,{value:b},P?R:yi.createPortal(R,E))});function Yi(){var n=V({},gi);return n.useId}var Mn=0,Rn=Yi();const Xi=Rn?function(t){var e=Rn();return t||e}:function(t){var e=d.useState("ssr-id"),i=W(e,2),r=i[0],a=i[1];return d.useEffect(function(){var o=Mn;Mn+=1,a("rc_unique_".concat(o))},[]),t||r};var ct="RC_FORM_INTERNAL_HOOKS",j=function(){Qe(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Rt=d.createContext({getFieldValue:j,getFieldsValue:j,getFieldError:j,getFieldWarning:j,getFieldsError:j,isFieldsTouched:j,isFieldTouched:j,isFieldValidating:j,isFieldsValidating:j,resetFields:j,setFields:j,setFieldValue:j,setFieldsValue:j,validateFields:j,submit:j,getInternalHooks:function(){return j(),{dispatch:j,initEntityValue:j,registerField:j,useSubscribe:j,setInitialValues:j,destroyForm:j,setCallbacks:j,registerWatch:j,getFields:j,setValidateMessages:j,setPreserve:j,getInitialValue:j}}}),wr=d.createContext(null);function Xr(n){return n==null?[]:Array.isArray(n)?n:[n]}function ea(n){return n&&!!n._init}function en(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var tn=en();function ta(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}function ra(n,t,e){if(fi())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(n.bind.apply(n,i));return e&&Gn(r,e.prototype),r}function rn(n){var t=typeof Map=="function"?new Map:void 0;return rn=function(i){if(i===null||!ta(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(i))return t.get(i);t.set(i,r)}function r(){return ra(i,arguments,di(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Gn(r,i)},rn(n)}var na=/%[sdj%]/g,ia=function(){};function nn(n){if(!n||!n.length)return null;var t={};return n.forEach(function(e){var i=e.field;t[i]=t[i]||[],t[i].push(e)}),t}function ge(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];var r=0,a=e.length;if(typeof n=="function")return n.apply(null,e);if(typeof n=="string"){var o=n.replace(na,function(s){if(s==="%%")return"%";if(r>=a)return s;switch(s){case"%s":return String(e[r++]);case"%d":return Number(e[r++]);case"%j":try{return JSON.stringify(e[r++])}catch{return"[Circular]"}break;default:return s}});return o}return n}function aa(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function ee(n,t){return!!(n==null||t==="array"&&Array.isArray(n)&&!n.length||aa(t)&&typeof n=="string"&&!n)}function oa(n,t,e){var i=[],r=0,a=n.length;function o(s){i.push.apply(i,T(s||[])),r++,r===a&&e(i)}n.forEach(function(s){t(s,o)})}function Vn(n,t,e){var i=0,r=n.length;function a(o){if(o&&o.length){e(o);return}var s=i;i=i+1,s<r?t(n[s],a):e([])}a([])}function sa(n){var t=[];return Object.keys(n).forEach(function(e){t.push.apply(t,T(n[e]||[]))}),t}var Sn=function(n){fn(e,n);var t=dn(e);function e(i,r){var a;return Vt(this,e),a=t.call(this,"Async Validation Error"),p(I(a),"errors",void 0),p(I(a),"fields",void 0),a.errors=i,a.fields=r,a}return St(e)}(rn(Error));function ua(n,t,e,i,r){if(t.first){var a=new Promise(function(y,w){var h=function(F){return i(F),F.length?w(new Sn(F,nn(F))):y(r)},m=sa(n);Vn(m,e,h)});return a.catch(function(y){return y}),a}var o=t.firstFields===!0?Object.keys(n):t.firstFields||[],s=Object.keys(n),l=s.length,c=0,u=[],v=new Promise(function(y,w){var h=function(f){if(u.push.apply(u,f),c++,c===l)return i(u),u.length?w(new Sn(u,nn(u))):y(r)};s.length||(i(u),y(r)),s.forEach(function(m){var f=n[m];o.indexOf(m)!==-1?Vn(f,e,h):oa(f,e,h)})});return v.catch(function(y){return y}),v}function la(n){return!!(n&&n.message!==void 0)}function ca(n,t){for(var e=n,i=0;i<t.length;i++){if(e==null)return e;e=e[t[i]]}return e}function kn(n,t){return function(e){var i;return n.fullFields?i=ca(t,n.fullFields):i=t[e.field||n.fullField],la(e)?(e.field=e.field||n.fullField,e.fieldValue=i,e):{message:typeof e=="function"?e():e,fieldValue:i,field:e.field||n.fullField}}}function xn(n,t){if(t){for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];oe(i)==="object"&&oe(n[e])==="object"?n[e]=V(V({},n[e]),i):n[e]=i}}return n}var wt="enum",fa=function(t,e,i,r,a){t[wt]=Array.isArray(t[wt])?t[wt]:[],t[wt].indexOf(e)===-1&&r.push(ge(a.messages[wt],t.fullField,t[wt].join(", ")))},da=function(t,e,i,r,a){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(e)||r.push(ge(a.messages.pattern.mismatch,t.fullField,e,t.pattern));else if(typeof t.pattern=="string"){var o=new RegExp(t.pattern);o.test(e)||r.push(ge(a.messages.pattern.mismatch,t.fullField,e,t.pattern))}}},va=function(t,e,i,r,a){var o=typeof t.len=="number",s=typeof t.min=="number",l=typeof t.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=e,v=null,y=typeof e=="number",w=typeof e=="string",h=Array.isArray(e);if(y?v="number":w?v="string":h&&(v="array"),!v)return!1;h&&(u=e.length),w&&(u=e.replace(c,"_").length),o?u!==t.len&&r.push(ge(a.messages[v].len,t.fullField,t.len)):s&&!l&&u<t.min?r.push(ge(a.messages[v].min,t.fullField,t.min)):l&&!s&&u>t.max?r.push(ge(a.messages[v].max,t.fullField,t.max)):s&&l&&(u<t.min||u>t.max)&&r.push(ge(a.messages[v].range,t.fullField,t.min,t.max))},ai=function(t,e,i,r,a,o){t.required&&(!i.hasOwnProperty(t.field)||ee(e,o||t.type))&&r.push(ge(a.messages.required,t.fullField))},mr;const ha=function(){if(mr)return mr;var n="[a-fA-F\\d:]",t=function(x){return x&&x.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(n,")|(?<=").concat(n,")(?=\\s|$))"):""},e="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",r=["(?:".concat(i,":){7}(?:").concat(i,"|:)"),"(?:".concat(i,":){6}(?:").concat(e,"|:").concat(i,"|:)"),"(?:".concat(i,":){5}(?::").concat(e,"|(?::").concat(i,"){1,2}|:)"),"(?:".concat(i,":){4}(?:(?::").concat(i,"){0,1}:").concat(e,"|(?::").concat(i,"){1,3}|:)"),"(?:".concat(i,":){3}(?:(?::").concat(i,"){0,2}:").concat(e,"|(?::").concat(i,"){1,4}|:)"),"(?:".concat(i,":){2}(?:(?::").concat(i,"){0,3}:").concat(e,"|(?::").concat(i,"){1,5}|:)"),"(?:".concat(i,":){1}(?:(?::").concat(i,"){0,4}:").concat(e,"|(?::").concat(i,"){1,6}|:)"),"(?::(?:(?::".concat(i,"){0,5}:").concat(e,"|(?::").concat(i,"){1,7}|:))")],a="(?:%[0-9a-zA-Z]{1,})?",o="(?:".concat(r.join("|"),")").concat(a),s=new RegExp("(?:^".concat(e,"$)|(?:^").concat(o,"$)")),l=new RegExp("^".concat(e,"$")),c=new RegExp("^".concat(o,"$")),u=function(x){return x&&x.exact?s:new RegExp("(?:".concat(t(x)).concat(e).concat(t(x),")|(?:").concat(t(x)).concat(o).concat(t(x),")"),"g")};u.v4=function(E){return E&&E.exact?l:new RegExp("".concat(t(E)).concat(e).concat(t(E)),"g")},u.v6=function(E){return E&&E.exact?c:new RegExp("".concat(t(E)).concat(o).concat(t(E)),"g")};var v="(?:(?:[a-z]+:)?//)",y="(?:\\S+(?::\\S*)?@)?",w=u.v4().source,h=u.v6().source,m="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",f="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",F="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",g="(?::\\d{2,5})?",C='(?:[/?#][^\\s"]*)?',b="(?:".concat(v,"|www\\.)").concat(y,"(?:localhost|").concat(w,"|").concat(h,"|").concat(m).concat(f).concat(F,")").concat(g).concat(C);return mr=new RegExp("(?:^".concat(b,"$)"),"i"),mr};var $n={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},jt={integer:function(t){return jt.number(t)&&parseInt(t,10)===t},float:function(t){return jt.number(t)&&!jt.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return oe(t)==="object"&&!jt.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match($n.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(ha())},hex:function(t){return typeof t=="string"&&!!t.match($n.hex)}},ga=function(t,e,i,r,a){if(t.required&&e===void 0){ai(t,e,i,r,a);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=t.type;o.indexOf(s)>-1?jt[s](e)||r.push(ge(a.messages.types[s],t.fullField,t.type)):s&&oe(e)!==t.type&&r.push(ge(a.messages.types[s],t.fullField,t.type))},ma=function(t,e,i,r,a){(/^\s+$/.test(e)||e==="")&&r.push(ge(a.messages.whitespace,t.fullField))};const O={required:ai,whitespace:ma,type:ga,range:va,enum:fa,pattern:da};var ya=function(t,e,i,r,a){var o=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(ee(e)&&!t.required)return i();O.required(t,e,r,o,a)}i(o)},pa=function(t,e,i,r,a){var o=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(e==null&&!t.required)return i();O.required(t,e,r,o,a,"array"),e!=null&&(O.type(t,e,r,o,a),O.range(t,e,r,o,a))}i(o)},ba=function(t,e,i,r,a){var o=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(ee(e)&&!t.required)return i();O.required(t,e,r,o,a),e!==void 0&&O.type(t,e,r,o,a)}i(o)},wa=function(t,e,i,r,a){var o=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(ee(e,"date")&&!t.required)return i();if(O.required(t,e,r,o,a),!ee(e,"date")){var l;e instanceof Date?l=e:l=new Date(e),O.type(t,l,r,o,a),l&&O.range(t,l.getTime(),r,o,a)}}i(o)},Fa="enum",Ca=function(t,e,i,r,a){var o=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(ee(e)&&!t.required)return i();O.required(t,e,r,o,a),e!==void 0&&O[Fa](t,e,r,o,a)}i(o)},Ea=function(t,e,i,r,a){var o=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(ee(e)&&!t.required)return i();O.required(t,e,r,o,a),e!==void 0&&(O.type(t,e,r,o,a),O.range(t,e,r,o,a))}i(o)},Pa=function(t,e,i,r,a){var o=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(ee(e)&&!t.required)return i();O.required(t,e,r,o,a),e!==void 0&&(O.type(t,e,r,o,a),O.range(t,e,r,o,a))}i(o)},Ma=function(t,e,i,r,a){var o=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(ee(e)&&!t.required)return i();O.required(t,e,r,o,a),e!==void 0&&O.type(t,e,r,o,a)}i(o)},Ra=function(t,e,i,r,a){var o=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(e===""&&(e=void 0),ee(e)&&!t.required)return i();O.required(t,e,r,o,a),e!==void 0&&(O.type(t,e,r,o,a),O.range(t,e,r,o,a))}i(o)},Va=function(t,e,i,r,a){var o=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(ee(e)&&!t.required)return i();O.required(t,e,r,o,a),e!==void 0&&O.type(t,e,r,o,a)}i(o)},Sa=function(t,e,i,r,a){var o=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(ee(e,"string")&&!t.required)return i();O.required(t,e,r,o,a),ee(e,"string")||O.pattern(t,e,r,o,a)}i(o)},ka=function(t,e,i,r,a){var o=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(ee(e)&&!t.required)return i();O.required(t,e,r,o,a),ee(e)||O.type(t,e,r,o,a)}i(o)},xa=function(t,e,i,r,a){var o=[],s=Array.isArray(e)?"array":oe(e);O.required(t,e,r,o,a,s),i(o)},$a=function(t,e,i,r,a){var o=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(ee(e,"string")&&!t.required)return i();O.required(t,e,r,o,a,"string"),ee(e,"string")||(O.type(t,e,r,o,a),O.range(t,e,r,o,a),O.pattern(t,e,r,o,a),t.whitespace===!0&&O.whitespace(t,e,r,o,a))}i(o)},Br=function(t,e,i,r,a){var o=t.type,s=[],l=t.required||!t.required&&r.hasOwnProperty(t.field);if(l){if(ee(e,o)&&!t.required)return i();O.required(t,e,r,s,a,o),ee(e,o)||O.type(t,e,r,s,a)}i(s)};const Ht={string:$a,method:Ma,number:Ra,boolean:ba,regexp:ka,integer:Pa,float:Ea,array:pa,object:Va,enum:Ca,pattern:Sa,date:wa,url:Br,hex:Br,email:Br,required:xa,any:ya};var Kt=function(){function n(t){Vt(this,n),p(this,"rules",null),p(this,"_messages",tn),this.define(t)}return St(n,[{key:"define",value:function(e){var i=this;if(!e)throw new Error("Cannot configure a schema with no rules");if(oe(e)!=="object"||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach(function(r){var a=e[r];i.rules[r]=Array.isArray(a)?a:[a]})}},{key:"messages",value:function(e){return e&&(this._messages=xn(en(),e)),this._messages}},{key:"validate",value:function(e){var i=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},o=e,s=r,l=a;if(typeof s=="function"&&(l=s,s={}),!this.rules||Object.keys(this.rules).length===0)return l&&l(null,o),Promise.resolve(o);function c(h){var m=[],f={};function F(C){if(Array.isArray(C)){var b;m=(b=m).concat.apply(b,T(C))}else m.push(C)}for(var g=0;g<h.length;g++)F(h[g]);m.length?(f=nn(m),l(m,f)):l(null,o)}if(s.messages){var u=this.messages();u===tn&&(u=en()),xn(u,s.messages),s.messages=u}else s.messages=this.messages();var v={},y=s.keys||Object.keys(this.rules);y.forEach(function(h){var m=i.rules[h],f=o[h];m.forEach(function(F){var g=F;typeof g.transform=="function"&&(o===e&&(o=V({},o)),f=o[h]=g.transform(f),f!=null&&(g.type=g.type||(Array.isArray(f)?"array":oe(f)))),typeof g=="function"?g={validator:g}:g=V({},g),g.validator=i.getValidationMethod(g),g.validator&&(g.field=h,g.fullField=g.fullField||h,g.type=i.getType(g),v[h]=v[h]||[],v[h].push({rule:g,value:f,source:o,field:h}))})});var w={};return ua(v,s,function(h,m){var f=h.rule,F=(f.type==="object"||f.type==="array")&&(oe(f.fields)==="object"||oe(f.defaultField)==="object");F=F&&(f.required||!f.required&&h.value),f.field=h.field;function g(S,k){return V(V({},k),{},{fullField:"".concat(f.fullField,".").concat(S),fullFields:f.fullFields?[].concat(T(f.fullFields),[S]):[S]})}function C(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],k=Array.isArray(S)?S:[S];!s.suppressWarning&&k.length&&n.warning("async-validator:",k),k.length&&f.message!==void 0&&(k=[].concat(f.message));var P=k.map(kn(f,o));if(s.first&&P.length)return w[f.field]=1,m(P);if(!F)m(P);else{if(f.required&&!h.value)return f.message!==void 0?P=[].concat(f.message).map(kn(f,o)):s.error&&(P=[s.error(f,ge(s.messages.required,f.field))]),m(P);var R={};f.defaultField&&Object.keys(h.value).map(function(A){R[A]=f.defaultField}),R=V(V({},R),h.rule.fields);var $={};Object.keys(R).forEach(function(A){var N=R[A],Q=Array.isArray(N)?N:[N];$[A]=Q.map(g.bind(null,A))});var L=new n($);L.messages(s.messages),h.rule.options&&(h.rule.options.messages=s.messages,h.rule.options.error=s.error),L.validate(h.value,h.rule.options||s,function(A){var N=[];P&&P.length&&N.push.apply(N,T(P)),A&&A.length&&N.push.apply(N,T(A)),m(N.length?N:null)})}}var b;if(f.asyncValidator)b=f.asyncValidator(f,h.value,C,h.source,s);else if(f.validator){try{b=f.validator(f,h.value,C,h.source,s)}catch(S){var E,x;(E=(x=console).error)===null||E===void 0||E.call(x,S),s.suppressValidatorError||setTimeout(function(){throw S},0),C(S.message)}b===!0?C():b===!1?C(typeof f.message=="function"?f.message(f.fullField||f.field):f.message||"".concat(f.fullField||f.field," fails")):b instanceof Array?C(b):b instanceof Error&&C(b.message)}b&&b.then&&b.then(function(){return C()},function(S){return C(S)})},function(h){c(h)},o)}},{key:"getType",value:function(e){if(e.type===void 0&&e.pattern instanceof RegExp&&(e.type="pattern"),typeof e.validator!="function"&&e.type&&!Ht.hasOwnProperty(e.type))throw new Error(ge("Unknown rule type %s",e.type));return e.type||"string"}},{key:"getValidationMethod",value:function(e){if(typeof e.validator=="function")return e.validator;var i=Object.keys(e),r=i.indexOf("message");return r!==-1&&i.splice(r,1),i.length===1&&i[0]==="required"?Ht.required:Ht[this.getType(e)]||void 0}}]),n}();p(Kt,"register",function(t,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");Ht[t]=e});p(Kt,"warning",ia);p(Kt,"messages",tn);p(Kt,"validators",Ht);var ve="'${name}' is not a valid ${type}",oi={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ve,method:ve,array:ve,object:ve,number:ve,date:ve,boolean:ve,integer:ve,float:ve,regexp:ve,email:ve,url:ve,hex:ve},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},_n=Kt;function _a(n,t){return n.replace(/\$\{\w+\}/g,function(e){var i=e.slice(2,-1);return t[i]})}var Nn="CODE_LOGIC_ERROR";function an(n,t,e,i,r){return on.apply(this,arguments)}function on(){return on=Gt(ke().mark(function n(t,e,i,r,a){var o,s,l,c,u,v,y,w,h;return ke().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return o=V({},i),delete o.ruleIndex,_n.warning=function(){},o.validator&&(s=o.validator,o.validator=function(){try{return s.apply(void 0,arguments)}catch(F){return console.error(F),Promise.reject(Nn)}}),l=null,o&&o.type==="array"&&o.defaultField&&(l=o.defaultField,delete o.defaultField),c=new _n(p({},t,[o])),u=zt(oi,r.validateMessages),c.messages(u),v=[],f.prev=10,f.next=13,Promise.resolve(c.validate(p({},t,e),V({},r)));case 13:f.next=18;break;case 15:f.prev=15,f.t0=f.catch(10),f.t0.errors&&(v=f.t0.errors.map(function(F,g){var C=F.message,b=C===Nn?u.default:C;return d.isValidElement(b)?d.cloneElement(b,{key:"error_".concat(g)}):b}));case 18:if(!(!v.length&&l)){f.next=23;break}return f.next=21,Promise.all(e.map(function(F,g){return an("".concat(t,".").concat(g),F,l,r,a)}));case 21:return y=f.sent,f.abrupt("return",y.reduce(function(F,g){return[].concat(T(F),T(g))},[]));case 23:return w=V(V({},i),{},{name:t,enum:(i.enum||[]).join(", ")},a),h=v.map(function(F){return typeof F=="string"?_a(F,w):F}),f.abrupt("return",h);case 26:case"end":return f.stop()}},n,null,[[10,15]])})),on.apply(this,arguments)}function Na(n,t,e,i,r,a){var o=n.join("."),s=e.map(function(u,v){var y=u.validator,w=V(V({},u),{},{ruleIndex:v});return y&&(w.validator=function(h,m,f){var F=!1,g=function(){for(var E=arguments.length,x=new Array(E),S=0;S<E;S++)x[S]=arguments[S];Promise.resolve().then(function(){Qe(!F,"Your validator function has already return a promise. `callback` will be ignored."),F||f.apply(void 0,x)})},C=y(h,m,g);F=C&&typeof C.then=="function"&&typeof C.catch=="function",Qe(F,"`callback` is deprecated. Please return a promise instead."),F&&C.then(function(){f()}).catch(function(b){f(b||" ")})}),w}).sort(function(u,v){var y=u.warningOnly,w=u.ruleIndex,h=v.warningOnly,m=v.ruleIndex;return!!y==!!h?w-m:y?1:-1}),l;if(r===!0)l=new Promise(function(){var u=Gt(ke().mark(function v(y,w){var h,m,f;return ke().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:h=0;case 1:if(!(h<s.length)){g.next=12;break}return m=s[h],g.next=5,an(o,t,m,i,a);case 5:if(f=g.sent,!f.length){g.next=9;break}return w([{errors:f,rule:m}]),g.abrupt("return");case 9:h+=1,g.next=1;break;case 12:y([]);case 13:case"end":return g.stop()}},v)}));return function(v,y){return u.apply(this,arguments)}}());else{var c=s.map(function(u){return an(o,t,u,i,a).then(function(v){return{errors:v,rule:u}})});l=(r?Aa(c):Ta(c)).then(function(u){return Promise.reject(u)})}return l.catch(function(u){return u}),l}function Ta(n){return sn.apply(this,arguments)}function sn(){return sn=Gt(ke().mark(function n(t){return ke().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(t).then(function(r){var a,o=(a=[]).concat.apply(a,T(r));return o}));case 1:case"end":return i.stop()}},n)})),sn.apply(this,arguments)}function Aa(n){return un.apply(this,arguments)}function un(){return un=Gt(ke().mark(function n(t){var e;return ke().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=0,r.abrupt("return",new Promise(function(a){t.forEach(function(o){o.then(function(s){s.errors.length&&a([s]),e+=1,e===t.length&&a([])})})}));case 2:case"end":return r.stop()}},n)})),un.apply(this,arguments)}function Y(n){return Xr(n)}function Tn(n,t){var e={};return t.forEach(function(i){var r=lt(n,i);e=Ke(e,i,r)}),e}function Pt(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return n&&n.some(function(i){return si(t,i,e)})}function si(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!n||!t||!e&&n.length!==t.length?!1:t.every(function(i,r){return n[r]===i})}function Oa(n,t){if(n===t)return!0;if(!n&&t||n&&!t||!n||!t||oe(n)!=="object"||oe(t)!=="object")return!1;var e=Object.keys(n),i=Object.keys(t),r=new Set([].concat(e,i));return T(r).every(function(a){var o=n[a],s=t[a];return typeof o=="function"&&typeof s=="function"?!0:o===s})}function La(n){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&oe(t.target)==="object"&&n in t.target?t.target[n]:t}function An(n,t,e){var i=n.length;if(t<0||t>=i||e<0||e>=i)return n;var r=n[t],a=t-e;return a>0?[].concat(T(n.slice(0,e)),[r],T(n.slice(e,t)),T(n.slice(t+1,i))):a<0?[].concat(T(n.slice(0,t)),T(n.slice(t+1,e+1)),[r],T(n.slice(e+1,i))):n}var Da=["name"],Fe=[];function On(n,t,e,i,r,a){return typeof n=="function"?n(t,e,"source"in a?{source:a.source}:{}):i!==r}var mn=function(n){fn(e,n);var t=dn(e);function e(i){var r;if(Vt(this,e),r=t.call(this,i),p(I(r),"state",{resetCount:0}),p(I(r),"cancelRegisterFunc",null),p(I(r),"mounted",!1),p(I(r),"touched",!1),p(I(r),"dirty",!1),p(I(r),"validatePromise",void 0),p(I(r),"prevValidating",void 0),p(I(r),"errors",Fe),p(I(r),"warnings",Fe),p(I(r),"cancelRegister",function(){var l=r.props,c=l.preserve,u=l.isListField,v=l.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(u,c,Y(v)),r.cancelRegisterFunc=null}),p(I(r),"getNamePath",function(){var l=r.props,c=l.name,u=l.fieldContext,v=u.prefixName,y=v===void 0?[]:v;return c!==void 0?[].concat(T(y),T(c)):[]}),p(I(r),"getRules",function(){var l=r.props,c=l.rules,u=c===void 0?[]:c,v=l.fieldContext;return u.map(function(y){return typeof y=="function"?y(v):y})}),p(I(r),"refresh",function(){r.mounted&&r.setState(function(l){var c=l.resetCount;return{resetCount:c+1}})}),p(I(r),"metaCache",null),p(I(r),"triggerMetaEvent",function(l){var c=r.props.onMetaChange;if(c){var u=V(V({},r.getMeta()),{},{destroy:l});wn(r.metaCache,u)||c(u),r.metaCache=u}else r.metaCache=null}),p(I(r),"onStoreChange",function(l,c,u){var v=r.props,y=v.shouldUpdate,w=v.dependencies,h=w===void 0?[]:w,m=v.onReset,f=u.store,F=r.getNamePath(),g=r.getValue(l),C=r.getValue(f),b=c&&Pt(c,F);switch(u.type==="valueUpdate"&&u.source==="external"&&!wn(g,C)&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=Fe,r.warnings=Fe,r.triggerMetaEvent()),u.type){case"reset":if(!c||b){r.touched=!1,r.dirty=!1,r.validatePromise=void 0,r.errors=Fe,r.warnings=Fe,r.triggerMetaEvent(),m==null||m(),r.refresh();return}break;case"remove":{if(y){r.reRender();return}break}case"setField":{var E=u.data;if(b){"touched"in E&&(r.touched=E.touched),"validating"in E&&!("originRCField"in E)&&(r.validatePromise=E.validating?Promise.resolve([]):null),"errors"in E&&(r.errors=E.errors||Fe),"warnings"in E&&(r.warnings=E.warnings||Fe),r.dirty=!0,r.triggerMetaEvent(),r.reRender();return}else if("value"in E&&Pt(c,F,!0)){r.reRender();return}if(y&&!F.length&&On(y,l,f,g,C,u)){r.reRender();return}break}case"dependenciesUpdate":{var x=h.map(Y);if(x.some(function(S){return Pt(u.relatedFields,S)})){r.reRender();return}break}default:if(b||(!h.length||F.length||y)&&On(y,l,f,g,C,u)){r.reRender();return}break}y===!0&&r.reRender()}),p(I(r),"validateRules",function(l){var c=r.getNamePath(),u=r.getValue(),v=l||{},y=v.triggerName,w=v.validateOnly,h=w===void 0?!1:w,m=Promise.resolve().then(Gt(ke().mark(function f(){var F,g,C,b,E,x,S;return ke().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(r.mounted){P.next=2;break}return P.abrupt("return",[]);case 2:if(F=r.props,g=F.validateFirst,C=g===void 0?!1:g,b=F.messageVariables,E=F.validateDebounce,x=r.getRules(),y&&(x=x.filter(function(R){return R}).filter(function(R){var $=R.validateTrigger;if(!$)return!0;var L=Xr($);return L.includes(y)})),!(E&&y)){P.next=10;break}return P.next=8,new Promise(function(R){setTimeout(R,E)});case 8:if(r.validatePromise===m){P.next=10;break}return P.abrupt("return",[]);case 10:return S=Na(c,u,x,l,C,b),S.catch(function(R){return R}).then(function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fe;if(r.validatePromise===m){var $;r.validatePromise=null;var L=[],A=[];($=R.forEach)===null||$===void 0||$.call(R,function(N){var Q=N.rule.warningOnly,D=N.errors,z=D===void 0?Fe:D;Q?A.push.apply(A,T(z)):L.push.apply(L,T(z))}),r.errors=L,r.warnings=A,r.triggerMetaEvent(),r.reRender()}}),P.abrupt("return",S);case 13:case"end":return P.stop()}},f)})));return h||(r.validatePromise=m,r.dirty=!0,r.errors=Fe,r.warnings=Fe,r.triggerMetaEvent(),r.reRender()),m}),p(I(r),"isFieldValidating",function(){return!!r.validatePromise}),p(I(r),"isFieldTouched",function(){return r.touched}),p(I(r),"isFieldDirty",function(){if(r.dirty||r.props.initialValue!==void 0)return!0;var l=r.props.fieldContext,c=l.getInternalHooks(ct),u=c.getInitialValue;return u(r.getNamePath())!==void 0}),p(I(r),"getErrors",function(){return r.errors}),p(I(r),"getWarnings",function(){return r.warnings}),p(I(r),"isListField",function(){return r.props.isListField}),p(I(r),"isList",function(){return r.props.isList}),p(I(r),"isPreserve",function(){return r.props.preserve}),p(I(r),"getMeta",function(){r.prevValidating=r.isFieldValidating();var l={touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,warnings:r.warnings,name:r.getNamePath(),validated:r.validatePromise===null};return l}),p(I(r),"getOnlyChild",function(l){if(typeof l=="function"){var c=r.getMeta();return V(V({},r.getOnlyChild(l(r.getControlled(),c,r.props.fieldContext))),{},{isFunction:!0})}var u=Jn(l);return u.length!==1||!d.isValidElement(u[0])?{child:u,isFunction:!1}:{child:u[0],isFunction:!1}}),p(I(r),"getValue",function(l){var c=r.props.fieldContext.getFieldsValue,u=r.getNamePath();return lt(l||c(!0),u)}),p(I(r),"getControlled",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=r.props,u=c.name,v=c.trigger,y=c.validateTrigger,w=c.getValueFromEvent,h=c.normalize,m=c.valuePropName,f=c.getValueProps,F=c.fieldContext,g=y!==void 0?y:F.validateTrigger,C=r.getNamePath(),b=F.getInternalHooks,E=F.getFieldsValue,x=b(ct),S=x.dispatch,k=r.getValue(),P=f||function(N){return p({},m,N)},R=l[v],$=u!==void 0?P(k):{},L=V(V({},l),$);L[v]=function(){r.touched=!0,r.dirty=!0,r.triggerMetaEvent();for(var N,Q=arguments.length,D=new Array(Q),z=0;z<Q;z++)D[z]=arguments[z];w?N=w.apply(void 0,D):N=La.apply(void 0,[m].concat(D)),h&&(N=h(N,k,E(!0))),S({type:"updateValue",namePath:C,value:N}),R&&R.apply(void 0,D)};var A=Xr(g||[]);return A.forEach(function(N){var Q=L[N];L[N]=function(){Q&&Q.apply(void 0,arguments);var D=r.props.rules;D&&D.length&&S({type:"validateField",namePath:C,triggerName:N})}}),L}),i.fieldContext){var a=i.fieldContext.getInternalHooks,o=a(ct),s=o.initEntityValue;s(I(r))}return r}return St(e,[{key:"componentDidMount",value:function(){var r=this.props,a=r.shouldUpdate,o=r.fieldContext;if(this.mounted=!0,o){var s=o.getInternalHooks,l=s(ct),c=l.registerField;this.cancelRegisterFunc=c(this)}a===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var r=this.state.resetCount,a=this.props.children,o=this.getOnlyChild(a),s=o.child,l=o.isFunction,c;return l?c=s:d.isValidElement(s)?c=d.cloneElement(s,this.getControlled(s.props)):(Qe(!s,"`children` of Field is not validate ReactElement."),c=s),d.createElement(d.Fragment,{key:r},c)}}]),e}(d.Component);p(mn,"contextType",Rt);p(mn,"defaultProps",{trigger:"onChange",valuePropName:"value"});function ui(n){var t=n.name,e=Fr(n,Da),i=d.useContext(Rt),r=d.useContext(wr),a=t!==void 0?Y(t):void 0,o="keep";return e.isListField||(o="_".concat((a||[]).join("_"))),d.createElement(mn,Bt({key:o,name:a,isListField:!!r},e,{fieldContext:i}))}function qa(n){var t=n.name,e=n.initialValue,i=n.children,r=n.rules,a=n.validateTrigger,o=n.isListField,s=d.useContext(Rt),l=d.useContext(wr),c=d.useRef({keys:[],id:0}),u=c.current,v=d.useMemo(function(){var m=Y(s.prefixName)||[];return[].concat(T(m),T(Y(t)))},[s.prefixName,t]),y=d.useMemo(function(){return V(V({},s),{},{prefixName:v})},[s,v]),w=d.useMemo(function(){return{getKey:function(f){var F=v.length,g=f[F];return[u.keys[g],f.slice(F+1)]}}},[v]);if(typeof i!="function")return Qe(!1,"Form.List only accepts function as children."),null;var h=function(f,F,g){var C=g.source;return C==="internal"?!1:f!==F};return d.createElement(wr.Provider,{value:w},d.createElement(Rt.Provider,{value:y},d.createElement(ui,{name:[],shouldUpdate:h,rules:r,validateTrigger:a,initialValue:e,isList:!0,isListField:o??!!l},function(m,f){var F=m.value,g=F===void 0?[]:F,C=m.onChange,b=s.getFieldValue,E=function(){var P=b(v||[]);return P||[]},x={add:function(P,R){var $=E();R>=0&&R<=$.length?(u.keys=[].concat(T(u.keys.slice(0,R)),[u.id],T(u.keys.slice(R))),C([].concat(T($.slice(0,R)),[P],T($.slice(R))))):(u.keys=[].concat(T(u.keys),[u.id]),C([].concat(T($),[P]))),u.id+=1},remove:function(P){var R=E(),$=new Set(Array.isArray(P)?P:[P]);$.size<=0||(u.keys=u.keys.filter(function(L,A){return!$.has(A)}),C(R.filter(function(L,A){return!$.has(A)})))},move:function(P,R){if(P!==R){var $=E();P<0||P>=$.length||R<0||R>=$.length||(u.keys=An(u.keys,P,R),C(An($,P,R)))}}},S=g||[];return Array.isArray(S)||(S=[]),i(S.map(function(k,P){var R=u.keys[P];return R===void 0&&(u.keys[P]=u.id,R=u.keys[P],u.id+=1),{name:P,key:R,isListField:!0}}),x,f)})))}function Ia(n){var t=!1,e=n.length,i=[];return n.length?new Promise(function(r,a){n.forEach(function(o,s){o.catch(function(l){return t=!0,l}).then(function(l){e-=1,i[s]=l,!(e>0)&&(t&&a(i),r(i))})})}):Promise.resolve([])}var li="__@field_split__";function Gr(n){return n.map(function(t){return"".concat(oe(t),":").concat(t)}).join(li)}var Ft=function(){function n(){Vt(this,n),p(this,"kvs",new Map)}return St(n,[{key:"set",value:function(e,i){this.kvs.set(Gr(e),i)}},{key:"get",value:function(e){return this.kvs.get(Gr(e))}},{key:"update",value:function(e,i){var r=this.get(e),a=i(r);a?this.set(e,a):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(Gr(e))}},{key:"map",value:function(e){return T(this.kvs.entries()).map(function(i){var r=W(i,2),a=r[0],o=r[1],s=a.split(li);return e({key:s.map(function(l){var c=l.match(/^([^:]*):(.*)$/),u=W(c,3),v=u[1],y=u[2];return v==="number"?Number(y):y}),value:o})})}},{key:"toJSON",value:function(){var e={};return this.map(function(i){var r=i.key,a=i.value;return e[r.join(".")]=a,null}),e}}]),n}(),Wa=["name"],za=St(function n(t){var e=this;Vt(this,n),p(this,"formHooked",!1),p(this,"forceRootUpdate",void 0),p(this,"subscribable",!0),p(this,"store",{}),p(this,"fieldEntities",[]),p(this,"initialValues",{}),p(this,"callbacks",{}),p(this,"validateMessages",null),p(this,"preserve",null),p(this,"lastValidatePromise",null),p(this,"getForm",function(){return{getFieldValue:e.getFieldValue,getFieldsValue:e.getFieldsValue,getFieldError:e.getFieldError,getFieldWarning:e.getFieldWarning,getFieldsError:e.getFieldsError,isFieldsTouched:e.isFieldsTouched,isFieldTouched:e.isFieldTouched,isFieldValidating:e.isFieldValidating,isFieldsValidating:e.isFieldsValidating,resetFields:e.resetFields,setFields:e.setFields,setFieldValue:e.setFieldValue,setFieldsValue:e.setFieldsValue,validateFields:e.validateFields,submit:e.submit,_init:!0,getInternalHooks:e.getInternalHooks}}),p(this,"getInternalHooks",function(i){return i===ct?(e.formHooked=!0,{dispatch:e.dispatch,initEntityValue:e.initEntityValue,registerField:e.registerField,useSubscribe:e.useSubscribe,setInitialValues:e.setInitialValues,destroyForm:e.destroyForm,setCallbacks:e.setCallbacks,setValidateMessages:e.setValidateMessages,getFields:e.getFields,setPreserve:e.setPreserve,getInitialValue:e.getInitialValue,registerWatch:e.registerWatch}):(Qe(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),p(this,"useSubscribe",function(i){e.subscribable=i}),p(this,"prevWithoutPreserves",null),p(this,"setInitialValues",function(i,r){if(e.initialValues=i||{},r){var a,o=zt(i,e.store);(a=e.prevWithoutPreserves)===null||a===void 0||a.map(function(s){var l=s.key;o=Ke(o,l,lt(i,l))}),e.prevWithoutPreserves=null,e.updateStore(o)}}),p(this,"destroyForm",function(i){if(i)e.updateStore({});else{var r=new Ft;e.getFieldEntities(!0).forEach(function(a){e.isMergedPreserve(a.isPreserve())||r.set(a.getNamePath(),!0)}),e.prevWithoutPreserves=r}}),p(this,"getInitialValue",function(i){var r=lt(e.initialValues,i);return i.length?zt(r):r}),p(this,"setCallbacks",function(i){e.callbacks=i}),p(this,"setValidateMessages",function(i){e.validateMessages=i}),p(this,"setPreserve",function(i){e.preserve=i}),p(this,"watchList",[]),p(this,"registerWatch",function(i){return e.watchList.push(i),function(){e.watchList=e.watchList.filter(function(r){return r!==i})}}),p(this,"notifyWatch",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(e.watchList.length){var r=e.getFieldsValue(),a=e.getFieldsValue(!0);e.watchList.forEach(function(o){o(r,a,i)})}}),p(this,"timeoutId",null),p(this,"warningUnhooked",function(){}),p(this,"updateStore",function(i){e.store=i}),p(this,"getFieldEntities",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return i?e.fieldEntities.filter(function(r){return r.getNamePath().length}):e.fieldEntities}),p(this,"getFieldsMap",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=new Ft;return e.getFieldEntities(i).forEach(function(a){var o=a.getNamePath();r.set(o,a)}),r}),p(this,"getFieldEntitiesForNamePathList",function(i){if(!i)return e.getFieldEntities(!0);var r=e.getFieldsMap(!0);return i.map(function(a){var o=Y(a);return r.get(o)||{INVALIDATE_NAME_PATH:Y(a)}})}),p(this,"getFieldsValue",function(i,r){e.warningUnhooked();var a,o,s;if(i===!0||Array.isArray(i)?(a=i,o=r):i&&oe(i)==="object"&&(s=i.strict,o=i.filter),a===!0&&!o)return e.store;var l=e.getFieldEntitiesForNamePathList(Array.isArray(a)?a:null),c=[];return l.forEach(function(u){var v,y,w="INVALIDATE_NAME_PATH"in u?u.INVALIDATE_NAME_PATH:u.getNamePath();if(s){var h,m;if((h=(m=u).isList)!==null&&h!==void 0&&h.call(m))return}else if(!a&&(v=(y=u).isListField)!==null&&v!==void 0&&v.call(y))return;if(!o)c.push(w);else{var f="getMeta"in u?u.getMeta():null;o(f)&&c.push(w)}}),Tn(e.store,c.map(Y))}),p(this,"getFieldValue",function(i){e.warningUnhooked();var r=Y(i);return lt(e.store,r)}),p(this,"getFieldsError",function(i){e.warningUnhooked();var r=e.getFieldEntitiesForNamePathList(i);return r.map(function(a,o){return a&&!("INVALIDATE_NAME_PATH"in a)?{name:a.getNamePath(),errors:a.getErrors(),warnings:a.getWarnings()}:{name:Y(i[o]),errors:[],warnings:[]}})}),p(this,"getFieldError",function(i){e.warningUnhooked();var r=Y(i),a=e.getFieldsError([r])[0];return a.errors}),p(this,"getFieldWarning",function(i){e.warningUnhooked();var r=Y(i),a=e.getFieldsError([r])[0];return a.warnings}),p(this,"isFieldsTouched",function(){e.warningUnhooked();for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var o=r[0],s=r[1],l,c=!1;r.length===0?l=null:r.length===1?Array.isArray(o)?(l=o.map(Y),c=!1):(l=null,c=o):(l=o.map(Y),c=s);var u=e.getFieldEntities(!0),v=function(f){return f.isFieldTouched()};if(!l)return c?u.every(function(m){return v(m)||m.isList()}):u.some(v);var y=new Ft;l.forEach(function(m){y.set(m,[])}),u.forEach(function(m){var f=m.getNamePath();l.forEach(function(F){F.every(function(g,C){return f[C]===g})&&y.update(F,function(g){return[].concat(T(g),[m])})})});var w=function(f){return f.some(v)},h=y.map(function(m){var f=m.value;return f});return c?h.every(w):h.some(w)}),p(this,"isFieldTouched",function(i){return e.warningUnhooked(),e.isFieldsTouched([i])}),p(this,"isFieldsValidating",function(i){e.warningUnhooked();var r=e.getFieldEntities();if(!i)return r.some(function(o){return o.isFieldValidating()});var a=i.map(Y);return r.some(function(o){var s=o.getNamePath();return Pt(a,s)&&o.isFieldValidating()})}),p(this,"isFieldValidating",function(i){return e.warningUnhooked(),e.isFieldsValidating([i])}),p(this,"resetWithFieldInitialValue",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=new Ft,a=e.getFieldEntities(!0);a.forEach(function(l){var c=l.props.initialValue,u=l.getNamePath();if(c!==void 0){var v=r.get(u)||new Set;v.add({entity:l,value:c}),r.set(u,v)}});var o=function(c){c.forEach(function(u){var v=u.props.initialValue;if(v!==void 0){var y=u.getNamePath(),w=e.getInitialValue(y);if(w!==void 0)Qe(!1,"Form already set 'initialValues' with path '".concat(y.join("."),"'. Field can not overwrite it."));else{var h=r.get(y);if(h&&h.size>1)Qe(!1,"Multiple Field with path '".concat(y.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(h){var m=e.getFieldValue(y),f=u.isListField();!f&&(!i.skipExist||m===void 0)&&e.updateStore(Ke(e.store,y,T(h)[0].value))}}}})},s;i.entities?s=i.entities:i.namePathList?(s=[],i.namePathList.forEach(function(l){var c=r.get(l);if(c){var u;(u=s).push.apply(u,T(T(c).map(function(v){return v.entity})))}})):s=a,o(s)}),p(this,"resetFields",function(i){e.warningUnhooked();var r=e.store;if(!i){e.updateStore(zt(e.initialValues)),e.resetWithFieldInitialValue(),e.notifyObservers(r,null,{type:"reset"}),e.notifyWatch();return}var a=i.map(Y);a.forEach(function(o){var s=e.getInitialValue(o);e.updateStore(Ke(e.store,o,s))}),e.resetWithFieldInitialValue({namePathList:a}),e.notifyObservers(r,a,{type:"reset"}),e.notifyWatch(a)}),p(this,"setFields",function(i){e.warningUnhooked();var r=e.store,a=[];i.forEach(function(o){var s=o.name,l=Fr(o,Wa),c=Y(s);a.push(c),"value"in l&&e.updateStore(Ke(e.store,c,l.value)),e.notifyObservers(r,[c],{type:"setField",data:o})}),e.notifyWatch(a)}),p(this,"getFields",function(){var i=e.getFieldEntities(!0),r=i.map(function(a){var o=a.getNamePath(),s=a.getMeta(),l=V(V({},s),{},{name:o,value:e.getFieldValue(o)});return Object.defineProperty(l,"originRCField",{value:!0}),l});return r}),p(this,"initEntityValue",function(i){var r=i.props.initialValue;if(r!==void 0){var a=i.getNamePath(),o=lt(e.store,a);o===void 0&&e.updateStore(Ke(e.store,a,r))}}),p(this,"isMergedPreserve",function(i){var r=i!==void 0?i:e.preserve;return r??!0}),p(this,"registerField",function(i){e.fieldEntities.push(i);var r=i.getNamePath();if(e.notifyWatch([r]),i.props.initialValue!==void 0){var a=e.store;e.resetWithFieldInitialValue({entities:[i],skipExist:!0}),e.notifyObservers(a,[i.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(o,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(e.fieldEntities=e.fieldEntities.filter(function(v){return v!==i}),!e.isMergedPreserve(s)&&(!o||l.length>1)){var c=o?void 0:e.getInitialValue(r);if(r.length&&e.getFieldValue(r)!==c&&e.fieldEntities.every(function(v){return!si(v.getNamePath(),r)})){var u=e.store;e.updateStore(Ke(u,r,c,!0)),e.notifyObservers(u,[r],{type:"remove"}),e.triggerDependenciesUpdate(u,r)}}e.notifyWatch([r])}}),p(this,"dispatch",function(i){switch(i.type){case"updateValue":{var r=i.namePath,a=i.value;e.updateValue(r,a);break}case"validateField":{var o=i.namePath,s=i.triggerName;e.validateFields([o],{triggerName:s});break}}}),p(this,"notifyObservers",function(i,r,a){if(e.subscribable){var o=V(V({},a),{},{store:e.getFieldsValue(!0)});e.getFieldEntities().forEach(function(s){var l=s.onStoreChange;l(i,r,o)})}else e.forceRootUpdate()}),p(this,"triggerDependenciesUpdate",function(i,r){var a=e.getDependencyChildrenFields(r);return a.length&&e.validateFields(a),e.notifyObservers(i,a,{type:"dependenciesUpdate",relatedFields:[r].concat(T(a))}),a}),p(this,"updateValue",function(i,r){var a=Y(i),o=e.store;e.updateStore(Ke(e.store,a,r)),e.notifyObservers(o,[a],{type:"valueUpdate",source:"internal"}),e.notifyWatch([a]);var s=e.triggerDependenciesUpdate(o,a),l=e.callbacks.onValuesChange;if(l){var c=Tn(e.store,[a]);l(c,e.getFieldsValue())}e.triggerOnFieldsChange([a].concat(T(s)))}),p(this,"setFieldsValue",function(i){e.warningUnhooked();var r=e.store;if(i){var a=zt(e.store,i);e.updateStore(a)}e.notifyObservers(r,null,{type:"valueUpdate",source:"external"}),e.notifyWatch()}),p(this,"setFieldValue",function(i,r){e.setFields([{name:i,value:r}])}),p(this,"getDependencyChildrenFields",function(i){var r=new Set,a=[],o=new Ft;e.getFieldEntities().forEach(function(l){var c=l.props.dependencies;(c||[]).forEach(function(u){var v=Y(u);o.update(v,function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return y.add(l),y})})});var s=function l(c){var u=o.get(c)||new Set;u.forEach(function(v){if(!r.has(v)){r.add(v);var y=v.getNamePath();v.isFieldDirty()&&y.length&&(a.push(y),l(y))}})};return s(i),a}),p(this,"triggerOnFieldsChange",function(i,r){var a=e.callbacks.onFieldsChange;if(a){var o=e.getFields();if(r){var s=new Ft;r.forEach(function(c){var u=c.name,v=c.errors;s.set(u,v)}),o.forEach(function(c){c.errors=s.get(c.name)||c.errors})}var l=o.filter(function(c){var u=c.name;return Pt(i,u)});l.length&&a(l,o)}}),p(this,"validateFields",function(i,r){e.warningUnhooked();var a,o;Array.isArray(i)||typeof i=="string"||typeof r=="string"?(a=i,o=r):o=i;var s=!!a,l=s?a.map(Y):[],c=[],u=String(Date.now()),v=new Set,y=o||{},w=y.recursive,h=y.dirty;e.getFieldEntities(!0).forEach(function(g){if(s||l.push(g.getNamePath()),!(!g.props.rules||!g.props.rules.length)&&!(h&&!g.isFieldDirty())){var C=g.getNamePath();if(v.add(C.join(u)),!s||Pt(l,C,w)){var b=g.validateRules(V({validateMessages:V(V({},oi),e.validateMessages)},o));c.push(b.then(function(){return{name:C,errors:[],warnings:[]}}).catch(function(E){var x,S=[],k=[];return(x=E.forEach)===null||x===void 0||x.call(E,function(P){var R=P.rule.warningOnly,$=P.errors;R?k.push.apply(k,T($)):S.push.apply(S,T($))}),S.length?Promise.reject({name:C,errors:S,warnings:k}):{name:C,errors:S,warnings:k}}))}}});var m=Ia(c);e.lastValidatePromise=m,m.catch(function(g){return g}).then(function(g){var C=g.map(function(b){var E=b.name;return E});e.notifyObservers(e.store,C,{type:"validateFinish"}),e.triggerOnFieldsChange(C,g)});var f=m.then(function(){return e.lastValidatePromise===m?Promise.resolve(e.getFieldsValue(l)):Promise.reject([])}).catch(function(g){var C=g.filter(function(b){return b&&b.errors.length});return Promise.reject({values:e.getFieldsValue(l),errorFields:C,outOfDate:e.lastValidatePromise!==m})});f.catch(function(g){return g});var F=l.filter(function(g){return v.has(g.join(u))});return e.triggerOnFieldsChange(F),f}),p(this,"submit",function(){e.warningUnhooked(),e.validateFields().then(function(i){var r=e.callbacks.onFinish;if(r)try{r(i)}catch(a){console.error(a)}}).catch(function(i){var r=e.callbacks.onFinishFailed;r&&r(i)})}),this.forceRootUpdate=t});function ci(n){var t=d.useRef(),e=d.useState({}),i=W(e,2),r=i[1];if(!t.current)if(n)t.current=n;else{var a=function(){r({})},o=new za(a);t.current=o.getForm()}return[t.current]}var ln=d.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),ja=function(t){var e=t.validateMessages,i=t.onFormChange,r=t.onFormFinish,a=t.children,o=d.useContext(ln),s=d.useRef({});return d.createElement(ln.Provider,{value:V(V({},o),{},{validateMessages:V(V({},o.validateMessages),e),triggerFormChange:function(c,u){i&&i(c,{changedFields:u,forms:s.current}),o.triggerFormChange(c,u)},triggerFormFinish:function(c,u){r&&r(c,{values:u,forms:s.current}),o.triggerFormFinish(c,u)},registerForm:function(c,u){c&&(s.current=V(V({},s.current),{},p({},c,u))),o.registerForm(c,u)},unregisterForm:function(c){var u=V({},s.current);delete u[c],s.current=u,o.unregisterForm(c)}})},a)},Ha=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],Ua=function(t,e){var i=t.name,r=t.initialValues,a=t.fields,o=t.form,s=t.preserve,l=t.children,c=t.component,u=c===void 0?"form":c,v=t.validateMessages,y=t.validateTrigger,w=y===void 0?"onChange":y,h=t.onValuesChange,m=t.onFieldsChange,f=t.onFinish,F=t.onFinishFailed,g=t.clearOnDestroy,C=Fr(t,Ha),b=d.useRef(null),E=d.useContext(ln),x=ci(o),S=W(x,1),k=S[0],P=k.getInternalHooks(ct),R=P.useSubscribe,$=P.setInitialValues,L=P.setCallbacks,A=P.setValidateMessages,N=P.setPreserve,Q=P.destroyForm;d.useImperativeHandle(e,function(){return V(V({},k),{},{nativeElement:b.current})}),d.useEffect(function(){return E.registerForm(i,k),function(){E.unregisterForm(i)}},[E,k,i]),A(V(V({},E.validateMessages),v)),L({onValuesChange:h,onFieldsChange:function(te){if(E.triggerFormChange(i,te),m){for(var ne=arguments.length,$e=new Array(ne>1?ne-1:0),ie=1;ie<ne;ie++)$e[ie-1]=arguments[ie];m.apply(void 0,[te].concat($e))}},onFinish:function(te){E.triggerFormFinish(i,te),f&&f(te)},onFinishFailed:F}),N(s);var D=d.useRef(null);$(r,!D.current),D.current||(D.current=!0),d.useEffect(function(){return function(){return Q(g)}},[]);var z,q=typeof l=="function";if(q){var se=k.getFieldsValue(!0);z=l(se,k)}else z=l;R(!q);var U=d.useRef();d.useEffect(function(){Oa(U.current||[],a||[])||k.setFields(a||[]),U.current=a},[a,k]);var me=d.useMemo(function(){return V(V({},k),{},{validateTrigger:w})},[k,w]),ue=d.createElement(wr.Provider,{value:null},d.createElement(Rt.Provider,{value:me},z));return u===!1?ue:d.createElement(u,Bt({},C,{ref:b,onSubmit:function(te){te.preventDefault(),te.stopPropagation(),k.submit()},onReset:function(te){var ne;te.preventDefault(),k.resetFields(),(ne=C.onReset)===null||ne===void 0||ne.call(C,te)}}),ue)};function Ln(n){try{return JSON.stringify(n)}catch{return Math.random()}}function Ba(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];var i=t[0],r=t[1],a=r===void 0?{}:r,o=ea(a)?{form:a}:a,s=o.form,l=d.useState(),c=W(l,2),u=c[0],v=c[1],y=d.useMemo(function(){return Ln(u)},[u]),w=d.useRef(y);w.current=y;var h=d.useContext(Rt),m=s||h,f=m&&m._init,F=Y(i),g=d.useRef(F);return g.current=F,d.useEffect(function(){if(f){var C=m.getFieldsValue,b=m.getInternalHooks,E=b(ct),x=E.registerWatch,S=function($,L){var A=o.preserve?L:$;return typeof i=="function"?i(A):lt(A,g.current)},k=x(function(R,$){var L=S(R,$),A=Ln(L);w.current!==A&&(w.current=A,v(L))}),P=S(C(),C(!0));return u!==P&&v(P),k}},[f]),u}var Ga=d.forwardRef(Ua),Jt=Ga;Jt.FormProvider=ja;Jt.Field=ui;Jt.List=qa;Jt.useForm=ci;Jt.useWatch=Ba;const Dn=d.createContext({}),yo=n=>{let{children:t,status:e,override:i}=n;const r=d.useContext(Dn),a=d.useMemo(()=>{const o=Object.assign({},r);return i&&delete o.isFormItemInput,e&&(delete o.status,delete o.hasFeedback,delete o.feedbackIcon),o},[e,i,r]);return d.createElement(Dn.Provider,{value:a},t)},po=d.createContext(void 0),Ka=n=>({animationDuration:n,animationFillMode:"both"}),Ja=n=>({animationDuration:n,animationFillMode:"both"}),bo=function(n,t,e,i){const a=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${a}${n}-enter,
      ${a}${n}-appear
    `]:Object.assign(Object.assign({},Ka(i)),{animationPlayState:"paused"}),[`${a}${n}-leave`]:Object.assign(Object.assign({},Ja(i)),{animationPlayState:"paused"}),[`
      ${a}${n}-enter${n}-enter-active,
      ${a}${n}-appear${n}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${a}${n}-leave${n}-leave-active`]:{animationName:e,animationPlayState:"running",pointerEvents:"none"}}},Qa=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var n=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(n==null?void 0:n.substr(0,4))};function Za(n){var t=n.prefixCls,e=n.align,i=n.arrow,r=n.arrowPos,a=i||{},o=a.className,s=a.content,l=r.x,c=l===void 0?0:l,u=r.y,v=u===void 0?0:u,y=d.useRef();if(!e||!e.points)return null;var w={position:"absolute"};if(e.autoArrow!==!1){var h=e.points[0],m=e.points[1],f=h[0],F=h[1],g=m[0],C=m[1];f===g||!["t","b"].includes(f)?w.top=v:f==="t"?w.top=0:w.bottom=0,F===C||!["l","r"].includes(F)?w.left=c:F==="l"?w.left=0:w.right=0}return d.createElement("div",{ref:y,className:Et("".concat(t,"-arrow"),o),style:w},s)}function Ya(n){var t=n.prefixCls,e=n.open,i=n.zIndex,r=n.mask,a=n.motion;return r?d.createElement(Kn,Bt({},a,{motionAppear:!0,visible:e,removeOnLeave:!0}),function(o){var s=o.className;return d.createElement("div",{style:{zIndex:i},className:Et("".concat(t,"-mask"),s)})}):null}var Xa=d.memo(function(n){var t=n.children;return t},function(n,t){return t.cache}),eo=d.forwardRef(function(n,t){var e=n.popup,i=n.className,r=n.prefixCls,a=n.style,o=n.target,s=n.onVisibleChanged,l=n.open,c=n.keepDom,u=n.fresh,v=n.onClick,y=n.mask,w=n.arrow,h=n.arrowPos,m=n.align,f=n.motion,F=n.maskMotion,g=n.forceRender,C=n.getPopupContainer,b=n.autoDestroy,E=n.portal,x=n.zIndex,S=n.onMouseEnter,k=n.onMouseLeave,P=n.onPointerEnter,R=n.ready,$=n.offsetX,L=n.offsetY,A=n.offsetR,N=n.offsetB,Q=n.onAlign,D=n.onPrepare,z=n.stretch,q=n.targetWidth,se=n.targetHeight,U=typeof e=="function"?e():e,me=l||c,ue=(C==null?void 0:C.length)>0,xe=d.useState(!C||!ue),te=W(xe,2),ne=te[0],$e=te[1];if(he(function(){!ne&&ue&&o&&$e(!0)},[ne,ue,o]),!ne)return null;var ie="auto",re={left:"-1000vw",top:"-1000vh",right:ie,bottom:ie};if(R||!l){var ye,Re=m.points,Ve=m.dynamicInset||((ye=m._experimental)===null||ye===void 0?void 0:ye.dynamicInset),ft=Ve&&Re[0][1]==="r",kt=Ve&&Re[0][0]==="b";ft?(re.right=A,re.left=ie):(re.left=$,re.right=ie),kt?(re.bottom=N,re.top=ie):(re.top=L,re.bottom=ie)}var ae={};return z&&(z.includes("height")&&se?ae.height=se:z.includes("minHeight")&&se&&(ae.minHeight=se),z.includes("width")&&q?ae.width=q:z.includes("minWidth")&&q&&(ae.minWidth=q)),l||(ae.pointerEvents="none"),d.createElement(E,{open:g||me,getContainer:C&&function(){return C(o)},autoDestroy:b},d.createElement(Ya,{prefixCls:r,open:l,zIndex:x,mask:y,motion:F}),d.createElement(gn,{onResize:Q,disabled:!l},function(dt){return d.createElement(Kn,Bt({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:g,leavedClassName:"".concat(r,"-hidden")},f,{onAppearPrepare:D,onEnterPrepare:D,visible:l,onVisibleChanged:function(fe){var _e;f==null||(_e=f.onVisibleChanged)===null||_e===void 0||_e.call(f,fe),s(fe)}}),function(Ie,fe){var _e=Ie.className,H=Ie.style,Ze=Et(r,_e,i);return d.createElement("div",{ref:vi(dt,t,fe),className:Ze,style:V(V(V(V({"--arrow-x":"".concat(h.x||0,"px"),"--arrow-y":"".concat(h.y||0,"px")},re),ae),H),{},{boxSizing:"border-box",zIndex:x},a),onMouseEnter:S,onMouseLeave:k,onPointerEnter:P,onClick:v},w&&d.createElement(Za,{prefixCls:r,arrow:w,arrowPos:h,align:m}),d.createElement(Xa,{cache:!l&&!u},U))})}))}),to=d.forwardRef(function(n,t){var e=n.children,i=n.getTriggerDOMNode,r=vn(e),a=d.useCallback(function(s){hi(t,i?i(s):s)},[i]),o=hn(a,e.ref);return r?d.cloneElement(e,{ref:o}):e}),qn=d.createContext(null);function In(n){return n?Array.isArray(n)?n:[n]:[]}function ro(n,t,e,i){return d.useMemo(function(){var r=In(e??t),a=In(i??t),o=new Set(r),s=new Set(a);return n&&(o.has("hover")&&(o.delete("hover"),o.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[o,s]},[n,t,e,i])}function no(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2?arguments[2]:void 0;return e?n[0]===t[0]:n[0]===t[0]&&n[1]===t[1]}function io(n,t,e,i){for(var r=e.points,a=Object.keys(n),o=0;o<a.length;o+=1){var s,l=a[o];if(no((s=n[l])===null||s===void 0?void 0:s.points,r,i))return"".concat(t,"-placement-").concat(l)}return""}function Wn(n,t,e,i){return t||(e?{motionName:"".concat(n,"-").concat(e)}:i?{motionName:i}:null)}function Qt(n){return n.ownerDocument.defaultView}function cn(n){for(var t=[],e=n==null?void 0:n.parentElement,i=["hidden","scroll","clip","auto"];e;){var r=Qt(e).getComputedStyle(e),a=r.overflowX,o=r.overflowY,s=r.overflow;[a,o,s].some(function(l){return i.includes(l)})&&t.push(e),e=e.parentElement}return t}function Ut(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(n)?t:n}function Wt(n){return Ut(parseFloat(n),0)}function zn(n,t){var e=V({},n);return(t||[]).forEach(function(i){if(!(i instanceof HTMLBodyElement||i instanceof HTMLHtmlElement)){var r=Qt(i).getComputedStyle(i),a=r.overflow,o=r.overflowClipMargin,s=r.borderTopWidth,l=r.borderBottomWidth,c=r.borderLeftWidth,u=r.borderRightWidth,v=i.getBoundingClientRect(),y=i.offsetHeight,w=i.clientHeight,h=i.offsetWidth,m=i.clientWidth,f=Wt(s),F=Wt(l),g=Wt(c),C=Wt(u),b=Ut(Math.round(v.width/h*1e3)/1e3),E=Ut(Math.round(v.height/y*1e3)/1e3),x=(h-m-g-C)*b,S=(y-w-f-F)*E,k=f*E,P=F*E,R=g*b,$=C*b,L=0,A=0;if(a==="clip"){var N=Wt(o);L=N*b,A=N*E}var Q=v.x+R-L,D=v.y+k-A,z=Q+v.width+2*L-R-$-x,q=D+v.height+2*A-k-P-S;e.left=Math.max(e.left,Q),e.top=Math.max(e.top,D),e.right=Math.min(e.right,z),e.bottom=Math.min(e.bottom,q)}}),e}function jn(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e="".concat(t),i=e.match(/^(.*)\%$/);return i?n*(parseFloat(i[1])/100):parseFloat(e)}function Hn(n,t){var e=t||[],i=W(e,2),r=i[0],a=i[1];return[jn(n.width,r),jn(n.height,a)]}function Un(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[n[0],n[1]]}function Ct(n,t){var e=t[0],i=t[1],r,a;return e==="t"?a=n.y:e==="b"?a=n.y+n.height:a=n.y+n.height/2,i==="l"?r=n.x:i==="r"?r=n.x+n.width:r=n.x+n.width/2,{x:r,y:a}}function Ge(n,t){var e={t:"b",b:"t",l:"r",r:"l"};return n.map(function(i,r){return r===t?e[i]||"c":i}).join("")}function ao(n,t,e,i,r,a,o){var s=d.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:r[i]||{}}),l=W(s,2),c=l[0],u=l[1],v=d.useRef(0),y=d.useMemo(function(){return t?cn(t):[]},[t]),w=d.useRef({}),h=function(){w.current={}};n||h();var m=qe(function(){if(t&&e&&n){let we=function(De,ut){var pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ze,bt=U.x+De,qt=U.y+ut,It=bt+ye,vr=qt+re,Dr=Math.max(bt,pt.left),qr=Math.max(qt,pt.top),Ir=Math.min(It,pt.right),Wr=Math.min(vr,pt.bottom);return Math.max(0,(Ir-Dr)*(Wr-qr))},dr=function(){tt=U.y+B,rt=tt+re,Ae=U.x+G,nt=Ae+ye};var g,C,b=t,E=b.ownerDocument,x=Qt(b),S=x.getComputedStyle(b),k=S.width,P=S.height,R=S.position,$=b.style.left,L=b.style.top,A=b.style.right,N=b.style.bottom,Q=b.style.overflow,D=V(V({},r[i]),a),z=E.createElement("div");(g=b.parentElement)===null||g===void 0||g.appendChild(z),z.style.left="".concat(b.offsetLeft,"px"),z.style.top="".concat(b.offsetTop,"px"),z.style.position=R,z.style.height="".concat(b.offsetHeight,"px"),z.style.width="".concat(b.offsetWidth,"px"),b.style.left="0",b.style.top="0",b.style.right="auto",b.style.bottom="auto",b.style.overflow="hidden";var q;if(Array.isArray(e))q={x:e[0],y:e[1],width:0,height:0};else{var se=e.getBoundingClientRect();q={x:se.x,y:se.y,width:se.width,height:se.height}}var U=b.getBoundingClientRect(),me=E.documentElement,ue=me.clientWidth,xe=me.clientHeight,te=me.scrollWidth,ne=me.scrollHeight,$e=me.scrollTop,ie=me.scrollLeft,re=U.height,ye=U.width,Re=q.height,Ve=q.width,ft={left:0,top:0,right:ue,bottom:xe},kt={left:-ie,top:-$e,right:te-ie,bottom:ne-$e},ae=D.htmlRegion,dt="visible",Ie="visibleFirst";ae!=="scroll"&&ae!==Ie&&(ae=dt);var fe=ae===Ie,_e=zn(kt,y),H=zn(ft,y),Ze=ae===dt?H:_e,pe=fe?H:Ze;b.style.left="auto",b.style.top="auto",b.style.right="0",b.style.bottom="0";var Zt=b.getBoundingClientRect();b.style.left=$,b.style.top=L,b.style.right=A,b.style.bottom=N,b.style.overflow=Q,(C=b.parentElement)===null||C===void 0||C.removeChild(z);var We=Ut(Math.round(ye/parseFloat(k)*1e3)/1e3),ze=Ut(Math.round(re/parseFloat(P)*1e3)/1e3);if(We===0||ze===0||Jr(e)&&!mi(e))return;var Yt=D.offset,le=D.targetOffset,Er=Hn(U,Yt),xt=W(Er,2),Ce=xt[0],Ee=xt[1],Xt=Hn(q,le),Pe=W(Xt,2),Pr=Pe[0],er=Pe[1];q.x-=Pr,q.y-=er;var Mr=D.points||[],Ye=W(Mr,2),be=Ye[0],je=Ye[1],Ne=Un(je),de=Un(be),tr=Ct(q,Ne),rr=Ct(U,de),Te=V({},D),G=tr.x-rr.x+Ce,B=tr.y-rr.y+Ee,Z=we(G,B),vt=we(G,B,H),He=Ct(q,["t","l"]),Xe=Ct(U,["t","l"]),$t=Ct(q,["b","r"]),_t=Ct(U,["b","r"]),et=D.overflow||{},Me=et.adjustX,Rr=et.adjustY,Nt=et.shiftX,ht=et.shiftY,Tt=function(ut){return typeof ut=="boolean"?ut:ut>=0},tt,rt,Ae,nt;dr();var nr=Tt(Rr),At=de[0]===Ne[0];if(nr&&de[0]==="t"&&(rt>pe.bottom||w.current.bt)){var Ue=B;At?Ue-=re-Re:Ue=He.y-_t.y-Ee;var ir=we(G,Ue),gt=we(G,Ue,H);ir>Z||ir===Z&&(!fe||gt>=vt)?(w.current.bt=!0,B=Ue,Ee=-Ee,Te.points=[Ge(de,0),Ge(Ne,0)]):w.current.bt=!1}if(nr&&de[0]==="b"&&(tt<pe.top||w.current.tb)){var it=B;At?it+=re-Re:it=$t.y-Xe.y-Ee;var ce=we(G,it),Vr=we(G,it,H);ce>Z||ce===Z&&(!fe||Vr>=vt)?(w.current.tb=!0,B=it,Ee=-Ee,Te.points=[Ge(de,0),Ge(Ne,0)]):w.current.tb=!1}var ar=Tt(Me),or=de[1]===Ne[1];if(ar&&de[1]==="l"&&(nt>pe.right||w.current.rl)){var at=G;or?at-=ye-Ve:at=He.x-_t.x-Ce;var sr=we(at,B),Sr=we(at,B,H);sr>Z||sr===Z&&(!fe||Sr>=vt)?(w.current.rl=!0,G=at,Ce=-Ce,Te.points=[Ge(de,1),Ge(Ne,1)]):w.current.rl=!1}if(ar&&de[1]==="r"&&(Ae<pe.left||w.current.lr)){var ot=G;or?ot+=ye-Ve:ot=$t.x-Xe.x-Ce;var ur=we(ot,B),kr=we(ot,B,H);ur>Z||ur===Z&&(!fe||kr>=vt)?(w.current.lr=!0,G=ot,Ce=-Ce,Te.points=[Ge(de,1),Ge(Ne,1)]):w.current.lr=!1}dr();var Se=Nt===!0?0:Nt;typeof Se=="number"&&(Ae<H.left&&(G-=Ae-H.left-Ce,q.x+Ve<H.left+Se&&(G+=q.x-H.left+Ve-Se)),nt>H.right&&(G-=nt-H.right-Ce,q.x>H.right-Se&&(G+=q.x-H.right+Se)));var Oe=ht===!0?0:ht;typeof Oe=="number"&&(tt<H.top&&(B-=tt-H.top-Ee,q.y+Re<H.top+Oe&&(B+=q.y-H.top+Re-Oe)),rt>H.bottom&&(B-=rt-H.bottom-Ee,q.y>H.bottom-Oe&&(B+=q.y-H.bottom+Oe)));var Ot=U.x+G,lr=Ot+ye,Be=U.y+B,st=Be+re,Lt=q.x,mt=Lt+Ve,Le=q.y,xr=Le+Re,$r=Math.max(Ot,Lt),_r=Math.min(lr,mt),cr=($r+_r)/2,Nr=cr-Ot,Tr=Math.max(Be,Le),Ar=Math.min(st,xr),fr=(Tr+Ar)/2,Or=fr-Be;o==null||o(t,Te);var Dt=Zt.right-U.x-(G+U.width),yt=Zt.bottom-U.y-(B+U.height);We===1&&(G=Math.round(G),Dt=Math.round(Dt)),ze===1&&(B=Math.round(B),yt=Math.round(yt));var Lr={ready:!0,offsetX:G/We,offsetY:B/ze,offsetR:Dt/We,offsetB:yt/ze,arrowX:Nr/We,arrowY:Or/ze,scaleX:We,scaleY:ze,align:Te};u(Lr)}}),f=function(){v.current+=1;var C=v.current;Promise.resolve().then(function(){v.current===C&&m()})},F=function(){u(function(C){return V(V({},C),{},{ready:!1})})};return he(F,[i]),he(function(){n||F()},[n]),[c.ready,c.offsetX,c.offsetY,c.offsetR,c.offsetB,c.arrowX,c.arrowY,c.scaleX,c.scaleY,c.align,f]}function oo(n,t,e,i,r){he(function(){if(n&&t&&e){let v=function(){i(),r()};var a=t,o=e,s=cn(a),l=cn(o),c=Qt(o),u=new Set([c].concat(T(s),T(l)));return u.forEach(function(y){y.addEventListener("scroll",v,{passive:!0})}),c.addEventListener("resize",v,{passive:!0}),i(),function(){u.forEach(function(y){y.removeEventListener("scroll",v),c.removeEventListener("resize",v)})}}},[n,t,e])}function so(n,t,e,i,r,a,o,s){var l=d.useRef(n);l.current=n,d.useEffect(function(){if(t&&i&&(!r||a)){var c=function(w){var h=w.target;l.current&&!o(h)&&s(!1)},u=Qt(i);u.addEventListener("mousedown",c,!0),u.addEventListener("contextmenu",c,!0);var v=Qr(e);return v&&(v.addEventListener("mousedown",c,!0),v.addEventListener("contextmenu",c,!0)),function(){u.removeEventListener("mousedown",c,!0),u.removeEventListener("contextmenu",c,!0),v&&(v.removeEventListener("mousedown",c,!0),v.removeEventListener("contextmenu",c,!0))}}},[t,e,i,r,a])}var uo=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function lo(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ii,t=d.forwardRef(function(e,i){var r=e.prefixCls,a=r===void 0?"rc-trigger-popup":r,o=e.children,s=e.action,l=s===void 0?"hover":s,c=e.showAction,u=e.hideAction,v=e.popupVisible,y=e.defaultPopupVisible,w=e.onPopupVisibleChange,h=e.afterPopupVisibleChange,m=e.mouseEnterDelay,f=e.mouseLeaveDelay,F=f===void 0?.1:f,g=e.focusDelay,C=e.blurDelay,b=e.mask,E=e.maskClosable,x=E===void 0?!0:E,S=e.getPopupContainer,k=e.forceRender,P=e.autoDestroy,R=e.destroyPopupOnHide,$=e.popup,L=e.popupClassName,A=e.popupStyle,N=e.popupPlacement,Q=e.builtinPlacements,D=Q===void 0?{}:Q,z=e.popupAlign,q=e.zIndex,se=e.stretch,U=e.getPopupClassNameFromAlign,me=e.fresh,ue=e.alignPoint,xe=e.onPopupClick,te=e.onPopupAlign,ne=e.arrow,$e=e.popupMotion,ie=e.maskMotion,re=e.popupTransitionName,ye=e.popupAnimation,Re=e.maskTransitionName,Ve=e.maskAnimation,ft=e.className,kt=e.getTriggerDOMNode,ae=Fr(e,uo),dt=P||R||!1,Ie=d.useState(!1),fe=W(Ie,2),_e=fe[0],H=fe[1];he(function(){H(Qa())},[]);var Ze=d.useRef({}),pe=d.useContext(qn),Zt=d.useMemo(function(){return{registerSubPopup:function(_,K){Ze.current[_]=K,pe==null||pe.registerSubPopup(_,K)}}},[pe]),We=Xi(),ze=d.useState(null),Yt=W(ze,2),le=Yt[0],Er=Yt[1],xt=d.useRef(null),Ce=qe(function(M){xt.current=M,Jr(M)&&le!==M&&Er(M),pe==null||pe.registerSubPopup(We,M)}),Ee=d.useState(null),Xt=W(Ee,2),Pe=Xt[0],Pr=Xt[1],er=d.useRef(null),Mr=qe(function(M){Jr(M)&&Pe!==M&&(Pr(M),er.current=M)}),Ye=d.Children.only(o),be=(Ye==null?void 0:Ye.props)||{},je={},Ne=qe(function(M){var _,K,X=Pe;return(X==null?void 0:X.contains(M))||((_=Qr(X))===null||_===void 0?void 0:_.host)===M||M===X||(le==null?void 0:le.contains(M))||((K=Qr(le))===null||K===void 0?void 0:K.host)===M||M===le||Object.values(Ze.current).some(function(J){return(J==null?void 0:J.contains(M))||M===J})}),de=Wn(a,$e,ye,re),tr=Wn(a,ie,Ve,Re),rr=d.useState(y||!1),Te=W(rr,2),G=Te[0],B=Te[1],Z=v??G,vt=qe(function(M){v===void 0&&B(M)});he(function(){B(v||!1)},[v]);var He=d.useRef(Z);He.current=Z;var Xe=d.useRef([]);Xe.current=[];var $t=qe(function(M){var _;vt(M),((_=Xe.current[Xe.current.length-1])!==null&&_!==void 0?_:Z)!==M&&(Xe.current.push(M),w==null||w(M))}),_t=d.useRef(),et=function(){clearTimeout(_t.current)},Me=function(_){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;et(),K===0?$t(_):_t.current=setTimeout(function(){$t(_)},K*1e3)};d.useEffect(function(){return et},[]);var Rr=d.useState(!1),Nt=W(Rr,2),ht=Nt[0],Tt=Nt[1];he(function(M){(!M||Z)&&Tt(!0)},[Z]);var tt=d.useState(null),rt=W(tt,2),Ae=rt[0],nt=rt[1],nr=d.useState([0,0]),At=W(nr,2),Ue=At[0],ir=At[1],gt=function(_){ir([_.clientX,_.clientY])},it=ao(Z,le,ue?Ue:Pe,N,D,z,te),ce=W(it,11),Vr=ce[0],ar=ce[1],or=ce[2],at=ce[3],sr=ce[4],Sr=ce[5],ot=ce[6],ur=ce[7],kr=ce[8],Se=ce[9],Oe=ce[10],Ot=ro(_e,l,c,u),lr=W(Ot,2),Be=lr[0],st=lr[1],Lt=Be.has("click"),mt=st.has("click")||st.has("contextMenu"),Le=qe(function(){ht||Oe()}),xr=function(){He.current&&ue&&mt&&Me(!1)};oo(Z,Pe,le,Le,xr),he(function(){Le()},[Ue,N]),he(function(){Z&&!(D!=null&&D[N])&&Le()},[JSON.stringify(z)]);var $r=d.useMemo(function(){var M=io(D,a,Se,ue);return Et(M,U==null?void 0:U(Se))},[Se,U,D,a,ue]);d.useImperativeHandle(i,function(){return{nativeElement:er.current,popupElement:xt.current,forceAlign:Le}});var _r=d.useState(0),cr=W(_r,2),Nr=cr[0],Tr=cr[1],Ar=d.useState(0),fr=W(Ar,2),Or=fr[0],Dt=fr[1],yt=function(){if(se&&Pe){var _=Pe.getBoundingClientRect();Tr(_.width),Dt(_.height)}},Lr=function(){yt(),Le()},we=function(_){Tt(!1),Oe(),h==null||h(_)},dr=function(){return new Promise(function(_){yt(),nt(function(){return _})})};he(function(){Ae&&(Oe(),Ae(),nt(null))},[Ae]);function De(M,_,K,X){je[M]=function(J){var hr;X==null||X(J),Me(_,K);for(var zr=arguments.length,yn=new Array(zr>1?zr-1:0),gr=1;gr<zr;gr++)yn[gr-1]=arguments[gr];(hr=be[M])===null||hr===void 0||hr.call.apply(hr,[be,J].concat(yn))}}(Lt||mt)&&(je.onClick=function(M){var _;He.current&&mt?Me(!1):!He.current&&Lt&&(gt(M),Me(!0));for(var K=arguments.length,X=new Array(K>1?K-1:0),J=1;J<K;J++)X[J-1]=arguments[J];(_=be.onClick)===null||_===void 0||_.call.apply(_,[be,M].concat(X))}),so(Z,mt,Pe,le,b,x,Ne,Me);var ut=Be.has("hover"),pt=st.has("hover"),bt,qt;ut&&(De("onMouseEnter",!0,m,function(M){gt(M)}),De("onPointerEnter",!0,m,function(M){gt(M)}),bt=function(_){(Z||ht)&&le!==null&&le!==void 0&&le.contains(_.target)&&Me(!0,m)},ue&&(je.onMouseMove=function(M){var _;(_=be.onMouseMove)===null||_===void 0||_.call(be,M)})),pt&&(De("onMouseLeave",!1,F),De("onPointerLeave",!1,F),qt=function(){Me(!1,F)}),Be.has("focus")&&De("onFocus",!0,g),st.has("focus")&&De("onBlur",!1,C),Be.has("contextMenu")&&(je.onContextMenu=function(M){var _;He.current&&st.has("contextMenu")?Me(!1):(gt(M),Me(!0)),M.preventDefault();for(var K=arguments.length,X=new Array(K>1?K-1:0),J=1;J<K;J++)X[J-1]=arguments[J];(_=be.onContextMenu)===null||_===void 0||_.call.apply(_,[be,M].concat(X))}),ft&&(je.className=Et(be.className,ft));var It=V(V({},be),je),vr={},Dr=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Dr.forEach(function(M){ae[M]&&(vr[M]=function(){for(var _,K=arguments.length,X=new Array(K),J=0;J<K;J++)X[J]=arguments[J];(_=It[M])===null||_===void 0||_.call.apply(_,[It].concat(X)),ae[M].apply(ae,X)})});var qr=d.cloneElement(Ye,V(V({},It),vr)),Ir={x:Sr,y:ot},Wr=ne?V({},ne!==!0?ne:{}):null;return d.createElement(d.Fragment,null,d.createElement(gn,{disabled:!Z,ref:Mr,onResize:Lr},d.createElement(to,{getTriggerDOMNode:kt},qr)),d.createElement(qn.Provider,{value:Zt},d.createElement(eo,{portal:n,ref:Ce,prefixCls:a,popup:$,className:Et(L,$r),style:A,target:Pe,onMouseEnter:bt,onMouseLeave:qt,onPointerEnter:bt,zIndex:q,open:Z,keepDom:ht,fresh:me,onClick:xe,mask:b,motion:de,maskMotion:tr,onVisibleChanged:we,onPrepare:dr,forceRender:k,autoDestroy:dt,getPopupContainer:S,align:Se,arrow:Wr,arrowPos:Ir,ready:Vr,offsetX:ar,offsetY:or,offsetR:at,offsetB:sr,onAlign:Le,stretch:se,targetWidth:Nr/ur,targetHeight:Or/kr})))});return t}const wo=lo(ii);export{Dn as F,yo as N,ii as P,gn as R,wo as T,po as V,Xi as a,Qa as b,Bi as c,mo as g,bo as i,go as u};
