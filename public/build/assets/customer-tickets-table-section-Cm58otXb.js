import{r as o,y as L,j as s,a as c}from"./page-DqzE0-nr.js";import"./main-qW1nALFO.js";import{u as S}from"./app-DfEATJIe.js";import{h as d}from"./page-B6ffQ_89.js";import"./list-DhL-EaBS.js";import{F as N}from"./Table-nI12vE8d.js";import{T as m}from"./index-BncJorS9.js";import{T as h}from"./index-CcHIY6N-.js";import{R as f}from"./EyeOutlined-DU4AkV_f.js";import"./index-DYM8TcfK.js";import"./asyncToGenerator-BcfSbg8Z.js";import"./index-C4QAArOu.js";import"./compact-item-BAW5xiWx.js";import"./pickAttrs-CytUKMFb.js";import"./addEventListener-DfoNCfBT.js";import"./index-BeEmOpEG.js";import"./KeyCode-DNlgD2sM.js";import"./Overflow-B71UGVjr.js";import"./useZIndex-DLsQrGnX.js";import"./motion-4S5rSXvC.js";import"./PurePanel-Bx7ULege.js";import"./useIcons-BpeEQjTf.js";import"./useLocale-B3iS6PRM.js";import"./index-lfz5rgdR.js";import"./button-N2zNdCUr.js";import"./render-BS0NmNht.js";import"./index-DlyXbUxk.js";import"./RightOutlined-DouamT1I.js";import"./ContextIsolator-DkS6tMeV.js";import"./zoom-DSxnsLhx.js";import"./roundedArrow-YoMvkauD.js";import"./index-DX3UUZI7.js";import"./Pagination-Dvu9rcLX.js";import"./useForceUpdate-DPpXG2eu.js";import"./index-BViF2emH.js";import"./useClosable-B0aWgX52.js";function ut(){const{tickets:r}=S(e=>e.tickets),[u,g]=o.useState(10),[D,I]=o.useState(1),l=window.location.search.split("=")[1];let n=[];l=="CLOSED"?n=function(t){var a;return(a=r==null?void 0:r.data)==null?void 0:a.filter(i=>i.status==t)}(l):l=="PROCESSED"?n=function(){return r.data.filter(t=>t.status!="PARTS VALIDATION"&&t.status!="WARRANTY VALIDATION"&&t.status!="TECH VALIDATION"&&t.status!="CLOSED")}():l=="PENDING"?n=function(){return r.data.filter(t=>t.isUploading=="false")}():n=r.data,o.useState(""),o.useState(""),o.useRef(null);const x=n==null?void 0:n.map((e,t)=>({...e,key:e.id})),T=[{title:"Ticket ID",dataIndex:"ticket_id",key:"ticket_id"},{title:"Fullname",dataIndex:"fullname",key:"fullname",render:(e,t,a)=>s.jsxs("div",{color:"red",children:[t.fname," ",t.lname]},a)},{title:"Email",dataIndex:"email",key:"email"},{title:"Resolution",dataIndex:"call_type",key:"call_type"},{title:"Issue",dataIndex:"issue",key:"issue",render:(e,t,a)=>s.jsx(m,{color:"blue",children:t==null?void 0:t.issue},a)},{title:"Status",dataIndex:"status",key:"status",render:(e,t,a)=>{const i=t.status=="CLOSED"?"red":t.status=="PARTS VALIDATION"||t.status=="WARRANTY VALIDATION"||t.status=="TECH VALIDATION"?"orange":"green";return s.jsxs(s.Fragment,{children:[s.jsx(m,{color:i,children:(t.status=="PARTS VALIDATION"||t.status=="WARRANTY VALIDATION"||t.status=="TECH VALIDATION")&&t.isUploading=="false"?"OPEN":t.status},a),t.is_reply&&s.jsxs(m,{color:"purple",children:["Customer has responded on ",d(t.email_date).format("LLL")]})]})}},{title:"IsUpload",dataIndex:"isUploading",key:"isUploading",render:(e,t,a)=>{const i=t.isUploading=="true"?"green":"red";return s.jsx(s.Fragment,{children:s.jsx(m,{color:i,children:t.isUploading=="true"?"UPLOADED":"PENDING"},a)})}},{title:"Created At",dataIndex:"status",key:"status",render:(e,t,a)=>s.jsx("div",{children:d(t.created_at).format("LLL")})},{title:"action",dataIndex:"action",render:(e,t)=>{function a(i){return i.call_type=="TS-Tech Support"?s.jsx(c,{href:"/agent/tickets/details/"+t.id+"/status",children:s.jsx(f,{className:"text-lg text-blue-500"})}):s.jsx(c,{href:"/agent/tickets/details/"+t.id+"/files",children:s.jsx(f,{className:"text-lg text-blue-500"})})}return s.jsx(h,{placement:"topLeft",title:"View Ticket Details",children:s.jsx(h,{placement:"topLeft",title:"View Ticket Details",children:a(t)})})}}],A=window.location.pathname+window.location.search,p=((e,t)=>new URLSearchParams(e.split("?")[1]).get(t))(A,"page"),y={current:p?parseInt(p,10):1,pageSize:u,total:(r==null?void 0:r.last_page)*u,onChange:(e,t)=>{const a=new URLSearchParams(window.location.search);a.set("page",e);const i=window.location.pathname+"?"+a.toString();console.log("Navigating to:",i),L.visit(i),I(e),g(t)}};return s.jsx(N,{pagination:y,columns:T,dataSource:x})}export{ut as default};
