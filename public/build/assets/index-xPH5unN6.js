import{v as N,R as je,U as Te,V as Y,W as Ne,C as A,k as T,n as we,e as Se,u as Ie,I as J,j as ke,H as Fe,l as Be}from"./asyncToGenerator-DYUyOi83.js";import{r as l,o as P}from"./page-B_FNLrKI.js";import{u as Me,r as Re}from"./render-DFTnvfjc.js";import{C as Le}from"./CheckCircleFilled-B1vPqam2.js";import{C as K,a as ze}from"./pickAttrs-Dct9vqKx.js";import{E as Ae,I as We}from"./InfoCircleFilled-DTKblXpS.js";import{u as ee,a as _e,z as De,C as He}from"./useZIndex-DEasTsYa.js";import{g as z}from"./motion-DJ7hMwu8.js";import{B as _,a as te}from"./button-CDM6RDM6.js";import{u as ne,D as Ve,p as qe,a as Qe,P as Xe}from"./index-CGX2b0Vx.js";import{u as Ge,p as H}from"./useClosable-Cbgjb4lL.js";import{N as Ze,w as Ue}from"./useIcons-BTOtFulL.js";import{a as Ye,N as Je}from"./compact-item-CFEgdXJP.js";import{u as D}from"./useLocale-CdzdcKtH.js";function Ke(){const[e,n]=l.useState([]),r=l.useCallback(t=>(n(o=>[].concat(N(o),[t])),()=>{n(o=>o.filter(a=>a!==t))}),[]);return[e,r]}function V(e){return!!(e&&e.then)}const et=e=>{const{type:n,children:r,prefixCls:t,buttonProps:o,close:a,autoFocus:C,emitEvent:f,isSilent:c,quitOnNullishReturnValue:u,actionFn:s}=e,i=l.useRef(!1),v=l.useRef(null),[d,y]=je(!1),g=function(){a==null||a.apply(void 0,arguments)};l.useEffect(()=>{let m=null;return C&&(m=setTimeout(()=>{var x;(x=v.current)===null||x===void 0||x.focus()})),()=>{m&&clearTimeout(m)}},[]);const b=m=>{V(m)&&(y(!0),m.then(function(){y(!1,!0),g.apply(void 0,arguments),i.current=!1},x=>{if(y(!1,!0),i.current=!1,!(c!=null&&c()))return Promise.reject(x)}))},p=m=>{if(i.current)return;if(i.current=!0,!s){g();return}let x;if(f){if(x=s(m),u&&!V(x)){i.current=!1,g(m);return}}else if(s.length)x=s(a),i.current=!1;else if(x=s(),!x){g();return}b(x)};return l.createElement(_,Object.assign({},te(n),{onClick:p,loading:d,prefixCls:t},o,{ref:v}),r)},oe=et,k=P.createContext({}),{Provider:le}=k,tt=()=>{const{autoFocusButton:e,cancelButtonProps:n,cancelTextLocale:r,isSilent:t,mergedOkCancel:o,rootPrefixCls:a,close:C,onCancel:f,onConfirm:c}=l.useContext(k);return o?P.createElement(oe,{isSilent:t,actionFn:f,close:function(){C==null||C.apply(void 0,arguments),c==null||c(!1)},autoFocus:e==="cancel",buttonProps:n,prefixCls:`${a}-btn`},r):null},q=tt,nt=()=>{const{autoFocusButton:e,close:n,isSilent:r,okButtonProps:t,rootPrefixCls:o,okTextLocale:a,okType:C,onConfirm:f,onOk:c}=l.useContext(k);return P.createElement(oe,{isSilent:r,type:C||"primary",actionFn:c,close:function(){n==null||n.apply(void 0,arguments),f==null||f(!0)},autoFocus:e==="ok",buttonProps:t,prefixCls:`${o}-btn`},a)},Q=nt,ot=()=>Te()&&window.document.documentElement;function X(){}const lt=l.createContext({add:X,remove:X});function rt(e){const n=l.useContext(lt),r=l.useRef();return Ye(o=>{if(o){const a=e?o.querySelector(e):o;n.add(a),r.current=a}else n.remove(r.current)})}const st=()=>{const{cancelButtonProps:e,cancelTextLocale:n,onCancel:r}=l.useContext(k);return P.createElement(_,Object.assign({onClick:r},e),n)},G=st,at=()=>{const{confirmLoading:e,okButtonProps:n,okType:r,okTextLocale:t,onOk:o}=l.useContext(k);return P.createElement(_,Object.assign({},te(r),{loading:e,onClick:o},n),t)},Z=at;function re(e,n){return P.createElement("span",{className:`${e}-close-x`},n||P.createElement(K,{className:`${e}-close-icon`}))}const se=e=>{const{okText:n,okType:r="primary",cancelText:t,confirmLoading:o,onOk:a,onCancel:C,okButtonProps:f,cancelButtonProps:c,footer:u}=e,[s]=D("Modal",Y()),i=n||(s==null?void 0:s.okText),v=t||(s==null?void 0:s.cancelText),d={confirmLoading:o,okButtonProps:f,cancelButtonProps:c,okTextLocale:i,cancelTextLocale:v,okType:r,onOk:a,onCancel:C},y=P.useMemo(()=>d,N(Object.values(d)));let g;return typeof u=="function"||typeof u>"u"?(g=P.createElement(P.Fragment,null,P.createElement(G,null),P.createElement(Z,null)),typeof u=="function"&&(g=u(g,{OkBtn:Z,CancelBtn:G})),g=P.createElement(le,{value:y},g)):g=u,P.createElement(Ne,{disabled:!1},g)};var ct=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};let W;const it=e=>{W={x:e.pageX,y:e.pageY},setTimeout(()=>{W=null},100)};ot()&&document.documentElement.addEventListener("click",it,!0);const ut=e=>{var n;const{getPopupContainer:r,getPrefixCls:t,direction:o,modal:a}=l.useContext(A),C=I=>{const{onCancel:w}=e;w==null||w(I)},f=I=>{const{onOk:w}=e;w==null||w(I)},{prefixCls:c,className:u,rootClassName:s,open:i,wrapClassName:v,centered:d,getContainer:y,focusTriggerAfterClose:g=!0,style:b,visible:p,width:m=520,footer:x,classNames:O,styles:j}=e,h=ct(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles"]),$=t("modal",c),B=t(),M=ee($),[R,L,xe]=ne($,M),be=T(v,{[`${$}-centered`]:!!d,[`${$}-wrap-rtl`]:o==="rtl"}),ye=x!==null&&l.createElement(se,Object.assign({},e,{onOk:f,onCancel:C})),[Oe,Pe]=Ge(H(e),H(a),{closable:!0,closeIcon:l.createElement(K,{className:`${$}-close-icon`}),closeIconRender:I=>re($,I)}),he=rt(`.${$}-content`),[Ee,$e]=_e("Modal",h.zIndex);return R(l.createElement(Je,null,l.createElement(Ze,{status:!0,override:!0},l.createElement(De.Provider,{value:$e},l.createElement(Ve,Object.assign({width:m},h,{zIndex:Ee,getContainer:y===void 0?r:y,prefixCls:$,rootClassName:T(L,s,xe,M),footer:ye,visible:i??p,mousePosition:(n=h.mousePosition)!==null&&n!==void 0?n:W,onClose:C,closable:Oe,closeIcon:Pe,focusTriggerAfterClose:g,transitionName:z(B,"zoom",e.transitionName),maskTransitionName:z(B,"fade",e.maskTransitionName),className:T(L,u,a==null?void 0:a.className),style:Object.assign(Object.assign({},a==null?void 0:a.style),b),classNames:Object.assign(Object.assign(Object.assign({},a==null?void 0:a.classNames),O),{wrapper:T(be,O==null?void 0:O.wrapper)}),styles:Object.assign(Object.assign({},a==null?void 0:a.styles),j),panelRef:he}))))))},ae=ut,ft=e=>{const{componentCls:n,titleFontSize:r,titleLineHeight:t,modalConfirmIconSize:o,fontSize:a,lineHeight:C,modalTitleHeight:f,fontHeight:c,confirmBodyPadding:u}=e,s=`${n}-confirm`;return{[s]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${s}-body-wrapper`]:Object.assign({},Se()),[`&${n} ${n}-body`]:{padding:u},[`${s}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(c).sub(o).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(f).sub(o).equal()).div(2).equal()}},[`${s}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS},[`${e.iconCls} + ${s}-paragraph`]:{maxWidth:`calc(100% - ${Ie(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${s}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:r,lineHeight:t},[`${s}-content`]:{color:e.colorText,fontSize:a,lineHeight:C},[`${s}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${s}-error ${s}-body > ${e.iconCls}`]:{color:e.colorError},[`${s}-warning ${s}-body > ${e.iconCls},
        ${s}-confirm ${s}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${s}-info ${s}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${s}-success ${s}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},mt=we(["Modal","confirm"],e=>{const n=Qe(e);return[ft(n)]},qe,{order:-1e3});var dt=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};function ce(e){const{prefixCls:n,icon:r,okText:t,cancelText:o,confirmPrefixCls:a,type:C,okCancel:f,footer:c,locale:u}=e,s=dt(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let i=r;if(!r&&r!==null)switch(C){case"info":i=l.createElement(We,null);break;case"success":i=l.createElement(Le,null);break;case"error":i=l.createElement(ze,null);break;default:i=l.createElement(Ae,null)}const v=f??C==="confirm",d=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[y]=D("Modal"),g=u||y,b=t||(v?g==null?void 0:g.okText:g==null?void 0:g.justOkText),p=o||(g==null?void 0:g.cancelText),m=Object.assign({autoFocusButton:d,cancelTextLocale:p,okTextLocale:b,mergedOkCancel:v},s),x=l.useMemo(()=>m,N(Object.values(m))),O=l.createElement(l.Fragment,null,l.createElement(q,null),l.createElement(Q,null)),j=e.title!==void 0&&e.title!==null,h=`${a}-body`;return l.createElement("div",{className:`${a}-body-wrapper`},l.createElement("div",{className:T(h,{[`${h}-has-title`]:j})},i,l.createElement("div",{className:`${a}-paragraph`},j&&l.createElement("span",{className:`${a}-title`},e.title),l.createElement("div",{className:`${a}-content`},e.content))),c===void 0||typeof c=="function"?l.createElement(le,{value:x},l.createElement("div",{className:`${a}-btns`},typeof c=="function"?c(O,{OkBtn:Q,CancelBtn:q}):O)):c,l.createElement(mt,{prefixCls:n}))}const Ct=e=>{const{close:n,zIndex:r,afterClose:t,open:o,keyboard:a,centered:C,getContainer:f,maskStyle:c,direction:u,prefixCls:s,wrapClassName:i,rootPrefixCls:v,bodyStyle:d,closable:y=!1,closeIcon:g,modalRender:b,focusTriggerAfterClose:p,onConfirm:m,styles:x}=e,O=`${s}-confirm`,j=e.width||416,h=e.style||{},$=e.mask===void 0?!0:e.mask,B=e.maskClosable===void 0?!1:e.maskClosable,M=T(O,`${O}-${e.type}`,{[`${O}-rtl`]:u==="rtl"},e.className),[,R]=ke(),L=l.useMemo(()=>r!==void 0?r:R.zIndexPopupBase+He,[r,R]);return l.createElement(ae,{prefixCls:s,className:M,wrapClassName:T({[`${O}-centered`]:!!e.centered},i),onCancel:()=>{n==null||n({triggerCancel:!0}),m==null||m(!1)},open:o,title:"",footer:null,transitionName:z(v||"","zoom",e.transitionName),maskTransitionName:z(v||"","fade",e.maskTransitionName),mask:$,maskClosable:B,style:h,styles:Object.assign({body:d,mask:c},x),width:j,zIndex:L,afterClose:t,keyboard:a,centered:C,getContainer:f,closable:y,closeIcon:g,modalRender:b,focusTriggerAfterClose:p},l.createElement(ce,Object.assign({},e,{confirmPrefixCls:O})))},gt=e=>{const{rootPrefixCls:n,iconPrefixCls:r,direction:t,theme:o}=e;return l.createElement(J,{prefixCls:n,iconPrefixCls:r,direction:t,theme:o},l.createElement(Ct,Object.assign({},e)))},ie=gt,S=[];let ue="";function fe(){return ue}const pt=e=>{var n,r;const{prefixCls:t,getContainer:o,direction:a}=e,C=Y(),f=l.useContext(A),c=fe()||f.getPrefixCls(),u=t||`${c}-modal`;let s=o;return s===!1&&(s=void 0),P.createElement(ie,Object.assign({},e,{rootPrefixCls:c,prefixCls:u,iconPrefixCls:f.iconPrefixCls,theme:f.theme,direction:a??f.direction,locale:(r=(n=f.locale)===null||n===void 0?void 0:n.Modal)!==null&&r!==void 0?r:C,getContainer:s}))};function F(e){const n=Fe(),r=document.createDocumentFragment();let t=Object.assign(Object.assign({},e),{close:f,open:!0}),o;function a(){for(var u=arguments.length,s=new Array(u),i=0;i<u;i++)s[i]=arguments[i];const v=s.some(d=>d&&d.triggerCancel);e.onCancel&&v&&e.onCancel.apply(e,[()=>{}].concat(N(s.slice(1))));for(let d=0;d<S.length;d++)if(S[d]===f){S.splice(d,1);break}Me(r)}function C(u){clearTimeout(o),o=setTimeout(()=>{const s=n.getPrefixCls(void 0,fe()),i=n.getIconPrefixCls(),v=n.getTheme(),d=P.createElement(pt,Object.assign({},u));Re(P.createElement(J,{prefixCls:s,iconPrefixCls:i,theme:v},n.holderRender?n.holderRender(d):d),r)})}function f(){for(var u=arguments.length,s=new Array(u),i=0;i<u;i++)s[i]=arguments[i];t=Object.assign(Object.assign({},t),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),a.apply(this,s)}}),t.visible&&delete t.visible,C(t)}function c(u){typeof u=="function"?t=u(t):t=Object.assign(Object.assign({},t),u),C(t)}return C(t),S.push(f),{destroy:f,update:c}}function me(e){return Object.assign(Object.assign({},e),{type:"warning"})}function de(e){return Object.assign(Object.assign({},e),{type:"info"})}function Ce(e){return Object.assign(Object.assign({},e),{type:"success"})}function ge(e){return Object.assign(Object.assign({},e),{type:"error"})}function pe(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function vt(e){let{rootPrefixCls:n}=e;ue=n}var xt=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const bt=(e,n)=>{var r,{afterClose:t,config:o}=e,a=xt(e,["afterClose","config"]);const[C,f]=l.useState(!0),[c,u]=l.useState(o),{direction:s,getPrefixCls:i}=l.useContext(A),v=i("modal"),d=i(),y=()=>{var m;t(),(m=c.afterClose)===null||m===void 0||m.call(c)},g=function(){f(!1);for(var m=arguments.length,x=new Array(m),O=0;O<m;O++)x[O]=arguments[O];const j=x.some(h=>h&&h.triggerCancel);c.onCancel&&j&&c.onCancel.apply(c,[()=>{}].concat(N(x.slice(1))))};l.useImperativeHandle(n,()=>({destroy:g,update:m=>{u(x=>Object.assign(Object.assign({},x),m))}}));const b=(r=c.okCancel)!==null&&r!==void 0?r:c.type==="confirm",[p]=D("Modal",Be.Modal);return l.createElement(ie,Object.assign({prefixCls:v,rootPrefixCls:d},c,{close:g,open:C,afterClose:y,okText:c.okText||(b?p==null?void 0:p.okText:p==null?void 0:p.justOkText),direction:c.direction||s,cancelText:c.cancelText||(p==null?void 0:p.cancelText)},a))},yt=l.forwardRef(bt);let U=0;const Ot=l.memo(l.forwardRef((e,n)=>{const[r,t]=Ke();return l.useImperativeHandle(n,()=>({patchElement:t}),[]),l.createElement(l.Fragment,null,r)}));function Pt(){const e=l.useRef(null),[n,r]=l.useState([]);l.useEffect(()=>{n.length&&(N(n).forEach(C=>{C()}),r([]))},[n]);const t=l.useCallback(a=>function(f){var c;U+=1;const u=l.createRef();let s;const i=new Promise(b=>{s=b});let v=!1,d;const y=l.createElement(yt,{key:`modal-${U}`,config:a(f),ref:u,afterClose:()=>{d==null||d()},isSilent:()=>v,onConfirm:b=>{s(b)}});return d=(c=e.current)===null||c===void 0?void 0:c.patchElement(y),d&&S.push(d),{destroy:()=>{function b(){var p;(p=u.current)===null||p===void 0||p.destroy()}u.current?b():r(p=>[].concat(N(p),[b]))},update:b=>{function p(){var m;(m=u.current)===null||m===void 0||m.update(b)}u.current?p():r(m=>[].concat(N(m),[p]))},then:b=>(v=!0,i.then(b))}},[]);return[l.useMemo(()=>({info:t(de),success:t(Ce),error:t(ge),warning:t(me),confirm:t(pe)}),[]),l.createElement(Ot,{key:"modal-holder",ref:e})]}var ht=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const Et=e=>{const{prefixCls:n,className:r,closeIcon:t,closable:o,type:a,title:C,children:f,footer:c}=e,u=ht(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:s}=l.useContext(A),i=s(),v=n||s("modal"),d=ee(i),[y,g,b]=ne(v,d),p=`${v}-confirm`;let m={};return a?m={closable:o??!1,title:"",footer:"",children:l.createElement(ce,Object.assign({},e,{prefixCls:v,confirmPrefixCls:p,rootPrefixCls:i,content:f}))}:m={closable:o??!0,title:C,footer:c!==null&&l.createElement(se,Object.assign({},e)),children:f},y(l.createElement(Xe,Object.assign({prefixCls:v,className:T(g,`${v}-pure-panel`,a&&p,a&&`${p}-${a}`,r,b,d)},u,{closeIcon:re(v,t),closable:o},m)))},$t=Ue(Et);function ve(e){return F(me(e))}const E=ae;E.useModal=Pt;E.info=function(n){return F(de(n))};E.success=function(n){return F(Ce(n))};E.error=function(n){return F(ge(n))};E.warning=ve;E.warn=ve;E.confirm=function(n){return F(pe(n))};E.destroyAll=function(){for(;S.length;){const n=S.pop();n&&n()}};E.config=vt;E._InternalPanelDoNotUseOrYouWillBeFired=$t;const Wt=E;export{Wt as M};
