import{r as l,c as i,j as e,K as p}from"./app-TSCJxQcm.js";import{L as f}from"./loading-C5DZ6xul.js";import{M as g}from"./modal-C4qk2BAO.js";import{S as y}from"./select-CSu-TQw1.js";import{c as x}from"./tickets-service-bhpJOmPK.js";import"./transition-DTOMHl2m.js";import"./dialog-GUf22TXE.js";const b=[{value:null,name:null},{value:"Ghost Call",name:"Ghost Call"},{value:"Unable to assist Non-English Speaker",name:"Unable to assist Non-English Speaker"},{value:"Referred to French Queue",name:"Referred to French Queue"},{value:"Disconnect call",name:"Disconnect call"},{value:"Shipping Damage",name:"Shipping Damage"},{value:"Resolved",name:"Resolved"},{value:"No Part Available",name:"No Part Available"},{value:"Has Existing Ticket",name:"Has Existing Ticket"},{value:"No BOS",name:"No BOS"},{value:"Customer Not Interested",name:"Customer Not Interested"},{value:"Bounced Back Email",name:"Bounced Back Email"},{value:"Customer Disposed of the Unit",name:"Customer Disposed of the Unit"},{value:"Cosmetic, Dead Pixel and Mold Issue",name:"Cosmetic, Dead Pixel and Mold Issue"},{value:"OOW - Physical Damage",name:"OOW - Physical Damage"},{value:"OOW - Beyond Warranty Period",name:"OOW - Beyond Warranty Period"},{value:"Referred to Store",name:"Referred to Store"},{value:"Non-Curtis Product",name:"Non-Curtis Product"},{value:"Sales",name:"Sales"},{value:"Ghost Call",name:"Ghost Call"},{value:"General Inquiry",name:"General Inquiry"},{value:"Tech Call Resolved",name:"Tech Call Resolved"},{value:"Customer didn't send the destroyed photos within 30 days.",name:"Customer didn't send the destroyed photos within 30 days."},{value:"Customer didn't respond within 7 days.",name:"Customer didn't respond within 7 days."},{value:"Customer didn't respond within 30 days.",name:"Customer didn't respond within 30 days."},{value:"Not a Valid retailer.",name:"Not a Valid retailer."},{value:"Refurbished",name:"Refurbished"},{value:"RMA Issued",name:"RMA Issued"},{value:"Unit returned",name:"Unit returned"},{value:"Provided troubleshooting steps (Resolved)",name:"Provided troubleshooting steps (Resolved)"},{value:"Refund/replacement issued (store)",name:"Refund/replacement issued (store)"},{value:"No Fault Found",name:"No Fault Found"},{value:"Unit working again",name:"Unit working again"},{value:"Used / Resold",name:"Used / Resold"},{value:"Declined (Not Warranty Related)",name:"Declined (Not Warranty Related)"}];function P({data:n}){const[u,o]=l.useState(!1),[d,t]=l.useState(!1),[s,m]=l.useState(""),{user:c}=i(a=>a.app),{ticket:v}=i(a=>a.tickets);async function r(a){if(a.preventDefault(),t(!0),s)try{await x(n,s,{...c,...v}),t(!1),p.visit(`/administrator/tickets/details/${n.id}#files`)}catch{t(!1)}else t(!1)}function h(a){m(a)}return console.log("reason",s),e.jsxs("div",{children:[e.jsx("button",{type:"button",onClick:()=>o(!0),className:"p-3 w-36 bg-red-500 text-white rounded-sm hover:to-red-600",children:"CLOSED"}),e.jsx(g,{open:u,setOpen:o,title:"Close Ticket",children:e.jsxs("form",{onSubmit:r,children:[e.jsxs("div",{className:"text-lg",children:["Ticket ID: ",n.ticket_id]}),"Are you sure you want to close the ticket?",e.jsx("div",{className:"my-4",children:e.jsx(y,{required:!0,onChange:h,name:"reason",value:s,label:"Reason to Close",errorMessage:"Reason is required",data:b.map(a=>({name:a.name,value:a.value}))})}),e.jsxs("div",{className:"flex border-gray-200 rounded-b  mt-3.5",children:[e.jsx("button",{onClick:r,type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center  ",children:d?e.jsx("div",{className:"py-1.5",children:e.jsx(f,{})}):"Yes, Proceed"}),e.jsx("button",{type:"button",className:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100     ",onClick:()=>o(!1),children:"Cancel"})]})]})})]})}export{P as default};
