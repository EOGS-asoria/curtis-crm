import{c as N,u as g,r as j,j as e,M as u,K as c}from"./app-C2_z-zPJ.js";import{I as i}from"./input-BrQHDREa.js";import{S as A}from"./select-hhtCXNGb.js";import{s as m}from"./internals-service-B9kSbxh_.js";import{Q as p}from"./QueueListIcon-CrWHtB0d.js";import{T as w}from"./TrashIcon-898odpTS.js";function P(){const{ticket:l}=N(s=>s.tickets),d=g(),[a,o]=j.useState({internal_notes:"",ticket_id:l.id,parts:[{ticket_id:l.id,name:null,part_number:null,location:null,cost:null,status:null}]}),x=a.parts.find(s=>s.status=="Parts Not Available"||s.status=="Not Available - On Order")!==void 0;async function h(s){if(s.preventDefault(),x){const t=await m({...a,status:"AVAILABILITY"});d(u(t.status)),c.visit("#availability")}else if(l.warranty_status=="OOW"){const t=await m({...a,status:"AVAILABILITY"});d(u(t.status)),c.visit("#availability")}else{const t=await m({...a,status:"REPLACEMENT"});d(u(t.status)),c.visit("#replacement")}}function r(s,t,n){const b=[...a.parts];b[n][t]=s,o({...a,parts:b})}function v(){o({...a,parts:[...a.parts,{name:null,part_number:null,location:null,cost:null,status:"Parts Available"}]})}function f(s){const t=[...a.parts];t.splice(s,1),o({...a,parts:t})}return e.jsx("form",{onSubmit:h,children:e.jsxs("div",{className:"flex flex-col gap-4",children:[l.warranty_status=="IW"?e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",className:"flex items-center rounded-md mt-3 bg-white px-2.5 py-1.5 text-sm text-green-500 font-semibold shadow-sm ring-1 ring-inset ring-green-500",children:[e.jsx(p,{className:"h-5"}),e.jsx("span",{children:"IN WARRANTY"})]}),e.jsx("i",{"aria-hidden":"true",className:"v-icon notranslate v-icon--left mdi mdi-list-status theme--light"})]}):e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",className:"flex items-center rounded-md mt-3 bg-white px-2.5 py-1.5 text-sm text-blue-500 font-semibold shadow-sm ring-1 ring-inset ring-blue-500",children:[e.jsx(p,{className:"h-5"}),e.jsx("span",{children:"OUT OF WARRANTY"})]}),e.jsx("i",{"aria-hidden":"true",className:"v-icon notranslate v-icon--left mdi mdi-list-status theme--light"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"text-2xl",children:"Availability"}),e.jsx("button",{onClick:v,className:"p-3 bg-blue-600 hover:bg-blue-700 rounded-md text-white",children:"ADD ROW"})]}),a.parts.map((s,t)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(i,{ids:t,onChange:n=>r(n,"name",t),name:"name",span:"",required:!0,value:s.name??"",label:"Name",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(i,{ids:t,onChange:n=>r(n,"part_number",t),name:"part_number",span:"",required:!0,value:s.part_number??"",label:"Part Number",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(i,{ids:t,onChange:n=>r(n,"location",t),name:"location",span:"",required:!0,value:s.location??"",label:"Location",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(i,{ids:t,onChange:n=>r(n,"cost",t),name:"cost",span:"",required:!0,value:s.cost??"",label:"Cost",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(A,{ids:t,onChange:r,name:"status",required:!1,value:s.status??null,label:"status",errorMessage:"",data:[{value:"Parts Available",name:"Parts Available"},{value:"Parts Not Available",name:"Parts Not Available"},{value:"Not Available - On Order",name:"Not Available - On Order"}]})}),e.jsx("button",{className:"border border-red-500 rounded-md flex-none text-red-500 p-2.5",onClick:()=>f(t),children:e.jsx(w,{className:"h-6"})})]},t)),e.jsx("div",{children:e.jsx(i,{onChange:s=>o({...a,internal_notes:s}),name:"internal_notes",span:"",required:!1,value:(a==null?void 0:a.internal_notes)??"",label:"Internal Notes",type:"text"})}),l.warranty_status=="OOW"?e.jsx("button",{className:"p-3 rounded-md bg-green-500 hover:bg-green-600 text-white w-96",children:"PROCEED"}):x?e.jsx("button",{className:"p-3 rounded-md bg-green-500 hover:bg-green-600 text-white w-96",children:"PROCEED"}):e.jsx("button",{className:"p-3 rounded-md bg-green-500 hover:bg-green-600 text-white w-96",children:"MOVE TO REPLACEMENT"})]})})}export{P as default};
