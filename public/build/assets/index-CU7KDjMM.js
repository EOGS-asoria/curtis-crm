import{r as n,m as g}from"./page-CweAZ6u7.js";import{i as B,w,j as _,h as R,C as W,k as F,s as H,l as P}from"./asyncToGenerator-K0Ms1va-.js";import{a as V,i as G}from"./compact-item-BZnlbaCs.js";import{c as M}from"./reactNode-BWNDasVd.js";import{r as J,u as K}from"./render-BTwwxt8O.js";const Q=e=>{const{componentCls:t,colorPrimary:o}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${o})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},U=B("Wave",e=>[Q(e)]),x="ant-wave-target";function X(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function C(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&X(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function Y(e){const{borderTopColor:t,borderColor:o,backgroundColor:r}=getComputedStyle(e);return C(t)?t:C(o)?o:C(r)?r:null}function S(e){return Number.isNaN(e)?0:e}const Z=e=>{const{className:t,target:o,component:r}=e,i=n.useRef(null),[u,d]=n.useState(null),[f,h]=n.useState([]),[l,s]=n.useState(0),[m,p]=n.useState(0),[N,T]=n.useState(0),[$,L]=n.useState(0),[k,O]=n.useState(!1),E={left:l,top:m,width:N,height:$,borderRadius:f.map(c=>`${c}px`).join(" ")};u&&(E["--wave-color"]=u);function y(){const c=getComputedStyle(o);d(Y(o));const a=c.position==="static",{borderLeftWidth:b,borderTopWidth:v}=c;s(a?o.offsetLeft:S(-parseFloat(b))),p(a?o.offsetTop:S(-parseFloat(v))),T(o.offsetWidth),L(o.offsetHeight);const{borderTopLeftRadius:A,borderTopRightRadius:D,borderBottomLeftRadius:I,borderBottomRightRadius:q}=c;h([A,D,q,I].map(z=>S(parseFloat(z))))}if(n.useEffect(()=>{if(o){const c=w(()=>{y(),O(!0)});let a;return typeof ResizeObserver<"u"&&(a=new ResizeObserver(y),a.observe(o)),()=>{w.cancel(c),a==null||a.disconnect()}}},[]),!k)return null;const j=(r==="Checkbox"||r==="Radio")&&(o==null?void 0:o.classList.contains(x));return n.createElement(_,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(c,a)=>{var b;if(a.deadline||a.propertyName==="opacity"){const v=(b=i.current)===null||b===void 0?void 0:b.parentElement;K(v).then(()=>{v==null||v.remove()})}return!1}},c=>{let{className:a}=c;return n.createElement("div",{ref:i,className:R(t,{"wave-quick":j},a),style:E})})},ee=(e,t)=>{var o;const{component:r}=t;if(r==="Checkbox"&&!(!((o=e.querySelector("input"))===null||o===void 0)&&o.checked))return;const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",e==null||e.insertBefore(i,e==null?void 0:e.firstChild),J(n.createElement(Z,Object.assign({},t,{target:e})),i)},te=ee,oe=(e,t,o)=>{const{wave:r}=n.useContext(W),[,i,u]=F(),d=V(l=>{const s=e.current;if(r!=null&&r.disabled||!s)return;const m=s.querySelector(`.${x}`)||s,{showEffect:p}=r||{};(p||te)(m,{className:t,token:i,component:o,event:l,hashId:u})}),f=n.useRef();return l=>{w.cancel(f.current),f.current=w(()=>{d(l)})}},ne=oe,se=e=>{const{children:t,disabled:o,component:r}=e,{getPrefixCls:i}=n.useContext(W),u=n.useRef(null),d=i("wave"),[,f]=U(d),h=ne(u,R(d,f),r);if(g.useEffect(()=>{const s=u.current;if(!s||s.nodeType!==1||o)return;const m=p=>{!G(p.target)||!s.getAttribute||s.getAttribute("disabled")||s.disabled||s.className.includes("disabled")||s.className.includes("-leave")||h(p)};return s.addEventListener("click",m,!0),()=>{s.removeEventListener("click",m,!0)}},[o]),!g.isValidElement(t))return t??null;const l=H(t)?P(t.ref,u):u;return M(t,{ref:l})},le=se;export{x as T,le as W};
