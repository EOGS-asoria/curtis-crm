import{c as u,r as l,u as b,j as e,M as w,K as p,s as _}from"./app-CgJ615g0.js";import{T as d}from"./textarea-DADq_ba7.js";import{p as S}from"./refund-service-CBZ3piz4.js";import{u as C}from"./tickets-thunk-DLsLnnKF.js";import{I as i}from"./input-BLOnVv90.js";import{L as h}from"./loading-B8duRbET.js";import"./tickets-service-CPD4WbDX.js";import"./internals-service-B9kSbxh_.js";function R(){const{internals:f,ticket:t}=u(s=>s.tickets),{user:g}=u(s=>s.app),[m,c]=l.useState(!1),[j,o]=l.useState(!1),y=b(),[r,x]=l.useState({});l.useEffect(()=>{var s,n;x({...t,...t.receipt??{},...t.refund??{},notes:((s=t==null?void 0:t.replacement)==null?void 0:s.notes)??"",tracking:((n=t==null?void 0:t.replacement)==null?void 0:n.tracking)??"",ticket_id:t.id})},[t]);function a(s,n){x({...r,[n]:s})}async function N(){if(confirm("Are you sure you want to shipped the ticket?")){c(!0);try{const s=await S({...r,account:g,status:"PROCESSED TICKET"});y(w(s.status)),c(!1),p.visit("#files")}catch{c(!1)}}}async function v(){if(confirm("Are you sure you want to move in refund?")){o(!0);try{await _.dispatch(C(t.id,"REFUND")),o(!1),p.visit("#refund")}catch{o(!0)}}}return e.jsxs("div",{className:"bg-white h-full px-3",children:[e.jsx("div",{className:"flex flex-col mt-6 ",children:e.jsx("div",{children:e.jsx("div",{className:"w-full py-2",children:e.jsx("div",{className:"overflow-hidden border border-gray-200  md:rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 ",children:[e.jsx("thead",{className:"",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 px-4 text-sm font-normal text-left ",children:e.jsx("button",{className:"flex items-center gap-x-3 focus:outline-none",children:e.jsx("span",{children:"Name"})})}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left ",children:"Part Number"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left ",children:"Location"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left ",children:"Cost"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left ",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 ",children:f.map((s,n)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4 text-sm font-medium whitespace-nowrap",children:e.jsx("div",{children:e.jsx("h2",{className:"font-medium text-gray-800",children:s.name})})}),e.jsx("td",{className:"px-4 py-4 text-sm font-medium whitespace-nowrap",children:e.jsx("div",{className:"inline  py-1 text-sm font-normal rounded-full",children:s.part_number})}),e.jsx("td",{className:"px-4 py-4 text-sm whitespace-nowrap",children:e.jsx("div",{children:e.jsx("h4",{className:"text-gray-700 ",children:s.location})})}),e.jsx("td",{className:"px-4 py-4 text-sm whitespace-nowrap",children:e.jsx("div",{children:e.jsx("h4",{className:"text-gray-700 ",children:s.cost})})}),e.jsx("td",{className:"px-4 py-4 text-sm whitespace-nowrap",children:e.jsx("div",{children:e.jsx("h4",{className:"text-gray-700 ",children:s.status})})})]},n))})]})})})})}),e.jsxs("div",{className:"mt-3 w-full",children:[e.jsx("h1",{className:"mt-2",children:"Parts Internal Remarks/Notes:"}),e.jsx(d,{disabled:!0,value:t.validation_notes,type:"text",className:"w-full"})]}),e.jsxs("div",{className:"mt-3 w-full",children:[e.jsx("h1",{children:"Updates from Curtis Notes:"}),e.jsx(d,{type:"text",disabled:!0,value:t.internal_notes,className:"w-full"})]}),e.jsxs("div",{className:"mt-5 my-4 w-full",children:[e.jsxs("div",{className:"px-4 py-2 sm:grid sm:grid-cols-2 sm:gap-4 sm:px-0",children:[e.jsx(i,{onChange:a,name:"unit",span:"",required:!0,value:String(r.unit??" "),label:"Unit",type:"text",errorMessage:"Unit is required"}),e.jsx(i,{onChange:a,name:"brand",span:"",required:!0,value:String(r.brand??" "),label:"Brand",type:"text",errorMessage:"Brand is required"})]}),e.jsxs("div",{className:"px-4 py-2 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[e.jsx(i,{onChange:a,name:"item_number",span:"",required:!0,value:String(r.item_number??" "),label:"model",type:"text",errorMessage:"model is required"}),e.jsx(i,{onChange:a,name:"serial_number",span:"",required:!0,value:String(r.serial_number??" "),label:"Serial",type:"text",errorMessage:"Serial is required"}),e.jsx(i,{onChange:a,name:"tracking",span:"",required:!0,value:String(r.tracking??" "),label:"Tracking",type:"text",errorMessage:"Tracking is required"})]}),e.jsx("div",{className:"px-4 py-2 sm:grid sm:grid-cols-1 sm:gap-4 sm:px-0",children:e.jsx(d,{required:!0,onChange:a,name:"notes",value:String(r.notes??" "),label:"Resource Notes:",type:"text",errorMessage:"notes is required"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{disabled:m,onClick:N,type:"button",className:"inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-green-700 rounded-lg hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 ",children:m?e.jsx(h,{}):"REPLACEMENT SHIPPED"}),e.jsx("button",{onClick:v,type:"button",className:"inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-red-700 rounded-lg hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 ",children:j?e.jsx(h,{}):"REPLACEMENT NOT SHIPPED"})]})]})]})}export{R as default};
