import{r as o,j as n}from"./page-EyzXAhb2.js";import{u as B}from"./app-BoARuBDM.js";import{v as I}from"./tickets-service-Dunbvx0i.js";import{h as j}from"./page-Bo3kZyp0.js";import{B as p}from"./button-Do8pG0IX.js";import{M as O}from"./index-PgXl2RRn.js";import{R as c}from"./index-LTCDyJOo.js";import{S as F}from"./index-Xy-qA0Ee.js";import"./index-Dg3TDmqI.js";import"./asyncToGenerator-BOeTS--j.js";import"./compact-item-C4QiIX_P.js";import"./render-CIbJdaKW.js";import"./CheckCircleFilled-CEXmMutE.js";import"./pickAttrs-CGF9Z32s.js";import"./InfoCircleFilled-DFWFMqkD.js";import"./useZIndex-BsCy_S9R.js";import"./motion-4S5rSXvC.js";import"./Modal-BCzRs-K0.js";import"./index-DfMGir4r.js";import"./index-C2qcYPSx.js";import"./KeyCode-DNlgD2sM.js";import"./fade-Bpic9XR9.js";import"./zoom-VXQO8UJ9.js";import"./ContextIsolator-D6goScqD.js";import"./useClosable-17v5m331.js";import"./useCSSVarCls-v-gt6yKH.js";import"./useLocale-BqQ4LUtM.js";import"./PurePanel-Bmz218qJ.js";import"./Overflow-CTim8bVk.js";import"./useIcons-C_vm_bdW.js";function ra({selected:h}){const[v,l]=o.useState(!1),[w,f]=o.useState(!1);B(t=>t.tickets);const[e,D]=o.useState("all"),[u,E]=o.useState([]),d=[{id:0,name:"Date Created"},{id:1,name:"Date Last Updated"},{id:2,name:"Ticket #"},{id:3,name:"First Name"},{id:4,name:"Last Name"},{id:5,name:"Phone"},{id:6,name:"Email"},{id:7,name:"Serial #"},{id:8,name:"Model #"},{id:9,name:"Unit"},{id:10,name:"Item Class"},{id:11,name:"Brand"},{id:12,name:"Resolution"},{id:13,name:"Purchase Date"},{id:14,name:"Zipcode"},{id:15,name:"Country"},{id:16,name:"State"},{id:17,name:"City"},{id:18,name:"Address"},{id:19,name:"Issue"},{id:20,name:"Ticket Status"},{id:21,name:"Reason"},{id:22,name:"Discount"},{id:23,name:"Price After Discount"},{id:24,name:"Purchase Price"},{id:25,name:"Cost Price"},{id:26,name:"Shipping Cost"},{id:27,name:"Replacement Ship Date"},{id:28,name:"Tracking #"},{id:29,name:"Cheque Ship Date"},{id:30,name:"Cheque #"},{id:31,name:"Cheque Amount"},{id:32,name:"Cheque Currency"},{id:33,name:"Retail Store"}],b=t=>{console.log("selected ",t),E(t)},R=t=>{console.log("radio checked",t.target.value),D(t.target.value)},q=()=>{f(!0)},M=async()=>{l(!0);const t=await I(window.location.search);async function N(a){if(e=="all")return t.data;if(e=="uncheck")return t.data.filter(i=>!h.includes(i.id));if(e=="checked")return t.data.filter(i=>h.includes(i.id))}async function P(a){if(e=="all")return d;if(e=="uncheck")return d.filter(i=>!u.includes(i.id));if(e=="checked")return d.filter(i=>u.includes(i.id))}const L=(await N()).map(a=>{var i,m,_,s,r,k,C,x,g,S,y;return{0:{id:0,name:j(a.created_at).format("L")},1:{id:1,name:j(a.updated_at).format("L")},2:{id:2,name:(a==null?void 0:a.ticket_id)??"N/A"},3:{id:3,name:(a==null?void 0:a.fname)??"N/A"},4:{id:4,name:(a==null?void 0:a.lname)??"N/A"},5:{id:5,name:(a==null?void 0:a.phone)??"N/A"},6:{id:6,name:(a==null?void 0:a.email)??"N/A"},7:{id:7,name:(a==null?void 0:a.serial_number)??"N/A"},8:{id:8,name:(a==null?void 0:a.item_number)??"N/A"},9:{id:9,name:(a==null?void 0:a.unit)??"N/A"},10:{id:10,name:(a==null?void 0:a.class)??"N/A"},11:{id:11,name:(a==null?void 0:a.brand)??"N/A"},12:{id:12,name:(a==null?void 0:a.call_type)??"N/A"},13:{id:13,name:(a==null?void 0:a.purchase_date)??"N/A"},14:{id:14,name:(a==null?void 0:a.zip_code)??"N/A"},15:{id:15,name:(a==null?void 0:a.country)??"N/A"},16:{id:16,name:(a==null?void 0:a.state)??"N/A"},17:{id:17,name:(a==null?void 0:a.city)??"N/A"},18:{id:18,name:(a==null?void 0:a.address)??"N/A"},19:{id:19,name:(a==null?void 0:a.issue)??"N/A"},20:{id:20,name:(a==null?void 0:a.status)??"N/A"},21:{id:21,name:(a==null?void 0:a.reason_to_close)??"N/A"},22:{id:22,name:((i=a.receipt)==null?void 0:i.discount)??"N/A"},23:{id:23,name:((m=a.decision_making)==null?void 0:m.after_discount)??"N/A"},24:{id:24,name:((_=a.receipt)==null?void 0:_.retailers_price)??"N/A"},25:{id:25,name:((s=a.decision_making)==null?void 0:s.cost_of_unit)??"N/A"},26:{id:26,name:((r=a.decision_making)==null?void 0:r.shipping_cost)??"N/A"},27:{id:27,name:((k=a.replacement)==null?void 0:k.ship_date)??"N/A"},28:{id:28,name:((C=a.replacement)==null?void 0:C.tracking)??"N/A"},29:{id:29,name:((x=a.refund)==null?void 0:x.ship_date)??"N/A"},30:{id:30,name:((g=a.refund)==null?void 0:g.cheque_no)??"N/A"},31:{id:31,name:((S=a.refund)==null?void 0:S.cheque_amount)??"N/A"},32:{id:32,name:(a.country=="CA"?"CAD":"USD")??"N/A"},33:{id:33,name:((y=a.receipt)==null?void 0:y.store)??"N/A"}}}),T=(await P()).sort((a,i)=>a.id-i.id),U=L.map(a=>u.map(i=>a[i]).sort((i,m)=>i.id-m.id));console.log("new_column",T),console.log("new_data",U),l(!1)},A=()=>{f(!1)};return o.useEffect(()=>{l(!1)},[]),n.jsxs("div",{children:[n.jsx(p,{type:"primary",onClick:q,children:"Export Case Files"}),n.jsxs(O,{title:"Export Data",open:w,footer:[n.jsx(p,{onClick:A,children:"Cancel"},"back"),n.jsx(p,{type:"primary",loading:v,onClick:M,children:"Submit"},"submit")],onCancel:A,children:[n.jsxs(c.Group,{onChange:R,value:e,children:[n.jsx(c,{value:"all",children:"Export All"}),n.jsx(c,{value:"checked",children:"Export Checked"}),n.jsx(c,{value:"uncheck",children:"Export Uncheck"})]}),n.jsx("div",{className:"font-bold py-2",children:"Select table column"}),n.jsx(F,{mode:"tags",style:{width:"100%"},placeholder:"select column",onChange:b,tokenSeparators:[","],options:d.map((t,N)=>({value:t.id,label:t.name}))})]})]})}export{ra as default};
