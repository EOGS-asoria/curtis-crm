import{c as u,u as R,r as l,j as e,M as A,K as S}from"./app-BSNI_i52.js";import{I as o}from"./input-BUaA6w3z.js";import{S as p}from"./select-DsZZ3LeN.js";import{s as I}from"./receipt-service-FGVQZ4fA.js";import{c as y}from"./product-search-D02tyvLD.js";import{L as E}from"./loading-CK6cN_BA.js";function T(){const{ticket:r}=u(t=>t.tickets),{user:x}=u(t=>t.app),m=R(),[h,f]=l.useState([]),[b,n]=l.useState(!1);l.useState(!1);const[a,c]=l.useState({store:"",retailers_price:"0",discount:"0",total_price:"0",refurbished:"true",notes:null});l.useEffect(()=>{async function t(i){const N=await y();f(N.map(d=>({name:d,value:d}))),r!=null&&r.receipt&&c({...r.receipt,id:r.id})}t()},[]);function s(t,i){c({...a,[i]:t})}async function g(){n(!0);try{const t=await I({...r,...a,emp_id:x.emp_id});m(A(t.status)),n(!1),S.visit("#decision")}catch{n(!1)}}function j(){}const v=["OOW","HAS PHYSICAL DAMAGE","REFURBISHED","UNAUTHORIZED RETAILER","NON-CURTIS PRODUCT (MODEL, SERIAL)","PHYSICAL DAMAGE - FRONT","PHYSICAL DAMAGE - BACK","SHIPPING DAMAGE","THIRD PARTY SELLER"];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"text-4xl font-black",children:"Receipt details"}),e.jsx(p,{onChange:s,name:"store",value:a.store,label:"Store Name",errorMessage:"Store Name is required",data:h}),e.jsx(o,{span:"$",onChange:s,name:"retailers_price",value:a.retailers_price,label:"Retailers Price",type:"text",errorMessage:"Retailers Price is required"}),e.jsx(o,{span:"$",onChange:s,name:"discount",value:a.discount,label:"Discount",type:"text",errorMessage:"Discount is required",readOnly:!0}),e.jsx(o,{span:"$",onChange:s,name:"total_price",value:parseFloat(a.retailers_price)-parseFloat(a.discount),label:"Total Price",type:"text",errorMessage:"Total Price is required",readOnly:!0}),e.jsx(p,{onChange:s,name:"refurbished",value:a.refurbished,label:"Refurbished Logo?",errorMessage:"Refurbished is required",data:[{value:"true",name:"Yes"},{value:"false",name:"No"}]}),e.jsx(o,{onChange:s,name:"notes",value:a.notes,label:"Validation Notes",type:"text",errorMessage:"Validation Notes is required"}),e.jsxs("div",{className:"flex flex-col bg-blue-700 text-white p-3 rounded-md gap-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:"Mark this Ticket Valid"}),e.jsx("div",{children:e.jsx("button",{onClick:g,className:"bg-gray-400 hover:bg-gray-300 text-blue-700 p-3 rounded-md font-black",children:b?e.jsx("div",{className:"p-2",children:e.jsx(E,{})}):"MARK VALID"})})]}),e.jsxs("div",{className:"flex flex-col bg-red-600 text-white p-3 rounded-md gap-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:"Mark this Ticket In-Valid"}),e.jsx("div",{className:"bg-white p-5 rounded-md text-black",children:e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsxs("select",{required:!1,onChange:t=>s(t.target.value,t.target.name),id:"reason",name:"reason",className:"peer text-black placeholder-transparent w-full py-2.5 px-5 border-gray-500 border bg-transparent rounded-sm bg-white focus-within:outline-none focus-within:border-blue-500",placeholder:"",children:[e.jsx("option",{selected:!0,disabled:!0}),v.map((t,i)=>e.jsx("option",{selected:`${a.reason}`==`${t}`,value:t,children:t},i))]}),e.jsx("label",{htmlFor:"reason",className:"absolute left-2.5 px-2.5 transition-all bg-white text-blue-black/60 text-sm -top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-500 peer-placeholder-shown:top-2.5 peer-focus:-top-3 peer-focus:text-sm peer-focus:text-blue-600 peer-focus:bg-white",children:"Select Reason"})]})})}),e.jsx("div",{children:e.jsx("button",{onClick:j,className:"bg-white hover:bg-gray-300 text-red-600 p-3 rounded-md font-black",children:"MARK INVALID"})})]})]})})}export{T as default};
