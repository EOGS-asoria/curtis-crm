import{c as g,u as j,r as N,j as e,K as m,H as x}from"./app-Bq_nMTlP.js";import{I as r}from"./input-FuC_ik0I.js";import{S as A}from"./select-BYHmifrs.js";import{s as b}from"./internals-service-B9kSbxh_.js";import{Q as p}from"./QueueListIcon-C2QFjAM9.js";import{T as w}from"./TrashIcon-CK1m4FbE.js";function I(){const{ticket:i}=g(s=>s.tickets),d=j(),[a,o]=N.useState({internal_notes:"",ticket_id:i.id,parts:[{ticket_id:i.id,name:null,part_number:null,location:null,cost:null,status:null}]}),u=a.parts.find(s=>s.status=="Parts Not Available"||s.status=="Not Available - On Order")!==void 0;async function h(s){if(s.preventDefault(),u){const t=await b({...a,status:"AVAILABILITY"});d(m(t.status)),x.visit("#availability")}else{const t=await b({...a,status:"REPLACEMENT"});d(m(t.status)),x.visit("#replacement")}}function l(s,t,n){const c=[...a.parts];c[n][t]=s,o({...a,parts:c})}function v(){o({...a,parts:[...a.parts,{name:null,part_number:null,location:null,cost:null,status:"Parts Available"}]})}function f(s){const t=[...a.parts];t.splice(s,1),o({...a,parts:t})}return e.jsx("form",{onSubmit:h,children:e.jsxs("div",{className:"flex flex-col gap-4",children:[i.warranty_status=="IW"?e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",className:"flex items-center rounded-md mt-3 bg-white px-2.5 py-1.5 text-sm text-green-500 font-semibold shadow-sm ring-1 ring-inset ring-green-500",children:[e.jsx(p,{className:"h-5"}),e.jsx("span",{children:"IN WARRANTY"})]}),e.jsx("i",{"aria-hidden":"true",class:"v-icon notranslate v-icon--left mdi mdi-list-status theme--light"})]}):e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",className:"flex items-center rounded-md mt-3 bg-white px-2.5 py-1.5 text-sm text-blue-500 font-semibold shadow-sm ring-1 ring-inset ring-blue-500",children:[e.jsx(p,{className:"h-5"}),e.jsx("span",{children:"OUT OF WARRANTY"})]}),e.jsx("i",{"aria-hidden":"true",class:"v-icon notranslate v-icon--left mdi mdi-list-status theme--light"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"text-2xl",children:"Availability"}),e.jsx("button",{onClick:v,className:"p-3 bg-blue-600 hover:bg-blue-700 rounded-md text-white",children:"ADD ROW"})]}),a.parts.map((s,t)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(r,{ids:t,onChange:n=>l(n,"name",t),name:"name",span:"",required:!0,value:s.name??"",label:"Name",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{ids:t,onChange:n=>l(n,"part_number",t),name:"part_number",span:"",required:!0,value:s.part_number??"",label:"Part Number",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{ids:t,onChange:n=>l(n,"location",t),name:"location",span:"",required:!0,value:s.location??"",label:"Location",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{ids:t,onChange:n=>l(n,"cost",t),name:"cost",span:"",required:!0,value:s.cost??"",label:"Cost",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(A,{ids:t,onChange:l,name:"status",required:!1,value:s.status??null,label:"status",errorMessage:"",data:[{value:"Parts Available",name:"Parts Available"},{value:"Parts Not Available",name:"Parts Not Available"},{value:"Not Available - On Order",name:"Not Available - On Order"}]})}),e.jsx("button",{className:"border border-red-500 rounded-md flex-none text-red-500 p-2.5",onClick:()=>f(t),children:e.jsx(w,{className:"h-6"})})]},t)),e.jsx("div",{children:e.jsx(r,{onChange:s=>o({...a,internal_notes:s}),name:"internal_notes",span:"",required:!0,value:(a==null?void 0:a.internal_notes)??"",label:"Internal Notes",type:"text"})}),i.warranty_status=="OOW"?e.jsx("button",{className:"p-3 rounded-md bg-green-500 hover:bg-green-600 text-white w-96",children:"PROCEED"}):u?e.jsx("button",{className:"p-3 rounded-md bg-green-500 hover:bg-green-600 text-white w-96",children:"PROCEED"}):e.jsx("button",{className:"p-3 rounded-md bg-green-500 hover:bg-green-600 text-white w-96",children:"MOVE TO REPLACEMENT"})]})})}export{I as default};
