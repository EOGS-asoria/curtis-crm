import{r as o,j as r,y as R}from"./page-C6ewWgfy.js";import{I as T}from"./input-DLF-09oq.js";import{T as P}from"./textarea-CVULyI33.js";import{u as w,a as q}from"./app-gcKz17gr.js";import{L as I}from"./loading-L_1fw_l-.js";import{r as N}from"./routing-BzgBYGmF.js";import"./index-C5nJQx1g.js";async function O(s){return(await axios.put("/api/repair/"+s.id,s)).data}async function F(s,i){return(await axios.put("/api/unrepair/"+s,i)).data}function Q(){var d,l,m,f,x,h,g,_,y,j,v,E,b,C;const[s,i]=o.useState({}),{ticket:e}=w(a=>a.tickets),{user:u}=w(a=>a.app),[A,n]=o.useState(!1),[S,c]=o.useState(!1);q(),o.useEffect(()=>{var a,t;i({...e.decision_making,repair_cost:((a=e==null?void 0:e.repair)==null?void 0:a.repair_cost)??e.repair_cost,notes:((t=e==null?void 0:e.repair)==null?void 0:t.notes)??e.notes,asc_data:e.asc})},[]);function p(a,t){i(t==="repair_cost"?{...s,repair_cost:a.replace(/[^0-9.]/g,"")}:{...s,[t]:a})}async function k(a){if(confirm("Are you sure you want to mark as repaired the ticket?")){n(!0);try{const t=await O({...s,account:u,status:"PROCESSED TICKET"});n(!1),R.visit(N("files"))}catch{n(!1)}}}async function D(a){if(confirm("Are you sure you want to mark as unrepair the ticket?")){c(!0);try{const t={...s,account:u,status:"NOT REPAIRED"},L=await F(s.ticket_id,t);console.log("result",L),c(!1),R.visit(N("decision"))}catch{c(!1)}}}return r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{children:["ASC Name: ",((l=(d=e.asc)==null?void 0:d.user)==null?void 0:l.name)??"None"]}),r.jsxs("div",{children:["Address: ",((f=(m=e.asc)==null?void 0:m.user)==null?void 0:f.address)??"",","," ",((h=(x=e.asc)==null?void 0:x.user)==null?void 0:h.city)??"",", ",((_=(g=e.asc)==null?void 0:g.user)==null?void 0:_.state)??"",","," ",((j=(y=e.asc)==null?void 0:y.user)==null?void 0:j.zip_code)??""," Canada"]}),r.jsxs("div",{children:["Email: ",((E=(v=e.asc)==null?void 0:v.user)==null?void 0:E.email)??""]}),r.jsxs("div",{children:["Phone: ",((C=(b=e.asc)==null?void 0:b.user)==null?void 0:C.phone)??""]}),r.jsx(T,{onChange:p,name:"repair_cost",required:!0,value:(s==null?void 0:s.repair_cost)??" ",label:"Repair Cost",type:"text",errorMessage:"Repair Cost is required"}),r.jsx(P,{required:!0,onChange:p,name:"notes",value:(s==null?void 0:s.notes)??" ",label:"notes",type:"text",errorMessage:"notes is required"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:k,className:"p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:A?r.jsx(I,{}):"REPAIRED"}),r.jsx("button",{onClick:D,className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-md",children:S?r.jsx(I,{}):" NOT REPAIRED"})]})]})}export{Q as default};
