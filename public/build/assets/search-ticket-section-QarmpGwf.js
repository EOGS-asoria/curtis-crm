import{r as s,j as e,y as d}from"./page-Z5sU5TGy.js";import{I as o}from"./input-CKkPdiX2.js";import{M as w}from"./modal-Bv1o8Niq.js";import{p as N}from"./tickets-service-C3Y2QQKd.js";import{u as y}from"./app-COs-urIx.js";import"./transition-_9IBQIr1.js";import"./dialog-C04vxtnn.js";import"./index-DsXjZlsd.js";function k({title:r,titleId:i,...l},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":i},l),r?s.createElement("title",{id:i},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}const _=s.forwardRef(k);function C({title:r,titleId:i,...l},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":i},l),r?s.createElement("title",{id:i},r):null,s.createElement("path",{d:"M8.25 10.875a2.625 2.625 0 1 1 5.25 0 2.625 2.625 0 0 1-5.25 0Z"}),s.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.125 4.5a4.125 4.125 0 1 0 2.338 7.524l2.007 2.006a.75.75 0 1 0 1.06-1.06l-2.006-2.007a4.125 4.125 0 0 0-3.399-6.463Z",clipRule:"evenodd"}))}const S=s.forwardRef(C);function O(){const[r,i]=s.useState(!1),[l,a]=s.useState({}),[x,u]=s.useState([]),{user:m}=y(t=>t.app),[p,h]=s.useState(null);async function f(t){t.preventDefault();const n=await N(l);u(n),h(Math.random())}function b(t){m.role_id==1?d.visit("/administrator/tickets?search="+t):m.role_id==6?d.visit("/curtis/tickets?search="+t):d.visit("/agent/tickets?search="+t)}function j(t){m.role_id==5?window.location.href="/agent/tickets/create":m.role_id==1&&(window.location.href="/administrator/tickets/create")}function g(t){const n=(""+t).replace(/\D/g,"");if(n.length!==10)return null;const c=n.match(/(\d{3})(\d{3})(\d{4})/);return c?`(${c[1]}) ${c[2]}-${c[3]}`:null}return e.jsxs("div",{children:[e.jsx("div",{children:e.jsxs("button",{onClick:()=>i(!0),className:"text-blue-400 flex items-center justify-center transition-colors duration-200 rounded-full bg-blue-50 hover:text-blue-600 hover:bg-blue-100 focus:outline-none focus:bg-blue-100 focus:ring-blue-800",children:[e.jsx(S,{className:"h-12 flex items-center justify-center"}),"Â "]})}),e.jsxs(w,{width:"max-w-7xl",position:"items-start",setOpen:i,open:r,title:"Lookup Ticket",children:[e.jsxs("form",{onSubmit:f,className:"flex flex-col gap-4 w-full",children:[e.jsx("div",{className:"flex w-full gap-5",children:e.jsx(o,{type:"text",onChange:t=>a({...l,ticket_id:t}),label:"Case File #",value:(l==null?void 0:l.ticket_id)??"",name:"ticket_id"})}),e.jsxs("div",{className:"flex w-full gap-5",children:[e.jsx(o,{type:"phone",onChange:t=>{var n;return a({...l,phone:g((n=t==null?void 0:t.replace(/ /g,""))==null?void 0:n.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"))})},label:"Phone",value:(l==null?void 0:l.phone)??"",name:"phone"}),e.jsx(o,{type:"text",onChange:t=>a({...l,email:t}),label:"Email",value:(l==null?void 0:l.email)??"",name:"email"})]}),e.jsxs("div",{className:"flex w-full gap-5",children:[e.jsx(o,{type:"text",onChange:t=>a({...l,serial_number:t}),label:"Serial #",value:(l==null?void 0:l.serial_number)??"",name:"serial_number"}),e.jsx(o,{type:"text",onChange:t=>a({...l,item_number:t}),label:"Model",value:(l==null?void 0:l.item_number)??"",name:"item_number"})]}),e.jsxs("div",{className:"flex w-full gap-5",children:[e.jsx(o,{type:"text",onChange:t=>a({...l,fname:t}),label:"First Name",value:(l==null?void 0:l.fname)??"",name:"fname"}),e.jsx(o,{type:"text",onChange:t=>a({...l,lname:t}),label:"Last Name",value:(l==null?void 0:l.lname)??"",name:"lname"})]}),e.jsxs("div",{className:"bg-gray-50 sm:flex sm:flex-row-reverse ",children:[e.jsx("button",{type:"Submit",className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 sm:ml-3 sm:w-auto",children:"Search"}),e.jsx("button",{type:"button",onClick:()=>setIsModalOpen(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Cancel"})]})]}),e.jsx("div",{className:"py-4 flex justify-center",children:e.jsx("table",{className:"w-full text-md mb-4",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-3 px-5",children:"Ticket ID"}),e.jsx("th",{className:"text-left p-3 px-5",children:"Email"}),e.jsx("th",{className:"text-left p-3 px-5",children:"Phone"}),e.jsx("th",{className:"text-left p-3 px-5",children:"Fullname"}),e.jsx("th",{className:"text-left p-3 px-5",children:"Resolution"}),e.jsx("th",{className:"text-left p-3 px-5",children:"Issue"}),e.jsx("th",{className:"text-left p-3 px-5",children:"Action"})]}),x.length==0&&l!==""&&p!==null&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-red-500 font-black",children:"No Record Found."}),e.jsx("div",{className:"my-8",children:e.jsx("div",{className:" flex items-start justify-start",children:e.jsx("button",{onClick:()=>j(),className:"p-3 bg-blue-500 text-white hover:bg-blue-600 rounded-md",children:"CREATE TICKET"})})})]}),x.map((t,n)=>e.jsxs("tr",{className:"border-b hover:bg-blue-100 ",children:[e.jsx("td",{className:"p-3 px-5",children:t.ticket_id}),e.jsx("td",{className:"p-3 px-5",children:t.email}),e.jsx("td",{className:"p-3 px-5",children:t.phone}),e.jsxs("td",{className:"p-3 px-5",children:[t.fname," ",t.lname]}),e.jsx("td",{className:"p-3 px-5",children:t.call_type}),e.jsx("td",{className:"p-3 px-5",children:JSON.parse(t.issue).map((c,v)=>e.jsx("div",{children:c},v))}),e.jsx("td",{className:"p-3 px-5",children:e.jsx("button",{onClick:()=>b(t.ticket_id),children:e.jsx(_,{className:"h-6 text-blue-600"})})})]},n))]})})})]})]})}export{O as default};
