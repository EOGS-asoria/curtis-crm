import{r as u,j as t,T as k,a as j,y as w}from"./page-ch7AsIzP.js";import"./main-DhAuVyDq.js";import{h as y}from"./page-CfrH9CDr.js";import{a as T,u as b}from"./app-CJn4l9yD.js";import A from"./tickets-selected-export-section-CCb7L7Fv.js";import{T as v}from"./index--oIHhosj.js";import{T as x}from"./index-DCbwBG5a.js";import{P as S}from"./Pagination-Bm6Hm1NH.js";import{F as N}from"./CheckBadgeIcon-XVqg4xu7.js";import"./index-k6KU01t5.js";import"./tickets-service-CeNgp2sm.js";import"./xlsx-769MyM77.js";import"./button-Qo8-TZ9g.js";import"./asyncToGenerator-1G8vEj8s.js";import"./compact-item-DdTtj5So.js";import"./render-BVKagQI8.js";import"./index-BACUEx04.js";import"./CheckCircleFilled-Decm9dyN.js";import"./pickAttrs-SrrbshNR.js";import"./InfoCircleFilled-eQBaOCtc.js";import"./useZIndex-CaQg4lWk.js";import"./motion-4S5rSXvC.js";import"./Modal-4B6JKVfO.js";import"./index-B88Ejp4W.js";import"./index-mf6ioYG1.js";import"./KeyCode-DNlgD2sM.js";import"./fade-BRA5nTkl.js";import"./zoom-DSCnx-FX.js";import"./ContextIsolator-DeP6EsIi.js";import"./useClosable-CLTPwS5-.js";import"./useCSSVarCls-ChRbnEBV.js";import"./useLocale-De3Ei8eB.js";import"./PurePanel-CteU8erQ.js";import"./index-CnKFXJpZ.js";import"./index-CUqrCOI5.js";import"./Overflow-2UsTlSiO.js";import"./useIcons-DJhXt3_u.js";import"./roundedArrow-h4_nGq_s.js";import"./RightOutlined-Bn1y2NHY.js";import"./useForceUpdate-DWGiqKc7.js";import"./index-COKiwZ4G.js";function L(...a){return a.filter(Boolean).join(" ")}function P({data:a,columns:r,isCheckbox:l,dataChecked:s,setDataChecked:h,isStatus:c}){const o=u.useRef(),[f,g]=u.useState(!1),[d,m]=u.useState(!1),e=T();return u.useLayoutEffect(()=>{const i=s.length>0&&s.length<a.length;g(s.length===a.length),m(i),o.current.indeterminate=i},[s]),t.jsx("div",{className:"flow-root w-full shadow-2xl",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsx("div",{className:"inline-block min-w-full py-2 align-middle ",children:t.jsx("div",{className:"relative",children:t.jsxs("table",{className:"min-w-full table-fixed divide-y divide-gray-300",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[l&&t.jsx("th",{scope:"col",className:"relative px-7 sm:w-12 sm:px-6",children:t.jsx("input",{type:"checkbox",disabled:!0,checked:!1,className:"absolute hidden left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",ref:o})}),r.map((i,n)=>t.jsx("th",{scope:"col",className:"min-w-[8rem] py-3.5 pr-3 text-left text-sm font-semibold text-gray-900",children:i.title},n))]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:a.map((i,n)=>t.jsxs("tr",{className:s.includes(i.id)?"bg-gray-50":void 0,children:[l&&t.jsxs("td",{className:"relative px-7 sm:w-12 sm:px-6",children:[s.includes(i.id)&&t.jsx("div",{className:"absolute inset-y-0 left-0 w-0.5 bg-indigo-600"}),c&&t.jsx("input",{type:"checkbox",className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",value:i.id,checked:s.includes(i.id),onChange:p=>e(k(p.target.checked?[...s,i.id]:s.filter(I=>I!==i.id)))})]}),r.map(p=>t.jsx("td",{className:L("whitespace-nowrap py-4 pr-3 text-sm font-medium",s.includes(i)?"text-indigo-600":"text-gray-900"),children:i[p.key]},p.key))]},n))})]})})})})})}function jt(){var m;const{tickets:a,selectedRowKeys:r}=b(e=>e.tickets),l=(m=a==null?void 0:a.data)==null?void 0:m.map(e=>({...e,key:e.id,ticket_id:(()=>{function i(n){return n.call_type=="TS-Tech Support"?t.jsxs(j,{className:"underline",href:"/administrator/tickets/details/"+e.id+"/status",children:[e.pr&&t.jsx(N,{className:"h-6 text-green-600"}),e.ticket_id]}):t.jsxs(j,{className:"underline",href:"/administrator/tickets/details/"+e.id+"/files",children:[e.pr&&t.jsx(N,{className:"h-6 text-green-600"}),e.ticket_id]})}return t.jsx(v,{placement:"topLeft",title:"View Ticket Details",children:i(e)})})(),fullname:t.jsxs("div",{children:[e.fname," ",e.lname]}),issue:t.jsx(x,{color:"blue",children:e.issue}),status:(()=>{const i=e.status==="CLOSED"?"red":e.status==="PARTS VALIDATION"||e.status==="WARRANTY VALIDATION"||e.status==="TECH VALIDATION"||e.status==null?"orange":"green";return t.jsxs(t.Fragment,{children:[t.jsx(x,{color:i,children:e.status==="PARTS VALIDATION"||e.status==="WARRANTY VALIDATION"||e.status==="TECH VALIDATION"||e.status==null?"OPEN":e.status}),e.is_reply&&t.jsxs(x,{color:"purple",children:["Customer has responded on"," ",y(e.email_date).format("LL")]})]})})(),isUploading:(()=>{const i=e.isUploading=="true"?"green":"red";return t.jsx(t.Fragment,{children:t.jsx(x,{color:i,children:e.isUploading=="true"?"UPLOADED":"PENDING"},e.id)})})(),created_at:t.jsx("div",{children:y(e.created_at).format("LL")})})),s=[{title:"Ticket ID",dataIndex:"ticket_id",key:"ticket_id"},{title:"Fullname",dataIndex:"fullname",key:"fullname"},{title:"Email",dataIndex:"email",key:"email"},{title:"Resolution",dataIndex:"call_type",key:"call_type"},{title:"Issue",dataIndex:"issue",key:"issue"},{title:"Status",dataIndex:"status",key:"status"},{title:"IsUpload",dataIndex:"isUploading",key:"isUploading"},{title:"Created At",dataIndex:"created_at",key:"created_at"}],h=window.location.pathname+window.location.search,c=(e,i)=>new URLSearchParams(e.split("?")[1]).get(i),o=c(h,"page"),f=o?parseInt(o,10):1,g=e=>{const i=new URLSearchParams(window.location.search);i.set("page",e);const n=window.location.pathname+"?"+i.toString();w.visit(n)},d=c(h,"status");return console.log("isStatus",d),t.jsxs(t.Fragment,{children:[d&&t.jsx(A,{selected:r}),l&&t.jsxs(t.Fragment,{children:[t.jsx(P,{isStatus:d,columns:s,data:l,dataChecked:r,isCheckbox:!0}),t.jsx("div",{className:"py-4 bg-white w-full flex items-center justify-end",children:t.jsx(S,{onChange:g,defaultCurrent:f,total:a.total,showSizeChanger:!1})})]})]})}export{jt as default};
