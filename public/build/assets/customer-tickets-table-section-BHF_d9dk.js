import{c as C,r as h,j as s,d as j}from"./app-CERM6Z__.js";import{H as E}from"./main-DqCNLhTD.js";import{h as L}from"./moment-Cl4UOzQZ.js";import"./list-DhL-EaBS.js";import{T as N,a as p,b as O,E as R,I as _,S as w,c as I}from"./index-CK0j-d6k.js";import{B as u}from"./button-GPUZktRT.js";function F(){const{tickets:r}=C(t=>t.customer_tickets),o=window.location.search.split("=")[1];let n=[];o=="CLOSED"?n=function(e){return r.filter(a=>a.status==e)}(o):o=="PROCESSED"?n=function(){return r.filter(e=>e.status!="PARTS VALIDATION"&&e.status!="WARRANTY VALIDATION"&&e.status!="TECH VALIDATION"&&e.status!="CLOSED")}():o=="PENDING"?n=function(){return r.filter(e=>e.isUploading=="false")}():n=r;const[T,d]=h.useState(""),[A,m]=h.useState(""),f=h.useRef(null),g=(t,e,a)=>{e(),d(t[0]),m(a)},k=t=>{t(),d("")},i=t=>({filterDropdown:({setSelectedKeys:e,selectedKeys:a,confirm:l,clearFilters:x,close:D})=>s.jsxs("div",{style:{padding:8},onKeyDown:c=>c.stopPropagation(),children:[s.jsx(_,{ref:f,placeholder:`Search ${t}`,value:a[0],onChange:c=>e(c.target.value?[c.target.value]:[]),onPressEnter:()=>g(a,l,t),style:{marginBottom:8,display:"block"}}),s.jsxs(w,{children:[s.jsx(u,{type:"primary",onClick:()=>g(a,l,t),icon:s.jsx(I,{}),size:"small",style:{width:90},children:"Search"}),s.jsx(u,{onClick:()=>x&&k(x),size:"small",style:{width:90},children:"Reset"}),s.jsx(u,{type:"link",size:"small",onClick:()=>{l({closeDropdown:!1}),d(a[0]),m(t)},children:"Filter"}),s.jsx(u,{type:"link",size:"small",onClick:()=>{D()},children:"close"})]})]}),filterIcon:e=>s.jsx(I,{style:{color:e?"#1677ff":void 0}}),onFilter:(e,a)=>a[t].toString().toLowerCase().includes(e.toLowerCase()),onFilterDropdownOpenChange:e=>{e&&setTimeout(()=>{var a;return(a=f.current)==null?void 0:a.select()},100)},render:e=>A===t?s.jsx(E,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[T],autoEscape:!0,textToHighlight:e?e.toString():""}):e}),y=n??[].map((t,e)=>({...t,key:t.id})),S=[{title:"Ticket ID",dataIndex:"ticket_id",key:"ticket_id",...i("ticket_id")},{title:"Fullname",dataIndex:"fullname",key:"fullname",...i("fullname"),render:(t,e,a)=>s.jsxs("div",{color:"red",children:[e.fname," ",e.lname]},a)},{title:"Email",dataIndex:"email",key:"email",...i("email")},{title:"Resolution",dataIndex:"call_type",key:"call_type",...i("call_type")},{title:"Issue",dataIndex:"issue",key:"issue",...i("issue"),render:(t,e,a)=>s.jsx(p,{color:"blue",children:JSON.parse(e.issue)},a)},{title:"Status",dataIndex:"status",key:"status",...i("status"),render:(t,e,a)=>{const l=e.status=="CLOSED"?"red":e.status=="PARTS VALIDATION"||e.status=="WARRANTY VALIDATION"||e.status=="TECH VALIDATION"?"orange":"green";return s.jsx(s.Fragment,{children:s.jsx(p,{color:l,children:(e.status=="PARTS VALIDATION"||e.status=="WARRANTY VALIDATION"||e.status=="TECH VALIDATION")&&e.isUploading=="false"?"OPEN":e.status},a)})}},{title:"IsUpload",dataIndex:"isUploading",key:"isUploading",...i("isUploading"),render:(t,e,a)=>{const l=e.isUploading=="true"?"green":"red";return s.jsx(s.Fragment,{children:s.jsx(p,{color:l,children:e.isUploading=="true"?"UPLOADED":"PENDING"},a)})}},{title:"Created At",dataIndex:"status",key:"status",render:(t,e,a)=>s.jsx("div",{children:L(e.created_at).format("LLL")})},{title:"action",dataIndex:"action",render:(t,e)=>s.jsx(O,{placement:"topLeft",title:"View Ticket Details",children:s.jsx(j,{href:"/agent/tickets/"+e.id+"#files",children:s.jsx(R,{className:"text-lg text-blue-500"})})})}];return s.jsx(N,{columns:S,dataSource:y})}export{F as default};
