import{v as E,J as ne,o as oe,e as re,u as le,f as F,A as z,k as se,H as ce,C as N,K as ie,l as ae}from"./asyncToGenerator-C18cFw6p.js";import{r,G as S}from"./page-Z5sU5TGy.js";import{u as ue,r as fe}from"./render-BQQEJRcv.js";import{b as de,a as me,R as Ce}from"./InfoCircleFilled-CWKaTH7f.js";import{a as ge}from"./pickAttrs-MOvcmyil.js";import{C as ve,u as pe}from"./useZIndex-CRqTedde.js";import{g as B}from"./motion-4S5rSXvC.js";import{B as be,a as xe}from"./button-CcKkq-wh.js";import{a as H,b as ye,M as W,F as Oe,r as he}from"./Modal-CQRGTdOk.js";import{p as Pe,a as $e,u as Ee,P as je}from"./index-BwBgY9Ku.js";import{u as _}from"./useLocale-Ben_uRP3.js";import{w as Te}from"./Overflow-D8zuMvtU.js";function Se(){const[e,n]=r.useState([]),l=r.useCallback(t=>(n(o=>[].concat(E(o),[t])),()=>{n(o=>o.filter(i=>i!==t))}),[]);return[e,l]}function M(e){return!!(e!=null&&e.then)}const V=e=>{const{type:n,children:l,prefixCls:t,buttonProps:o,close:i,autoFocus:g,emitEvent:u,isSilent:c,quitOnNullishReturnValue:d,actionFn:s}=e,f=r.useRef(!1),v=r.useRef(null),[p,y]=ne(!1),m=function(){i==null||i.apply(void 0,arguments)};r.useEffect(()=>{let a=null;return g&&(a=setTimeout(()=>{var x;(x=v.current)===null||x===void 0||x.focus()})),()=>{a&&clearTimeout(a)}},[]);const b=a=>{M(a)&&(y(!0),a.then(function(){y(!1,!0),m.apply(void 0,arguments),f.current=!1},x=>{if(y(!1,!0),f.current=!1,!(c!=null&&c()))return Promise.reject(x)}))},C=a=>{if(f.current)return;if(f.current=!0,!s){m();return}let x;if(u){if(x=s(a),d&&!M(x)){f.current=!1,m(a);return}}else if(s.length)x=s(i),f.current=!1;else if(x=s(),!M(x)){m();return}b(x)};return r.createElement(be,Object.assign({},xe(n),{onClick:C,loading:p,prefixCls:t},o,{ref:v}),l)},k=()=>{const{autoFocusButton:e,cancelButtonProps:n,cancelTextLocale:l,isSilent:t,mergedOkCancel:o,rootPrefixCls:i,close:g,onCancel:u,onConfirm:c}=r.useContext(H);return o?S.createElement(V,{isSilent:t,actionFn:u,close:function(){g==null||g.apply(void 0,arguments),c==null||c(!1)},autoFocus:e==="cancel",buttonProps:n,prefixCls:`${i}-btn`},l):null},A=()=>{const{autoFocusButton:e,close:n,isSilent:l,okButtonProps:t,rootPrefixCls:o,okTextLocale:i,okType:g,onConfirm:u,onOk:c}=r.useContext(H);return S.createElement(V,{isSilent:l,type:g||"primary",actionFn:c,close:function(){n==null||n.apply(void 0,arguments),u==null||u(!0)},autoFocus:e==="ok",buttonProps:t,prefixCls:`${o}-btn`},i)},we=e=>{const{componentCls:n,titleFontSize:l,titleLineHeight:t,modalConfirmIconSize:o,fontSize:i,lineHeight:g,modalTitleHeight:u,fontHeight:c,confirmBodyPadding:d}=e,s=`${n}-confirm`;return{[s]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${s}-body-wrapper`]:Object.assign({},re()),[`&${n} ${n}-body`]:{padding:d},[`${s}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(c).sub(o).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(u).sub(o).equal()).div(2).equal()}},[`${s}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS},[`${e.iconCls} + ${s}-paragraph`]:{maxWidth:`calc(100% - ${le(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${s}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:l,lineHeight:t},[`${s}-content`]:{color:e.colorText,fontSize:i,lineHeight:g},[`${s}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${s}-error ${s}-body > ${e.iconCls}`]:{color:e.colorError},[`${s}-warning ${s}-body > ${e.iconCls},
        ${s}-confirm ${s}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${s}-info ${s}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${s}-success ${s}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},Ie=oe(["Modal","confirm"],e=>{const n=$e(e);return[we(n)]},Pe,{order:-1e3});var Fe=function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};function q(e){const{prefixCls:n,icon:l,okText:t,cancelText:o,confirmPrefixCls:i,type:g,okCancel:u,footer:c,locale:d}=e,s=Fe(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let f=l;if(!l&&l!==null)switch(g){case"info":f=r.createElement(Ce,null);break;case"success":f=r.createElement(me,null);break;case"error":f=r.createElement(ge,null);break;default:f=r.createElement(de,null)}const v=u??g==="confirm",p=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[y]=_("Modal"),m=d||y,b=t||(v?m==null?void 0:m.okText:m==null?void 0:m.justOkText),C=o||(m==null?void 0:m.cancelText),a=Object.assign({autoFocusButton:p,cancelTextLocale:C,okTextLocale:b,mergedOkCancel:v},s),x=r.useMemo(()=>a,E(Object.values(a))),O=r.createElement(r.Fragment,null,r.createElement(k,null),r.createElement(A,null)),P=e.title!==void 0&&e.title!==null,j=`${i}-body`;return r.createElement("div",{className:`${i}-body-wrapper`},r.createElement("div",{className:F(j,{[`${j}-has-title`]:P})},f,r.createElement("div",{className:`${i}-paragraph`},P&&r.createElement("span",{className:`${i}-title`},e.title),r.createElement("div",{className:`${i}-content`},e.content))),c===void 0||typeof c=="function"?r.createElement(ye,{value:x},r.createElement("div",{className:`${i}-btns`},typeof c=="function"?c(O,{OkBtn:A,CancelBtn:k}):O)):c,r.createElement(Ie,{prefixCls:n}))}const Me=e=>{const{close:n,zIndex:l,afterClose:t,open:o,keyboard:i,centered:g,getContainer:u,maskStyle:c,direction:d,prefixCls:s,wrapClassName:f,rootPrefixCls:v,bodyStyle:p,closable:y=!1,closeIcon:m,modalRender:b,focusTriggerAfterClose:C,onConfirm:a,styles:x}=e,O=`${s}-confirm`,P=e.width||416,j=e.style||{},I=e.mask===void 0?!0:e.mask,T=e.maskClosable===void 0?!1:e.maskClosable,ee=F(O,`${O}-${e.type}`,{[`${O}-rtl`]:d==="rtl"},e.className),[,R]=se(),te=r.useMemo(()=>l!==void 0?l:R.zIndexPopupBase+ve,[l,R]);return r.createElement(W,{prefixCls:s,className:ee,wrapClassName:F({[`${O}-centered`]:!!e.centered},f),onCancel:()=>{n==null||n({triggerCancel:!0}),a==null||a(!1)},open:o,title:"",footer:null,transitionName:B(v||"","zoom",e.transitionName),maskTransitionName:B(v||"","fade",e.maskTransitionName),mask:I,maskClosable:T,style:j,styles:Object.assign({body:p,mask:c},x),width:P,zIndex:te,afterClose:t,keyboard:i,centered:g,getContainer:u,closable:y,closeIcon:m,modalRender:b,focusTriggerAfterClose:C},r.createElement(q,Object.assign({},e,{confirmPrefixCls:O})))},D=e=>{const{rootPrefixCls:n,iconPrefixCls:l,direction:t,theme:o}=e;return r.createElement(z,{prefixCls:n,iconPrefixCls:l,direction:t,theme:o},r.createElement(Me,Object.assign({},e)))},$=[];let G="";function Q(){return G}const Ne=e=>{var n,l;const{prefixCls:t,getContainer:o,direction:i}=e,g=ie(),u=r.useContext(N),c=Q()||u.getPrefixCls(),d=t||`${c}-modal`;let s=o;return s===!1&&(s=void 0),S.createElement(D,Object.assign({},e,{rootPrefixCls:c,prefixCls:d,iconPrefixCls:u.iconPrefixCls,theme:u.theme,direction:i??u.direction,locale:(l=(n=u.locale)===null||n===void 0?void 0:n.Modal)!==null&&l!==void 0?l:g,getContainer:s}))};function w(e){const n=ce(),l=document.createDocumentFragment();let t=Object.assign(Object.assign({},e),{close:u,open:!0}),o;function i(){for(var d,s=arguments.length,f=new Array(s),v=0;v<s;v++)f[v]=arguments[v];if(f.some(m=>m==null?void 0:m.triggerCancel)){var y;(d=e.onCancel)===null||d===void 0||(y=d).call.apply(y,[e,()=>{}].concat(E(f.slice(1))))}for(let m=0;m<$.length;m++)if($[m]===u){$.splice(m,1);break}ue(l)}function g(d){clearTimeout(o),o=setTimeout(()=>{const s=n.getPrefixCls(void 0,Q()),f=n.getIconPrefixCls(),v=n.getTheme(),p=S.createElement(Ne,Object.assign({},d));fe(S.createElement(z,{prefixCls:s,iconPrefixCls:f,theme:v},n.holderRender?n.holderRender(p):p),l)})}function u(){for(var d=arguments.length,s=new Array(d),f=0;f<d;f++)s[f]=arguments[f];t=Object.assign(Object.assign({},t),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),i.apply(this,s)}}),t.visible&&delete t.visible,g(t)}function c(d){typeof d=="function"?t=d(t):t=Object.assign(Object.assign({},t),d),g(t)}return g(t),$.push(u),{destroy:u,update:c}}function X(e){return Object.assign(Object.assign({},e),{type:"warning"})}function J(e){return Object.assign(Object.assign({},e),{type:"info"})}function K(e){return Object.assign(Object.assign({},e),{type:"success"})}function Y(e){return Object.assign(Object.assign({},e),{type:"error"})}function Z(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Re(e){let{rootPrefixCls:n}=e;G=n}var Be=function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};const ke=(e,n)=>{var l,{afterClose:t,config:o}=e,i=Be(e,["afterClose","config"]);const[g,u]=r.useState(!0),[c,d]=r.useState(o),{direction:s,getPrefixCls:f}=r.useContext(N),v=f("modal"),p=f(),y=()=>{var a;t(),(a=c.afterClose)===null||a===void 0||a.call(c)},m=function(){var a;u(!1);for(var x=arguments.length,O=new Array(x),P=0;P<x;P++)O[P]=arguments[P];if(O.some(T=>T==null?void 0:T.triggerCancel)){var I;(a=c.onCancel)===null||a===void 0||(I=a).call.apply(I,[c,()=>{}].concat(E(O.slice(1))))}};r.useImperativeHandle(n,()=>({destroy:m,update:a=>{d(x=>Object.assign(Object.assign({},x),a))}}));const b=(l=c.okCancel)!==null&&l!==void 0?l:c.type==="confirm",[C]=_("Modal",ae.Modal);return r.createElement(D,Object.assign({prefixCls:v,rootPrefixCls:p},c,{close:m,open:g,afterClose:y,okText:c.okText||(b?C==null?void 0:C.okText:C==null?void 0:C.justOkText),direction:c.direction||s,cancelText:c.cancelText||(C==null?void 0:C.cancelText)},i))},Ae=r.forwardRef(ke);let L=0;const Le=r.memo(r.forwardRef((e,n)=>{const[l,t]=Se();return r.useImperativeHandle(n,()=>({patchElement:t}),[]),r.createElement(r.Fragment,null,l)}));function ze(){const e=r.useRef(null),[n,l]=r.useState([]);r.useEffect(()=>{n.length&&(E(n).forEach(g=>{g()}),l([]))},[n]);const t=r.useCallback(i=>function(u){var c;L+=1;const d=r.createRef();let s;const f=new Promise(b=>{s=b});let v=!1,p;const y=r.createElement(Ae,{key:`modal-${L}`,config:i(u),ref:d,afterClose:()=>{p==null||p()},isSilent:()=>v,onConfirm:b=>{s(b)}});return p=(c=e.current)===null||c===void 0?void 0:c.patchElement(y),p&&$.push(p),{destroy:()=>{function b(){var C;(C=d.current)===null||C===void 0||C.destroy()}d.current?b():l(C=>[].concat(E(C),[b]))},update:b=>{function C(){var a;(a=d.current)===null||a===void 0||a.update(b)}d.current?C():l(a=>[].concat(E(a),[C]))},then:b=>(v=!0,f.then(b))}},[]);return[r.useMemo(()=>({info:t(J),success:t(K),error:t(Y),warning:t(X),confirm:t(Z)}),[]),r.createElement(Le,{key:"modal-holder",ref:e})]}var He=function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};const We=e=>{const{prefixCls:n,className:l,closeIcon:t,closable:o,type:i,title:g,children:u,footer:c}=e,d=He(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:s}=r.useContext(N),f=s(),v=n||s("modal"),p=pe(f),[y,m,b]=Ee(v,p),C=`${v}-confirm`;let a={};return i?a={closable:o??!1,title:"",footer:"",children:r.createElement(q,Object.assign({},e,{prefixCls:v,confirmPrefixCls:C,rootPrefixCls:f,content:u}))}:a={closable:o??!0,title:g,footer:c!==null&&r.createElement(Oe,Object.assign({},e)),children:u},y(r.createElement(je,Object.assign({prefixCls:v,className:F(m,`${v}-pure-panel`,i&&C,i&&`${C}-${i}`,l,b,p)},d,{closeIcon:he(v,t),closable:o},a)))},_e=Te(We);function U(e){return w(X(e))}const h=W;h.useModal=ze;h.info=function(n){return w(J(n))};h.success=function(n){return w(K(n))};h.error=function(n){return w(Y(n))};h.warning=U;h.warn=U;h.confirm=function(n){return w(Z(n))};h.destroyAll=function(){for(;$.length;){const n=$.pop();n&&n()}};h.config=Re;h._InternalPanelDoNotUseOrYouWillBeFired=_e;export{h as M};
