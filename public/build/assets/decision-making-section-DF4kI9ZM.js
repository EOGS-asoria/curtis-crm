import{c as u,r as d,u as q,j as e,O as E,K as R}from"./app-DbqSk6fa.js";import{I as a}from"./input-CkDS0Kkf.js";import{S as x}from"./select-3HiL75FT.js";import{a as A}from"./user-service-CxqgyNEf.js";import{L as _}from"./loading-CBnS27aP.js";import{g as k}from"./fedex-rate-service-C5N1557v.js";import{W as M}from"./wysiwyg-AnJ1VG7V.js";import{G as S,S as D}from"./Squares2X2Icon-Btl0qCjQ.js";async function F(l){return(await axios.post("/api/decision_making",l)).data}async function P(l){return(await axios.get("/api/decision_making/"+l)).data}function H(){const{user:l}=u(t=>t.app),{asc:c,ticket:i}=u(t=>t.tickets),[s,n]=d.useState({}),j=q(),[g,p]=d.useState(!1),[v,h]=d.useState(!1),{email_templates:f}=u(t=>t.email_templates);d.useEffect(()=>{async function t(o){var b,y;const m=await P(i.id);m.status?n({...i,...m.status,id:i.id,user_id:l.id,emp_id:l.emp_id}):n({...i,ticket_type:"REPLACEMENT",retailers_price:((b=i.receipt)==null?void 0:b.retailers_price)??"0",discount:((y=i.receipt)==null?void 0:y.discount)??"0",id:i.id,user_id:l.id,emp_id:l.emp_id})}t()},[]);function r(t,o){o=="wysiwyg"?n({...s,template_text:t}):(t||t=="")&&o&&n({...s,[o]:t})}d.useEffect(()=>{async function t(){const o=await A(4);j(E(o.data))}t()},[]);async function N(){p(!0);try{const t=await k(s);n({...s,shipping_cost:`${parseFloat(t.rates.FEDEX_GROUND.PAYOR_ACCOUNT_PACKAGE).toFixed(2)}`,estimated_cost:`${(parseFloat(t.rates.FEDEX_GROUND.PAYOR_ACCOUNT_PACKAGE)+parseFloat(s.cost_of_unit??"0")).toFixed(2)}`})}catch{alert("No rates Found!")}p(!1)}function C(t){const o=f.find(m=>m.id==t);n({...s,template_text:o.template_text})}async function w(t){t.preventDefault(),h(!0),await F(s),R.visit("#warehouse"),h(!1)}return e.jsxs("form",{children:[e.jsxs("section",{className:"container bg-white",children:[e.jsxs("div",{className:"flex gap-3 mt-2 px-4",children:[e.jsxs("button",{type:"button",className:"flex items-center rounded-md mt-3 bg-white px-2.5 py-1.5 text-sm text-green-500 font-semibold shadow-sm ring-1 ring-inset ring-green-500 hover:bg-green-500 hover:text-gray-500",children:[e.jsx(S,{className:"h-5"}),e.jsx("span",{children:i.country})]}),e.jsxs("button",{type:"button",className:"flex items-center rounded-md mt-3 bg-white px-2.5 py-1.5 text-sm text-yellow-500 font-semibold shadow-sm ring-1 ring-inset ring-yellow-500 hover:bg-yellow-300 hover:text-gray-500",children:[e.jsx(D,{className:"h-5"}),e.jsx("span",{children:i.item_number})]})]}),e.jsx("div",{className:" my-5 mx-3",children:e.jsx("a",{href:"/administrator/google_map/"+i.id,target:"_blank",className:"p-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg",children:"OPEN ASC"})}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:" border-b border-gray-900/10 w-96",children:e.jsx("div",{className:"w-full flex justify-start px-4",children:e.jsx("div",{className:"flex items-start gap-x-3 mt-4 my-4 ",children:e.jsx("h1",{className:"text-2xl md:text-3xl pl-2 my-2 border-l-4  font-sans font-bold border-teal-400  ",children:"REPAIR"})})})}),e.jsx("div",{className:"container px-4 mx-auto",children:e.jsx("div",{className:"mt-4 mb-4 grid grid-cols-1 gap-x-6 gap-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-8 flex-1",children:[e.jsx(x,{onChange:r,name:"asc",required:!1,value:s.asc??"",label:"Select ASC",errorMessage:"",data:[{value:"",name:""},...c==null?void 0:c.map(t=>({value:t.id,name:t.name}))]}),e.jsx(a,{onChange:r,name:"repair_cost",span:"$",required:!1,value:s.repair_cost,label:"Repair Cost",type:"text",errorMessage:"Repair Cost is required"}),e.jsx(a,{onChange:r,name:"repair_notes",span:"",value:(s==null?void 0:s.repair_notes)??"",label:"Notes",type:"text"})]})})})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:" border-b border-gray-900/10 w-96",children:e.jsx("div",{className:"w-full flex justify-start px-4",children:e.jsx("div",{className:"flex items-start gap-x-3 mt-4 my-4 ",children:e.jsx("h1",{className:"text-2xl md:text-3xl pl-2 my-2 border-l-4  font-sans font-bold border-teal-400  ",children:"REFUND"})})})}),e.jsx("div",{className:"container px-4 mx-auto",children:e.jsx("div",{className:"mt-4 mb-4 grid grid-cols-1 gap-x-6 gap-y-8",children:e.jsxs("div",{className:"flex flex-col gap-6 ",children:[e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx(a,{onChange:r,name:"cost_refund",span:"$",required:!0,value:String(s.cost_refund??"0"),label:"Estimated Cost of Refund",type:"text",errorMessage:"Estimated Cost of Refund is required"}),e.jsx(a,{onChange:r,span:"$",name:"retailers_price",required:!1,value:(s==null?void 0:s.retailers_price)??" ",label:"Retailer's Price",type:"number",errorMessage:"Retailer's Price is required"}),e.jsx(a,{onChange:r,name:"discount",span:"$",required:!1,value:(s==null?void 0:s.discount)??" ",label:"Discount",type:"number",errorMessage:"Discount is required"}),e.jsx(a,{onChange:r,span:"$",name:"after_discount",required:!1,value:String(parseFloat(s==null?void 0:s.retailers_price)-parseFloat((s==null?void 0:s.discount)??"0")),label:"Price After Discount",type:"number",errorMessage:"Price After Discount is required",readOnly:!0})]}),e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx(a,{onChange:r,name:"cheque_no",required:!1,value:(s==null?void 0:s.cheque_no)??" ",label:"Cheque No.",type:"text",errorMessage:"Cheque No. is required"}),e.jsx(a,{onChange:r,name:"cheque_amount",span:"$",required:!1,value:(s==null?void 0:s.cheque_amount)??" ",label:"Cheque Amount",type:"number",errorMessage:"Cheque Amount is required"}),e.jsx(a,{onChange:r,name:"mail_date",value:(s==null?void 0:s.mail_date)??" ",label:"Mail Date",type:"date"})]}),e.jsx(a,{onChange:r,name:"refund_notes",span:"",required:!1,value:(s==null?void 0:s.refund_notes)??"",label:"Notes",type:"text"})]})})})]}),e.jsxs("div",{className:"flex ",children:[e.jsx("div",{className:" border-b border-gray-900/10 w-96",children:e.jsx("div",{className:"w-full flex justify-start px-4",children:e.jsx("div",{className:"flex items-start gap-x-3 mt-4 my-4 ",children:e.jsx("h1",{className:"text-2xl md:text-3xl pl-2 my-2 border-l-4  font-sans font-bold border-teal-400  ",children:"REPLACEMENT"})})})}),e.jsx("div",{className:"container px-4 mx-auto ",children:e.jsx("div",{className:"mt-4 mb-4 grid grid-cols-1 gap-x-6 gap-y-8",children:e.jsx("div",{className:"container  bg-white",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(a,{onChange:r,name:"cost_of_unit",span:"$",required:!1,value:(s==null?void 0:s.cost_of_unit)??"0",label:"Cost of Unit",type:"text",errorMessage:"Cost of Unit is required"}),e.jsx(a,{onChange:r,name:"cube_weight",required:!1,value:(s==null?void 0:s.cube_weight)??"0",label:"Cube Weight",type:"number",errorMessage:"Cube Weight is required"}),e.jsx("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Dimension"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(a,{onChange:r,name:"length",required:!1,value:(s==null?void 0:s.length)??"0",label:"Length",type:"number",errorMessage:"Length is required"}),e.jsx(a,{onChange:r,name:"width",required:!1,value:(s==null?void 0:s.width)??"0",label:"Width",type:"number",errorMessage:"Width is required"}),e.jsx(a,{onChange:r,name:"height",required:!1,value:(s==null?void 0:s.height)??"0",label:"Height",type:"number",errorMessage:"Height is required"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:N,type:"button",className:`w-96 flex items-center justify-center mr-12 py-2 ${g?"bg-blue-500":" bg-transparent  hover:bg-blue-50"}  text-blue-700 font-semibold px-4 border border-blue-500 rounded w-lg  shadow-sm shadow-black`,children:g?e.jsx(_,{}):"GET FEDEX RATES"}),e.jsx(a,{onChange:r,name:"shipping_cost",span:"$",required:!1,value:String(s==null?void 0:s.shipping_cost)??"0",label:"Shipping Cost",type:"number",errorMessage:"Shipping Cost is required"}),e.jsx(a,{onChange:r,name:"estimated_cost",span:"$",required:!1,value:String(s==null?void 0:s.estimated_cost)??"0",label:"Estimated Cost",type:"number",errorMessage:"Estimated Cost is required"})]}),e.jsx(x,{onChange:r,name:"instruction",required:!1,value:s.instruction??"",label:"Warranty Instruction",errorMessage:"",data:[{value:"",name:""},...s.country==="CA"?[{value:"CA Warehouse",name:"Return to (CA Warehouse)"}]:[],...s.country==="US"?[{value:"US Warehouse",name:"Return to (US Warehouse)"}]:[],{value:"home",name:"Destroy in Home"}]}),e.jsx(a,{onChange:r,name:"replacement_notes",span:"",value:(s==null?void 0:s.replacement_notes)??"",label:"Notes",type:"text"}),e.jsx(x,{onChange:C,name:"email_template",value:"",label:"Email Templates",errorMessage:"",data:f.map(t=>({name:t.template_name,value:t.id}))}),e.jsx(M,{label:"",name:"wysiwyg",value:(s==null?void 0:s.template_text)??null,onChange:r})]})})})})]})]}),e.jsxs("div",{className:"flex gap-5 my-12",children:[e.jsxs("div",{class:"flex items-center",children:[e.jsx("input",{checked:s.ticket_type=="REPLACEMENT",id:"default-radio-2",onChange:t=>n({...s,ticket_type:t.target.value}),type:"radio",value:"REPLACEMENT",name:"ticket_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 "}),e.jsx("label",{htmlFor:"default-radio-2",class:"ms-2 text-xl font-medium text-gray-900",children:"Replacement"})]}),e.jsxs("div",{class:"flex items-center",children:[e.jsx("input",{checked:s.ticket_type=="REFUND",id:"default-radio-3",onChange:t=>n({...s,ticket_type:t.target.value}),type:"radio",value:"REFUND",name:"ticket_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 "}),e.jsx("label",{htmlFor:"default-radio-3",class:"ms-2 text-xl font-medium text-gray-900",children:"Refund"})]}),e.jsxs("div",{class:"flex items-center ",children:[e.jsx("input",{checked:s.ticket_type=="REPAIR",id:"default-radio-1",onChange:t=>n({...s,ticket_type:t.target.value}),type:"radio",value:"REPAIR",name:"ticket_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 "}),e.jsx("label",{htmlFor:"default-radio-1",class:"ms-2 text-xl font-medium text-gray-900",children:"Repair"})]})]}),e.jsx("button",{onClick:w,className:"p-3 bg-blue-600 hover:bg-blue-700  w-full font-bold text-white rounded-sm ",children:v?e.jsx("div",{className:"p-1.5 flex items-center justify-center",children:e.jsx(_,{})}):"SUBMIT VALIDATION"})]})}export{H as default};
