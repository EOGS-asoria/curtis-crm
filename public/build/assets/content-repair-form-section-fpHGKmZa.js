import{r as o,c as E,u as L,j as r,K as R}from"./app-DbqSk6fa.js";import{I as T}from"./input-CkDS0Kkf.js";import{T as q}from"./textarea-DR9sBjFi.js";import{L as w}from"./loading-CBnS27aP.js";async function D(s){return(await axios.put("/api/repair/"+s.id,s)).data}async function P(s){return(await axios.put("/api/unrepair/"+s)).data}function z(){var d,p,l,m,f,x,h,g,_,j,y,v,b,C;const[s,i]=o.useState({}),{ticket:e}=E(a=>a.tickets),{user:I}=E(a=>a.app),[N,n]=o.useState(!1),[S,c]=o.useState(!1);L(),o.useEffect(()=>{var a,t;i({...e.decision_making,repair_cost:((a=e==null?void 0:e.repair)==null?void 0:a.repair_cost)??e.repair_cost,notes:((t=e==null?void 0:e.repair)==null?void 0:t.notes)??e.notes})},[]);function u(a,t){i(t==="repair_cost"?{...s,repair_cost:a.replace(/[^0-9.]/g,"")}:{...s,[t]:a})}async function k(a){if(confirm("Are you sure you want to mark as repaired the ticket?")){n(!0);try{const t=await D({...s,account:I,status:"PROCESSED TICKET"});n(!1),R.visit("#files")}catch{n(!1)}}}async function A(a){if(confirm("Are you sure you want to mark as unrepair the ticket?")){c(!0);try{const t=await P(s.ticket_id);console.log("result",t),c(!1),R.visit("#decision")}catch{c(!1)}}}return r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{children:["ASC Name: ",((p=(d=e.asc)==null?void 0:d.user)==null?void 0:p.name)??"None"]}),r.jsxs("div",{children:["Address: ",((m=(l=e.asc)==null?void 0:l.user)==null?void 0:m.address)??"",","," ",((x=(f=e.asc)==null?void 0:f.user)==null?void 0:x.city)??"",", ",((g=(h=e.asc)==null?void 0:h.user)==null?void 0:g.state)??"",","," ",((j=(_=e.asc)==null?void 0:_.user)==null?void 0:j.zip_code)??""," Canada"]}),r.jsxs("div",{children:["Email: ",((v=(y=e.asc)==null?void 0:y.user)==null?void 0:v.email)??""]}),r.jsxs("div",{children:["Phone: ",((C=(b=e.asc)==null?void 0:b.user)==null?void 0:C.phone)??""]}),r.jsx(T,{onChange:u,name:"repair_cost",required:!0,value:(s==null?void 0:s.repair_cost)??" ",label:"Repair Cost",type:"text",errorMessage:"Repair Cost is required"}),r.jsx(q,{required:!0,onChange:u,name:"notes",value:(s==null?void 0:s.notes)??" ",label:"notes",type:"text",errorMessage:"notes is required"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:k,className:"p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:N?r.jsx(w,{}):"REPAIRED"}),r.jsx("button",{onClick:A,className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-md",children:S?r.jsx(w,{}):" NOT REPAIRED"})]})]})}export{z as default};
