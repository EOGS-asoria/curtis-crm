import{r as o,c as R,u as L,j as a,K as w}from"./app-DP2tn-p0.js";import{I as T}from"./input-BRDAHh5c.js";import{T as P}from"./textarea-BNaGancZ.js";import{L as I}from"./loading-DQXX5rEV.js";async function q(s){return(await axios.put("/api/repair/"+s.id,s)).data}async function O(s,i){return(await axios.put("/api/unrepair/"+s,i)).data}function H(){var p,l,m,f,x,h,_,g,j,y,v,E,b,C;const[s,i]=o.useState({}),{ticket:e}=R(r=>r.tickets),{user:u}=R(r=>r.app),[N,n]=o.useState(!1),[A,c]=o.useState(!1);L(),o.useEffect(()=>{var r,t;i({...e.decision_making,repair_cost:((r=e==null?void 0:e.repair)==null?void 0:r.repair_cost)??e.repair_cost,notes:((t=e==null?void 0:e.repair)==null?void 0:t.notes)??e.notes,asc_data:e.asc})},[]);function d(r,t){i(t==="repair_cost"?{...s,repair_cost:r.replace(/[^0-9.]/g,"")}:{...s,[t]:r})}async function S(r){if(confirm("Are you sure you want to mark as repaired the ticket?")){n(!0);try{const t=await q({...s,account:u,status:"PROCESSED TICKET"});n(!1),w.visit("#files")}catch{n(!1)}}}async function k(r){if(confirm("Are you sure you want to mark as unrepair the ticket?")){c(!0);try{const t={...s,account:u,status:"NOT REPAIRED"},D=await O(s.ticket_id,t);console.log("result",D),c(!1),w.visit("#decision")}catch{c(!1)}}}return a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{children:["ASC Name: ",((l=(p=e.asc)==null?void 0:p.user)==null?void 0:l.name)??"None"]}),a.jsxs("div",{children:["Address: ",((f=(m=e.asc)==null?void 0:m.user)==null?void 0:f.address)??"",","," ",((h=(x=e.asc)==null?void 0:x.user)==null?void 0:h.city)??"",", ",((g=(_=e.asc)==null?void 0:_.user)==null?void 0:g.state)??"",","," ",((y=(j=e.asc)==null?void 0:j.user)==null?void 0:y.zip_code)??""," Canada"]}),a.jsxs("div",{children:["Email: ",((E=(v=e.asc)==null?void 0:v.user)==null?void 0:E.email)??""]}),a.jsxs("div",{children:["Phone: ",((C=(b=e.asc)==null?void 0:b.user)==null?void 0:C.phone)??""]}),a.jsx(T,{onChange:d,name:"repair_cost",required:!0,value:(s==null?void 0:s.repair_cost)??" ",label:"Repair Cost",type:"text",errorMessage:"Repair Cost is required"}),a.jsx(P,{required:!0,onChange:d,name:"notes",value:(s==null?void 0:s.notes)??" ",label:"notes",type:"text",errorMessage:"notes is required"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:S,className:"p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:N?a.jsx(I,{}):"REPAIRED"}),a.jsx("button",{onClick:k,className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-md",children:A?a.jsx(I,{}):" NOT REPAIRED"})]})]})}export{H as default};
