import{r as i,j as e,x as R,y as A}from"./store-0Qzhg5Cj.js";import{I as o}from"./input-CamLcvdJ.js";import{S as u}from"./select-BwWH4uaK.js";import{s as S}from"./receipt-service-BhUDOOgg.js";import{u as p,a as I}from"./app-ClHIDsKF.js";import{a as y}from"./product-search-CjdPs_Lo.js";import{L as E}from"./loading-9B-ceNpQ.js";import{r as k}from"./routing-BzgBYGmF.js";function _(){const{ticket:s}=p(t=>t.tickets),{user:m}=p(t=>t.app),x=I(),[h,f]=i.useState([]),[b,n]=i.useState(!1);i.useState(!1);const[a,c]=i.useState({store:"",retailers_price:"0",discount:"0",total_price:"0",refurbished:"true",notes:null});i.useEffect(()=>{async function t(l){const N=await y();f(N.map(d=>({name:d,value:d}))),s!=null&&s.receipt&&c({...s.receipt,id:s.id})}t()},[]);function r(t,l){c({...a,[l]:t})}async function g(){n(!0);try{const t=await S({...s,...a,emp_id:m.emp_id});x(R(t.status)),n(!1),A.visit(k("decision"))}catch{n(!1)}}function j(){}const v=["OOW","HAS PHYSICAL DAMAGE","REFURBISHED","UNAUTHORIZED RETAILER","NON-CURTIS PRODUCT (MODEL, SERIAL)","PHYSICAL DAMAGE - FRONT","PHYSICAL DAMAGE - BACK","SHIPPING DAMAGE","THIRD PARTY SELLER"];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"text-4xl font-black",children:"Receipt details"}),e.jsx(u,{onChange:r,name:"store",value:a.store,label:"Store Name",errorMessage:"Store Name is required",data:h}),e.jsx(o,{span:"$",onChange:r,name:"retailers_price",value:a.retailers_price,label:"Retailers Price",type:"text",errorMessage:"Retailers Price is required"}),e.jsx(o,{span:"$",onChange:r,name:"discount",value:a.discount,label:"Discount",type:"text",errorMessage:"Discount is required",readOnly:!0}),e.jsx(o,{span:"$",onChange:r,name:"total_price",value:parseFloat(a.retailers_price)-parseFloat(a.discount),label:"Total Price",type:"text",errorMessage:"Total Price is required",readOnly:!0}),e.jsx(u,{onChange:r,name:"refurbished",value:a.refurbished,label:"Refurbished Logo?",errorMessage:"Refurbished is required",data:[{value:"true",name:"Yes"},{value:"false",name:"No"}]}),e.jsx(o,{onChange:r,name:"notes",value:a.notes,label:"Validation Notes",type:"text",errorMessage:"Validation Notes is required"}),e.jsxs("div",{className:"flex flex-col bg-blue-700 text-white p-3 rounded-md gap-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:"Mark this Ticket Valid"}),e.jsx("div",{children:e.jsx("button",{onClick:g,className:"bg-gray-400 hover:bg-gray-300 text-blue-700 p-3 rounded-md font-black",children:b?e.jsx("div",{className:"p-2",children:e.jsx(E,{})}):"MARK VALID"})})]}),e.jsxs("div",{className:"flex flex-col bg-red-600 text-white p-3 rounded-md gap-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:"Mark this Ticket In-Valid"}),e.jsx("div",{className:"bg-white p-5 rounded-md text-black",children:e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsxs("select",{required:!1,onChange:t=>r(t.target.value,t.target.name),id:"reason",name:"reason",className:"peer text-black placeholder-transparent w-full py-2.5 px-5 border-gray-500 border bg-transparent rounded-sm bg-white focus-within:outline-none focus-within:border-blue-500",placeholder:"",children:[e.jsx("option",{selected:!0,disabled:!0}),v.map((t,l)=>e.jsx("option",{selected:`${a.reason}`==`${t}`,value:t,children:t},l))]}),e.jsx("label",{htmlFor:"reason",className:"absolute left-2.5 px-2.5 transition-all bg-white text-blue-black/60 text-sm -top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-500 peer-placeholder-shown:top-2.5 peer-focus:-top-3 peer-focus:text-sm peer-focus:text-blue-600 peer-focus:bg-white",children:"Select Reason"})]})})}),e.jsx("div",{children:e.jsx("button",{onClick:j,className:"bg-white hover:bg-gray-300 text-red-600 p-3 rounded-md font-black",children:"MARK INVALID"})})]})]})})}export{_ as default};
