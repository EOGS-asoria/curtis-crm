import{r as u,j as t,o as f,y as h}from"./store-BWfTG1Be.js";import{I as a}from"./input-DtZUTzcb.js";import{T as x}from"./textarea-gMG_kMOf.js";import{u as d,a as q}from"./app-CKeSoyrp.js";import{p as C}from"./refund-service-CBZ3piz4.js";import{L as _}from"./loading-pUvGrltr.js";import{r as j}from"./routing-BzgBYGmF.js";function k(){const[e,i]=u.useState({}),{ticket:n}=d(r=>r.tickets),{user:l}=d(r=>r.app),p=q(),[m,o]=u.useState(!1);u.useEffect(()=>{i({...n.decision_making??{},...n.refund??{}})},[n]);function s(r,c){c=="estimated_cost"?i({...e,estimated_cost:r.replace(/[^0-9.]/g,"")}):i({...e,[c]:r})}async function g(){if(confirm("Are you sure you want to shipped the ticket?")){o(!0);try{const r=await C({...e,account:l,status:"PROCESSED TICKET"});p(f(r.status)),o(!1),h.visit(j("files"))}catch{o(!1)}}}return t.jsxs("div",{className:"flex flex-col gap-8 my-12",children:[t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsx(a,{onChange:s,name:"retailers_price",span:"$",required:!0,value:String(e.retailers_price)??" ",label:"Retailer's Price",type:"number",errorMessage:"Retailers Price is required"}),t.jsx(a,{onChange:s,name:"discount",span:"$",required:!0,value:String(e.discount)??" ",label:"discount",type:"text",errorMessage:"Discount is required"}),t.jsx(a,{onChange:s,name:"after_discount",span:"$",required:!0,value:String(parseFloat(e==null?void 0:e.retailers_price)-parseFloat((e==null?void 0:e.discount)??"0")),label:"Price After Discount",type:"text",errorMessage:"Price After Discount is required"}),t.jsx(a,{onChange:s,name:"cost_refund",span:"$",required:!0,value:String(e.cost_refund??"0"),label:"Estimated Cost of Refund",type:"text",errorMessage:"Estimated Cost of Refund is required"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(a,{onChange:s,name:"cheque_no",required:!0,value:e.cheque_no??"0",label:"Cheque Number",type:"text",errorMessage:"Cheque Number is required"}),t.jsx(a,{onChange:s,name:"cheque_amount",span:"$",required:!0,value:e.cheque_amount??"0",label:"Cheque Amount",type:"text",errorMessage:"Cheque Amount is required"}),t.jsx("div",{className:" text-red-500",children:"Resource Notes: Refund is cheaper than replacement."})]}),t.jsx(x,{required:!0,onChange:s,name:"notes",value:e.notes??" ",label:"Resource Notes:",type:"text",errorMessage:"notes is required"}),t.jsx("button",{onClick:g,className:" rounded-sm bg-green-600 text-white text-bold hover:bg-green-700 flex items-center justify-center p-2.5",children:m?t.jsx(_,{}):"CHECKQUE SHIPPED"})]})}export{k as default};
