import{r as p,j as a}from"./page-B7YEiqrx.js";import{I as o}from"./input-B6YiN79z.js";import{S as u}from"./select-CCQrlLXZ.js";import{c as m}from"./country-BeeYPQZp.js";import{L as y}from"./loading-aO-113Bt.js";import{U as j}from"./index-Y3ZreNSD.js";import{B as b}from"./button-BR6W2XOx.js";import{R as q}from"./UploadOutlined-BzIAwJu9.js";import{s as C}from"./index-Cte1qDUo.js";import"./asyncToGenerator-CKSlC8u-.js";import"./index-BrB2z5_v.js";import"./pickAttrs-CNgFJlMh.js";import"./index-D_02Nnwn.js";import"./compact-item-Kxc4s5VZ.js";import"./index-cTOGFqQ4.js";import"./ContextIsolator-DuYzpelL.js";import"./useZIndex-CNdCrYm2.js";import"./motion-4S5rSXvC.js";import"./roundedArrow-hbaBwsyH.js";import"./zoom-CGtE5RPF.js";import"./fade-Bqgt69ZZ.js";import"./useForceUpdate-CAOttNqO.js";import"./DeleteOutlined-TP4DDT2b.js";import"./EyeOutlined-D4FQ-zvB.js";import"./InfoCircleFilled-Bi5SvdXL.js";import"./useLocale-BEnjLoJG.js";import"./render-9sDy1cht.js";import"./KeyCode-DNlgD2sM.js";async function v(e){return(await axios.post("/api/product_registration",e)).data}function X(){const[e,n]=p.useState({}),[d,l]=p.useState(!1);function c(r){const t=(""+r).replace(/\D/g,"");let i=t;return t.length===11&&(i=t.slice(0,-1)),i.length===10?i.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"):r}function s(r,t){if(t=="phone")n({...e,phone:c(r)});else if(t=="issue"){if(r.name){const i=`["${r.name}"]`;n({...e,issue:i})}}else t=="country"?n({...e,country:r,state:""}):n({...e,[t]:r})}async function f(r){l(!0),r.preventDefault();const t=new FormData;t.append("fname",e.fname),t.append("lname",e.lname),t.append("phone",e.phone),t.append("email",e.email),t.append("model",e.model),t.append("serial",e.serial),t.append("country",e.country),t.append("state",e.state),t.append("city",e.city),t.append("zipcode",e.zipcode),t.append("address1",e.address1),t.append("address2",e.address2),t.append("fname",e.fname),e.fileList.forEach(i=>{i.name!=="uploaded"&&i.status==="done"&&t.append("files[]",i.originFileObj)});try{await v(t),C.success("Product Registration Successfully!"),n({}),l(!1)}catch{l(!1)}}const x=r=>m.find(t=>t.value===r),{regions:h}=x((e==null?void 0:e.country)??"CA"),g={name:"file",method:"GET",action:"https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload",multiple:!0,headers:{authorization:"authorization-text"},onChange(r){n({...e,fileList:r.fileList})}};return console.log("form?.fileList",e),a.jsx("div",{children:a.jsxs("form",{onSubmit:f,className:" w-full px-8 pt-6 pb-8 mb-4 flex flex-col gap-3 ",children:[a.jsx("div",{className:"flex items-center justify-center font-black text-3xl",children:a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx("img",{src:"/images/logo.png"}),"Product Registration Form"]})}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx(o,{required:!0,onChange:s,name:"fname",value:e.fname,label:"First Name",type:"text",errorMessage:"First Name is required"}),a.jsx(o,{required:!0,onChange:s,name:"lname",value:e.lname,label:"Last Name",type:"text",errorMessage:"Last Name is required"})]}),a.jsx(o,{required:!0,onChange:s,name:"phone",value:e.phone,label:"Phone",type:"phone",errorMessage:"Phone is required"}),a.jsx(o,{required:!0,onChange:s,name:"email",value:e.email,label:"Email",type:"email",errorMessage:"Email is required"}),a.jsx(o,{required:!0,onChange:s,name:"model",value:e.model,label:"Model",type:"text",errorMessage:"Model is required"}),a.jsx(o,{required:!0,onChange:s,name:"serial",value:e.serial,label:"Serial",type:"text",errorMessage:"Serial is required"}),a.jsx(u,{onChange:s,name:"country",required:!0,value:e==null?void 0:e.country,label:"Country",data:m.map(r=>({name:r.name,value:r.value}))}),a.jsx(u,{onChange:s,name:"state",required:!0,value:e==null?void 0:e.state,label:"State",data:h}),a.jsx(o,{required:!0,onChange:s,name:"city",value:e.city,label:"City",type:"text",errorMessage:"City is required"}),a.jsx(o,{required:!0,onChange:s,name:"zipcode",value:e.zipcode,label:"Zip / Postal Code",type:"text",errorMessage:"Zipcode is required"}),a.jsx(o,{onChange:s,name:"address1",required:!0,value:e==null?void 0:e.address1,label:"Address 1",type:"text"}),a.jsx(o,{onChange:s,name:"address2",required:!1,value:e==null?void 0:e.address2,label:"Address 2",type:"text"}),a.jsx(j,{fileList:(e==null?void 0:e.fileList)??[],listType:"picture",...g,children:a.jsx(b,{icon:a.jsx(q,{}),children:"Click to Upload"})}),a.jsx("button",{disabled:d,className:"p-3 flex w-full items-center justify-center bg-blue-500 text-white rounded-sm hover:to-blue-600",children:d?a.jsx("div",{className:"py-1.5",children:a.jsx(y,{})}):"REGISTER"})]})]})})}export{X as default};
