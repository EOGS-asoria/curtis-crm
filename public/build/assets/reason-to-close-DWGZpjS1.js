import{r as i,j as o,y as b}from"./store-BiYASIpe.js";import{L as g}from"./loading-Buu9gU6B.js";import{M as h}from"./modal-DMDnVDQU.js";import{u as a}from"./app-DNiab8SY.js";import{r as v}from"./reason-BRIeM0DO.js";import{S as y}from"./select-sKYrE21b.js";import{b as k}from"./tickets-service-CJHvwIki.js";import{r as j}from"./routing-BzgBYGmF.js";import"./transition-DEHLXLHE.js";import"./dialog-mrHhB3BO.js";function T({data:s}){const[c,r]=i.useState(!1),[u,t]=i.useState(!1),[n,m]=i.useState(""),{user:f}=a(e=>e.app),{ticket:d}=a(e=>e.tickets);async function l(e){if(e.preventDefault(),t(!0),n)try{await k(s,n,{...f,...d}),t(!1),b.visit(j("details"))}catch{t(!1)}else t(!1)}function p(e){m(e)}console.log("data.name",s.remarks);function x(e){e.preventDefault(),s.fname==null||s.fname==""||s.fname==null||s.phone==null||s.phone==""||s.phone==null||s.remarks==null||s.remarks==""||s.remarks==null?alert("Name, Phone Number & Remarks must be required!"):r(!0)}return o.jsxs("div",{children:[o.jsx("button",{type:"button",onClick:e=>x(e),className:"p-3 w-36 bg-red-500 text-white rounded-sm hover:to-red-600",children:"CLOSE"}),o.jsx(h,{open:c,setOpen:r,title:"Close Ticket",children:o.jsxs("form",{onSubmit:l,children:[o.jsxs("div",{className:"text-lg",children:["Ticket ID: ",s.ticket_id]}),"Are you sure you want to close the ticket?",o.jsx("div",{className:"my-4",children:o.jsx(y,{required:!0,onChange:p,name:"reason",value:n,label:"Reason to Close",errorMessage:"Reason is required",data:v.map(e=>({name:e.name,value:e.value}))})}),o.jsxs("div",{className:"flex border-gray-200 rounded-b  mt-3.5",children:[o.jsx("button",{onClick:l,type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center  ",children:u?o.jsx("div",{className:"py-1.5",children:o.jsx(g,{})}):"Yes, Proceed"}),o.jsx("button",{type:"button",className:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100     ",onClick:()=>r(!1),children:"Cancel"})]})]})})]})}export{T as default};
