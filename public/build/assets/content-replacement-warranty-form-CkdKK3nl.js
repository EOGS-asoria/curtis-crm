import{c as d,r as o,u as j,j as e,M as v,L as m,s as N}from"./app-B7mB2LSM.js";import{T as _}from"./textarea-CMQBWZO2.js";import{p as k}from"./refund-service-CBZ3piz4.js";import{L as p}from"./loading-CSAY8QQC.js";import{I as a}from"./input-CpcX51qb.js";import{u as S}from"./tickets-thunk-QBEPYluG.js";import{h as C}from"./moment-Cl4UOzQZ.js";import"./tickets-service-WO5hKtUV.js";import"./internals-service-B9kSbxh_.js";function A(){const{internals:E,ticket:l}=d(t=>t.tickets),{user:g}=d(t=>t.app),[u,n]=o.useState(!1),[x,i]=o.useState(!1),f=j(),[s,c]=o.useState({});function r(t,b){c({...s,[b]:t})}async function h(){if(confirm("Are you sure you want to shipped the ticket?")){n(!0);try{const t=await k({...s,account:g,status:"PROCESSED TICKET"});f(v(t.status)),n(!1),m.visit("#files")}catch{n(!1)}}}async function y(){if(confirm("Are you sure you want to move in refund?")){i(!0);try{await N.dispatch(S(l.id,"REFUND")),i(!1),m.visit("#refund")}catch{i(!0)}}}return e.jsxs("div",{className:"bg-white h-full px-3",children:[e.jsxs("div",{className:"mt-10 w-full border-b-2 border-gray-600",children:[e.jsx("h1",{className:"mt-2",children:"Parts Internal Remarks/Notes:"}),l.validation_notes]}),e.jsxs("div",{className:"mt-5 my-4 w-full",children:[e.jsxs("div",{className:"my-3 flex flex-col",children:["Date:",e.jsx("input",{type:"date",className:"w-52",name:"ship_date",pattern:"\\d{1,2}/\\d{1,2}/\\d{4}",onChange:t=>c({...s,ship_date:C(t.target.value).format("L")})})]}),e.jsxs("div",{className:"px-4 py-2 sm:grid sm:grid-cols-2 sm:gap-4 sm:px-0",children:[e.jsx(a,{onChange:r,name:"unit",span:"",required:!0,value:String(s.unit??" "),label:"Unit",type:"text",errorMessage:"Unit is required"}),e.jsx(a,{onChange:r,name:"brand",span:"",required:!0,value:String(s.brand??" "),label:"Brand",type:"text",errorMessage:"Brand is required"})]}),e.jsxs("div",{className:"px-4 py-2 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[e.jsx(a,{onChange:r,name:"item_number",span:"",required:!0,value:String(s.item_number??" "),label:"model",type:"text",errorMessage:"model is required"}),e.jsx(a,{onChange:r,name:"serial_number",span:"",required:!0,value:String(s.serial_number??" "),label:"Serial",type:"text",errorMessage:"Serial is required"}),e.jsx(a,{onChange:r,name:"tracking",span:"",required:!0,value:String(s.tracking??" "),label:"Tracking",type:"text",errorMessage:"Tracking is required"})]}),e.jsx("div",{className:"px-4 py-2 sm:grid sm:grid-cols-1 sm:gap-4 sm:px-0",children:e.jsx(_,{required:!0,onChange:r,name:"notes",value:String(s.notes??" "),label:"Resource Notes:",type:"text",errorMessage:"notes is required"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{disabled:u,onClick:h,type:"button",className:"inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-green-700 rounded-lg hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 ",children:u?e.jsx(p,{}):"REPLACEMENT SHIPPED"}),e.jsx("button",{onClick:y,type:"button",className:"inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-red-700 rounded-lg hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 ",children:x?e.jsx(p,{}):"REPLACEMENT NOT SHIPPED"})]})]})]})}export{A as default};
