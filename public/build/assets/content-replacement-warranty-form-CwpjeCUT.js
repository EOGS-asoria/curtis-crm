import{c as m,r as o,u as j,j as e,K as v,H as p,s as S}from"./app-Bq_nMTlP.js";import{T as _}from"./textarea-Bnpl4hk2.js";import{p as E}from"./refund-service-CBZ3piz4.js";import{L as g}from"./loading-CBibllGi.js";import{I as a}from"./input-FuC_ik0I.js";import{u as N}from"./tickets-thunk-BosdMjLe.js";import"./tickets-service-BHWw0A67.js";import"./internals-service-B9kSbxh_.js";function R(){const{internals:k,ticket:r}=m(s=>s.tickets),{user:x}=m(s=>s.app),[c,u]=o.useState(!1),[f,l]=o.useState(!1),h=j(),[t,d]=o.useState({});o.useEffect(()=>{var s,i;d({...r,...r.receipt??{},...r.refund??{},notes:((s=r==null?void 0:r.replacement)==null?void 0:s.notes)??"",tracking:((i=r==null?void 0:r.replacement)==null?void 0:i.tracking)??""})},[r]);function n(s,i){d({...t,[i]:s})}async function y(){if(confirm("Are you sure you want to shipped the ticket?")){u(!0);try{const s=await E({...t,account:x,status:"PROCESSED TICKET"});h(v(s.status)),u(!1),p.visit("#files")}catch{u(!1)}}}async function b(){if(confirm("Are you sure you want to move in refund?")){l(!0);try{await S.dispatch(N(r.id,"REFUND")),l(!1),p.visit("#refund")}catch{l(!0)}}}return e.jsxs("div",{className:"bg-white h-full px-3",children:[e.jsxs("div",{className:"mt-10 w-full border-b-2 border-gray-600",children:[e.jsx("h1",{className:"mt-2",children:"Parts Internal Remarks/Notes:"}),r.validation_notes]}),e.jsxs("div",{className:"mt-5 my-4 w-full",children:[e.jsxs("div",{className:"px-4 py-2 sm:grid sm:grid-cols-2 sm:gap-4 sm:px-0",children:[e.jsx(a,{onChange:n,name:"unit",span:"",required:!0,value:String(t.unit??" "),label:"Unit",type:"text",errorMessage:"Unit is required"}),e.jsx(a,{onChange:n,name:"brand",span:"",required:!0,value:String(t.brand??" "),label:"Brand",type:"text",errorMessage:"Brand is required"})]}),e.jsxs("div",{className:"px-4 py-2 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[e.jsx(a,{onChange:n,name:"item_number",span:"",required:!0,value:String(t.item_number??" "),label:"model",type:"text",errorMessage:"model is required"}),e.jsx(a,{onChange:n,name:"serial_number",span:"",required:!0,value:String(t.serial_number??" "),label:"Serial",type:"text",errorMessage:"Serial is required"}),e.jsx(a,{onChange:n,name:"tracking",span:"",required:!0,value:String(t.tracking??" "),label:"Tracking",type:"text",errorMessage:"Tracking is required"})]}),e.jsx("div",{className:"px-4 py-2 sm:grid sm:grid-cols-1 sm:gap-4 sm:px-0",children:e.jsx(_,{required:!0,onChange:n,name:"notes",value:String(t.notes??" "),label:"Resource Notes:",type:"text",errorMessage:"notes is required"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{disabled:c,onClick:y,type:"button",class:"inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-green-700 rounded-lg hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 ",children:c?e.jsx(g,{}):"REPLACEMENT SHIPPED"}),e.jsx("button",{onClick:b,type:"button",class:"inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-red-700 rounded-lg hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 ",children:f?e.jsx(g,{}):"REPLACEMENT NOT SHIPPED"})]})]})]})}export{R as default};
